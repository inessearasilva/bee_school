"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[13],{67013:function(e,o,n){n.r(o);var t=n(1413),i=n(70885),a=n(72791),s=n(8761),c=n(57689),u=n(75359),l=n(15563),m=n(62062),r=n.n(m),d=n(48666),f=n(80184);console.log("first",u.Z);o.default=function(){(0,a.useEffect)((function(){sessionStorage.getItem("pageReloaded")?sessionStorage.removeItem("pageReloaded"):(sessionStorage.setItem("pageReloaded",!0),window.location.reload())}),[]);var e=(0,c.UO)().num_sequencial,o=((0,c.UO)().idcomposition,(0,a.useState)({num_sequencial:e,nome_utente:"",data_nascimento:"",sexo:""})),n=(0,i.Z)(o,2),m=n[0],_=n[1],p=(0,a.useState)({num_sequencial:e,id_initialcomposition:""}),g=(0,i.Z)(p,2),v=g[0],h=g[1],Z=(0,a.useState)(null),S=(0,i.Z)(Z,2),b=S[0],q=S[1],w=(0,a.useState)(null),N=(0,i.Z)(w,2),D=N[0],E=(N[1],(0,a.useRef)(null));(0,a.useEffect)((function(){l.Z.get(e).then((function(e){_((function(o){return(0,t.Z)((0,t.Z)({},o),{},{nome_utente:e.data.nome_utente,data_nascimento:e.data.data_nascimento,sexo:e.data.sexo})}))})).catch((function(e){console.log(e)}))}),[e]),(0,a.useEffect)((function(){l.Z.getidAvombro(e).then((function(e){h((function(o){return(0,t.Z)((0,t.Z)({},o),{},{id_initialcomposition:e.data.id_initialcomposition})}))})).catch((function(e){console.log(e),r()({title:"Erro!",text:"Houve um problema ao obter o id!",icon:"error"})}))}),[e]);var C=new Date(m.data_nascimento).toLocaleDateString("pt-PT",{day:"2-digit",month:"2-digit",year:"numeric"}),x=[{itemName:"N\xfamero sequencial",item:"num_sequencial",value:m.num_sequencial},{itemName:"Nome",item:"nome_utente",value:m.nome_utente},{itemName:"Data de nascimento",item:"data_nascimento",value:m.data_nascimento}],j=(0,a.useState)({num_sequencial:e,composition:""}),k=(0,i.Z)(j,2),I=k[0],P=k[1],R=(0,a.useState)(u.Z),y=(0,i.Z)(R,2),A=y[0],F=y[1];(0,a.useEffect)((function(){F(u.Z)}),[]),(0,a.useEffect)((function(){if(console.clear(),I.composition){var e=JSON.parse(I.composition),o=(0,d.G)(u.Z,e);console.log("using replaced jdt",o),F(o)}else console.log("using original jdt"),console.log(I.num_sequencial),F(u.Z),console.log("original",u.Z),console.log("the new",A)}),[I.composition]);var L=(0,a.useState)(!0),O=(0,i.Z)(L,2),V=O[0],B=O[1];return(0,a.useEffect)((function(){l.Z.getvaluesAvombro(e).then((function(e){P((function(o){return(0,t.Z)((0,t.Z)({},o),{},{num_sequencial:e.data.num_sequencial,composition:e.data.composition})})),B(!1)})).catch((function(e){console.log("Novo forms")}))}),[e]),(0,f.jsx)(f.Fragment,{children:!V&&""!==m.nome_utente&&""!==v.id_initialcomposition&&""!==A&&(0,f.jsx)(s.l,{ref:E,onSubmit:function(e,o){l.Z.createform({idjdt:1,num_sequencial:m.num_sequencial,version:1,createdat:new Date,state:0,id_initialcomposition:v.id_initialcomposition,composition:e,reference_model:x,isCompleted:1}).then((function(e){q(new Date),r()("","Formul\xe1rio submetido com sucesso.","success"),window.location.href="http://localhost:3000/#/avombro"})).catch((function(e){console.log("Error submitting form data:",e)}))},onSave:function(e,o){l.Z.createform({idjdt:1,num_sequencial:m.num_sequencial,version:1,createdat:new Date,state:0,id_initialcomposition:v.id_initialcomposition,composition:e,reference_model:x,isCompleted:0}).then((function(e){q(new Date),r()("","Formul\xe1rio guardado com sucesso.","success"),window.location.href="http://localhost:3000/#/avombro"})).catch((function(e){console.log("Error saving form data:",e)}))},onCancel:function(){r()("","Cancelado com sucesso","warning"),window.history.back()},template:A,dlm:{},showPrint:!1,editMode:!0,professionalTasks:["Registar Pedido","Consultar Pedido","Anular Pedido"],canSubmit:!0,canSave:!0,canCancel:!0,patientData:{numSequencial:m.num_sequencial,nome:m.nome_utente,dtaNascimento:m.data_nascimento,sexo:m.sexo,episodio:v.id_initialcomposition},reportData:{dtaEncerrada:D?D.toLocaleString():null,dtaCriada:b?b.toLocaleString():null,realizada:"In\xeas Silva",responsavel:"In\xeas Silva"},referenceModel:[{itemName:"N\xfamero sequencial",item:"num_seq",value:m.num_sequencial,formVisible:!0},{itemName:"Nome",item:"Nome",value:m.nome_utente,formVisible:!0},{itemName:"Data de nascimento",item:"dtaNascimento",value:C,formVisible:!0}],submitButtonDisabled:!1,saveButtonDisabled:!1})})}}}]);
//# sourceMappingURL=13.db0a1ca7.chunk.js.map