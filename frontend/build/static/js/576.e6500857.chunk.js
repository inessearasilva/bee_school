"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[576],{81576:function(e,t,n){n.r(t);var o=n(1413),i=n(70885),a=n(72791),s=n(8761),c=n(57689),l=n(47433),r=n(15563),u=n(62062),d=n.n(u),m=n(24662),f=n(80184);console.log("first",l.Z);t.default=function(){var e=(0,c.UO)().num_sequencial,t=(0,c.UO)().idcomposition,n=(0,a.useState)({num_sequencial:e,nome_utente:"",data_nascimento:"",sexo:""}),u=(0,i.Z)(n,2),g=u[0],p=u[1],b=(0,a.useState)({num_sequencial:e,id_initialcomposition:""}),S=(0,i.Z)(b,2),_=S[0],h=S[1],x=(0,a.useState)(null),v=(0,i.Z)(x,2),C=(v[0],v[1],(0,a.useState)(null)),Z=(0,i.Z)(C,2),j=(Z[0],Z[1],(0,a.useRef)(null));(0,a.useEffect)((function(){r.Z.get(e).then((function(e){p((function(t){return(0,o.Z)((0,o.Z)({},t),{},{nome_utente:e.data.nome_utente,data_nascimento:e.data.data_nascimento,sexo:e.data.sexo})}))})).catch((function(e){console.log(e)}))}),[e]),(0,a.useEffect)((function(){r.Z.getidAvini(e).then((function(e){h((function(t){return(0,o.Z)((0,o.Z)({},t),{},{id_initialcomposition:e.data.id_initialcomposition})}))})).catch((function(e){console.log(e),d()({title:"Erro!",text:"Houve um problema ao obter o id!",icon:"error"})}))}),[e]);var E=new Date(g.data_nascimento).toLocaleDateString("pt-PT",{day:"2-digit",month:"2-digit",year:"numeric"}),D=(g.num_sequencial,g.nome_utente,g.data_nascimento,(0,a.useState)({num_sequencial:e,idcomposition:t,composition:"",createdat:"",isCompleted:""})),N=(0,i.Z)(D,2),q=N[0],w=N[1],y=(0,a.useState)(l.Z),I=(0,i.Z)(y,2),k=I[0],A=I[1];(0,a.useEffect)((function(){A(l.Z)}),[]),(0,a.useEffect)((function(){if(console.clear(),q.composition){var e=JSON.parse(q.composition),t=(0,m.G)(l.Z,e);console.log("using replaced jdt",t),A(t)}else console.log("using original jdt"),console.log(q.num_sequencial),A(l.Z),console.log("original",l.Z),console.log("the new",k)}),[q.composition]),(0,a.useEffect)((function(){r.Z.getSubAvini(e).then((function(e){w((function(t){return(0,o.Z)((0,o.Z)({},t),{},{num_sequencial:e.data.num_sequencial,composition:e.data.composition,createdat:e.data.createdat,isCompleted:e.data.isCompleted})})),console.log("newJDT",k)})).catch((function(e){console.log("Novo forms")}))}),[e]),(0,a.useEffect)((function(){sessionStorage.getItem("pageReloaded")?sessionStorage.removeItem("pageReloaded"):(sessionStorage.setItem("pageReloaded",!0),window.location.reload())}),[]);var L=new Date(q.createdat).toLocaleString("pt-PT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),R=!0===q.isCompleted||1===q.isCompleted?"Terminado":"Rascunho";return(0,f.jsx)(f.Fragment,{children:""!==g.nome_utente&&""!==_.id_initialcomposition&&""!==k&&(0,f.jsxs)("div",{children:[(0,f.jsx)(s.l,{ref:j,onSubmit:function(e,t){return console.log("SUBMITTED VALUES: ",e,"CHANGED FIELDS: ",t)},onSave:function(e,t){return console.log("SAVED VALUES: ",e,"CHANGED FIELDS: ",t)},onCancel:function(e){return console.log("CANCELLED:",e)},template:k,dlm:{},showPrint:!0,editMode:!1,professionalTasks:["Registar Pedido","Consultar Pedido","Anular Pedido"],canSubmit:!0,canSave:!0,canCancel:!0,patientData:{numSequencial:g.num_sequencial,nome:g.nome_utente,dtaNascimento:E,sexo:g.sexo,processo:q.idcomposition},reportData:{estado:R,dtaCriada:L,realizada:"In\xeas Silva",responsavel:"In\xeas Silva"},referenceModel:[{itemName:"N\xfamero sequencial",item:"num_seq",value:g.num_sequencial,formVisible:!0},{itemName:"Nome",item:"Nome",value:g.nome_utente,formVisible:!0},{itemName:"Data de nascimento",item:"dtaNascimento",value:E,formVisible:!0}],submitButtonDisabled:!1,saveButtonDisabled:!1}),(0,f.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"white"},children:[(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)("button",{onClick:function(){return window.history.back()},type:"button",className:"btn btn-primary",style:{backgroundColor:"#60b1e0",borderColor:"#60b1e0",borderRadius:"0.15rem",width:"4.2rem",height:"2.2rem",display:"flex",justifyContent:"center",alignItems:"center",color:"#fff",fontSize:"0.8rem"},children:"Voltar"}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{})]})]})})}}}]);
//# sourceMappingURL=576.e6500857.chunk.js.map