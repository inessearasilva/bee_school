"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[637],{49637:function(e,n,o){o.r(n);var t=o(1413),i=o(70885),a=o(72791),s=o(8761),c=o(57689),u=o(47433),l=o(15563),m=o(62062),r=o.n(m),d=o(24662),f=o(80184);console.log("first",u.Z);n.default=function(){(0,a.useEffect)((function(){sessionStorage.getItem("pageReloaded")?sessionStorage.removeItem("pageReloaded"):(sessionStorage.setItem("pageReloaded",!0),window.location.reload())}),[]);var e=(0,c.UO)().num_sequencial,n=((0,c.UO)().idcomposition,(0,a.useState)({num_sequencial:e,nome_utente:"",data_nascimento:"",sexo:""})),o=(0,i.Z)(n,2),m=o[0],_=o[1],p=(0,a.useState)({num_sequencial:e,id_initialcomposition:""}),g=(0,i.Z)(p,2),v=g[0],h=g[1],Z=(0,a.useState)(null),S=(0,i.Z)(Z,2),q=S[0],w=S[1],b=(0,a.useState)(null),N=(0,i.Z)(b,2),D=N[0],E=(N[1],(0,a.useRef)(null));(0,a.useEffect)((function(){l.Z.get(e).then((function(e){_((function(n){return(0,t.Z)((0,t.Z)({},n),{},{nome_utente:e.data.nome_utente,data_nascimento:e.data.data_nascimento,sexo:e.data.sexo})}))})).catch((function(e){console.log(e)}))}),[e]),(0,a.useEffect)((function(){l.Z.getidAvini(e).then((function(e){h((function(n){return(0,t.Z)((0,t.Z)({},n),{},{id_initialcomposition:e.data.id_initialcomposition})}))})).catch((function(e){console.log(e),r()({title:"Erro!",text:"Houve um problema ao obter o id!",icon:"error"})}))}),[e]);var C=new Date(m.data_nascimento).toLocaleDateString("pt-PT",{day:"2-digit",month:"2-digit",year:"numeric"}),x=[{itemName:"N\xfamero sequencial",item:"num_sequencial",value:m.num_sequencial},{itemName:"Nome",item:"nome_utente",value:m.nome_utente},{itemName:"Data de nascimento",item:"data_nascimento",value:m.data_nascimento}],j=(0,a.useState)({num_sequencial:e,composition:""}),k=(0,i.Z)(j,2),I=k[0],P=k[1],R=(0,a.useState)(u.Z),y=(0,i.Z)(R,2),A=y[0],F=y[1];(0,a.useEffect)((function(){F(u.Z)}),[]),(0,a.useEffect)((function(){if(console.clear(),I.composition){var e=JSON.parse(I.composition),n=(0,d.G)(u.Z,e);console.log("using replaced jdt",n),F(n)}else console.log("using original jdt"),console.log(I.num_sequencial),F(u.Z),console.log("original",u.Z),console.log("the new",A)}),[I.composition]);var L=(0,a.useState)(!0),O=(0,i.Z)(L,2),V=O[0],B=O[1];return(0,a.useEffect)((function(){l.Z.getvaluesAvini(e).then((function(e){P((function(n){return(0,t.Z)((0,t.Z)({},n),{},{num_sequencial:e.data.num_sequencial,composition:e.data.composition})})),B(!1)})).catch((function(e){console.log("Novo forms")}))}),[e]),(0,f.jsx)(f.Fragment,{children:!V&&""!==m.nome_utente&&""!==v.id_initialcomposition&&""!==A&&(0,f.jsx)(s.l,{ref:E,onSubmit:function(e,n){l.Z.createform({idjdt:0,num_sequencial:m.num_sequencial,version:1,createdat:new Date,state:0,id_initialcomposition:v.id_initialcomposition,composition:e,reference_model:x,isCompleted:1}).then((function(e){w(new Date),r()("","Formul\xe1rio submetido com sucesso.","success"),window.location.href="http://localhost:3000/#/avini"})).catch((function(e){console.log("Error submitting form data:",e)}))},onSave:function(e,n){l.Z.createform({idjdt:0,num_sequencial:m.num_sequencial,version:1,createdat:new Date,state:0,id_initialcomposition:v.id_initialcomposition,composition:e,reference_model:x,isCompleted:0}).then((function(e){w(new Date),r()("","Formul\xe1rio guardado com sucesso.","success"),window.location.href="http://localhost:3000/#/avini"})).catch((function(e){console.log("Error saving form data:",e)}))},onCancel:function(){r()("","Cancelado com sucesso","warning"),window.history.back()},template:A,dlm:{},showPrint:!1,editMode:!0,professionalTasks:["Registar Pedido","Consultar Pedido","Anular Pedido"],canSubmit:!0,canSave:!0,canCancel:!0,patientData:{numSequencial:m.num_sequencial,nome:m.nome_utente,dtaNascimento:m.data_nascimento,sexo:m.sexo,episodio:v.id_initialcomposition},reportData:{dtaEncerrada:D?D.toLocaleString():null,dtaCriada:q?q.toLocaleString():null,realizada:"In\xeas Silva",responsavel:"In\xeas Silva"},referenceModel:[{itemName:"N\xfamero sequencial",item:"num_seq",value:m.num_sequencial,formVisible:!0},{itemName:"Nome",item:"Nome",value:m.nome_utente,formVisible:!0},{itemName:"Data de nascimento",item:"dtaNascimento",value:C,formVisible:!0}],submitButtonDisabled:!1,saveButtonDisabled:!1})})}}}]);
//# sourceMappingURL=637.232f028e.chunk.js.map