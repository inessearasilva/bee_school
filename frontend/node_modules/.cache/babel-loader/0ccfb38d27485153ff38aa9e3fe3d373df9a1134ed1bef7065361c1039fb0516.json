{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ines_/bee_v2/bee_school/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ines_/bee_v2/bee_school/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ines_/bee_v2/bee_school/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{MapContainer,TileLayer,CircleMarker,Popup}from\"react-leaflet\";import\"leaflet/dist/leaflet.css\";import{useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Record=function Record(props){var heatmapData=Object.entries(props.record.geographical).reduce(function(data,_ref){var _ref2=_slicedToArray(_ref,2),country=_ref2[0],values=_ref2[1];if(country!==\"null\"){var value=values[0];// Value is stored at index 0\nvar latitude=values[1];// Latitude at index 1\nvar longitude=values[2];// Longitude at index 2\nif(latitude!==null&&longitude!==null){data.push({country:country,value:value,coordinates:[latitude,longitude]});}}return data;},[]);return/*#__PURE__*/_jsxs(MapContainer,{className:\"topicmap\",center:[0,0],zoomSnap:0,zoom:1.25,doubleClickZoom:false,attributionControl:false,maxBounds:[[90,-180],[-90,180]],children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",noWrap:true}),heatmapData.map(function(data){return/*#__PURE__*/_jsx(CircleMarker,{center:data.coordinates,radius:Math.pow(data.value,1/5)*5,color:\"#F9E076\",fillColor:\"#F9E076\",fillOpacity:0.8,children:/*#__PURE__*/_jsxs(Popup,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Country: \"}),data.country]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Value: \"}),data.value]})]})},data.country);})]});};export default function Map(){var _useParams=useParams(),topic=_useParams.topic;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),records=_useState2[0],setRecords=_useState2[1];useEffect(function(){function getRecords(){return _getRecords.apply(this,arguments);}function _getRecords(){_getRecords=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,_records,matchingRecords;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"https://bee-aware-2b421aedee22.herokuapp.com/statistics/\");case 3:response=_context.sent;if(response.ok){_context.next=6;break;}throw new Error(\"An error occurred: \".concat(response.statusText));case 6:_context.next=8;return response.json();case 8:_records=_context.sent;matchingRecords=_records.filter(function(r){return r.topic===topic;});setRecords(matchingRecords);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);window.alert(_context.t0.message);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return _getRecords.apply(this,arguments);}getRecords();},[topic]);if(!records.length){return/*#__PURE__*/_jsx(\"div\",{children:\"No record found\"});}return/*#__PURE__*/_jsx(\"div\",{children:records.map(function(record){return/*#__PURE__*/_jsx(Record,{record:record},record.topic);})});}","map":{"version":3,"names":["React","useEffect","useState","MapContainer","TileLayer","CircleMarker","Popup","useParams","Record","props","heatmapData","Object","entries","record","geographical","reduce","data","country","values","value","latitude","longitude","push","coordinates","map","Map","topic","records","setRecords","getRecords","fetch","response","ok","Error","statusText","json","matchingRecords","filter","r","window","alert","message","length"],"sources":["C:/Users/ines_/bee_v2/bee_school/frontend/src/views/dashboard/Map Topic.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { MapContainer, TileLayer, CircleMarker, Popup } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport { useParams } from 'react-router-dom';\n\nconst Record = (props) => {\n  const heatmapData = Object.entries(props.record.geographical).reduce((data, [country, values]) => {\n    if (country !== \"null\") {\n      const value = values[0]; // Value is stored at index 0\n      const latitude = values[1]; // Latitude at index 1\n      const longitude = values[2]; // Longitude at index 2\n      \n      if (latitude !== null && longitude !== null) {\n        data.push({\n          country: country,\n          value: value,\n          coordinates: [latitude, longitude],\n        });\n      }\n    }\n    return data;\n  }, []);\n  return (\n    <MapContainer className=\"topicmap\" center={[0, 0]} zoomSnap={0} zoom={1.25} doubleClickZoom={false} attributionControl={false} maxBounds={[[90, -180], [-90, 180]]}>\n      <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" noWrap={true}/>\n      {heatmapData.map((data) => (\n        <CircleMarker\n          key={data.country}\n          center={data.coordinates}\n          radius= {(data.value) ** (1/5) * 5}\n          color=\"#F9E076\"\n          fillColor=\"#F9E076\"\n          fillOpacity={0.8}\n        >\n          <Popup>\n            <div>\n              <strong>Country: </strong>{data.country}\n            </div>\n            <div>\n              <strong>Value: </strong>{data.value}\n            </div>\n          </Popup>\n        </CircleMarker>\n      ))}\n    </MapContainer>\n  );\n};\n\nexport default function Map() {\n  const { topic } = useParams();\n  const [records, setRecords] = useState([]);\n\n  useEffect(() => {\n    async function getRecords() {\n      try {\n        const response = await fetch(\"https://bee-aware-2b421aedee22.herokuapp.com/statistics/\");\n        if (!response.ok) {\n          throw new Error(`An error occurred: ${response.statusText}`);\n        }\n        const records = await response.json();\n        const matchingRecords = records.filter((r) => r.topic === topic);\n        setRecords(matchingRecords);\n      } catch (error) {\n        window.alert(error.message);\n      }\n    }\n\n    getRecords();\n  }, [topic]);\n\n  if (!records.length) {\n    return <div>No record found</div>;\n  }\n\n  return (\n    <div>\n      {records.map((record) => (\n        <Record record={record} key={record.topic} />\n      ))}\n    </div>\n  );\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}