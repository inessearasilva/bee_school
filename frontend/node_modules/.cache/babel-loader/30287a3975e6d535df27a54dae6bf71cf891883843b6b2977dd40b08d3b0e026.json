{"ast":null,"code":"import _toConsumableArray from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _objectSpread from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nimport { Formik } from \"formik\";\nimport ob from \"object-path\";\nimport React, { Component } from \"react\";\nimport * as Yup from \"yup\";\nimport { handleCardinality } from \"../../assets/functions/HandleCardinality/HandleCardinality\";\nimport { handleSectionValidation } from \"../../assets/functions/HandleSectionValidation/handleSectionValidation\";\nimport { processItemSection } from \"../../assets/functions/HandleSectionValidation/processItemSection\";\nimport { handleSubmit } from \"../../assets/functions/HandleSubmit/handleSubmit\";\nimport * as buildDatatypeConsultMode from \"../../containers/Form/BuildItems/BuildItemConsultMode/BuildItemConsultMode/BuildItemConsultMode\";\nimport * as buildDatatypeEditMode from \"../../containers/Form/BuildItems/BuildItemEditMode/BuildItemEditMode/BuildItemEditMode\";\nimport { buildSectionInitialValue } from '../../containers/Form/FormInitialValues/BuildSectionInitialValue/BuildSectionInitialValue';\nimport { buildSectionValidation } from \"../../containers/Form/FormValidation/BuildSectionValidation/BuildSectionValidation\";\nimport CombinedContext from \"../../contexts/CombinedContext\";\nimport ProviderCombinedContext from \"../../contexts/ProviderCombinedContext\";\nimport AddSectionContainer from \"../UI/AddSection/AddSectionContainer\";\nimport AddSectionButton from \"../UI/AddSectionButton/AddSectionButton\";\nimport SectionContainer from \"../UI/SectionContainer/SectionContainer\";\nimport SectionsListConsultMode from \"./SectionsListConsultMode\";\nimport SectionsListEditMode from \"./SectionsListEditMode\";\nimport SubFormContainerConsultMode from \"./SubFormContainerConsultMode\";\nimport SubFormContainerEditMode from \"./SubFormContainerEditMode\";\nvar SubFormComponent = /*#__PURE__*/function (_Component) {\n  _inherits(SubFormComponent, _Component);\n  var _super = _createSuper(SubFormComponent);\n  function SubFormComponent() {\n    var _this;\n    _classCallCheck(this, SubFormComponent);\n    _this = _super.call(this);\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      checkValidation: false,\n      confirmEditMode: false,\n      template: null,\n      professionalTasks: [],\n      subForm: {\n        openSubForm: false,\n        sectionId: \"\",\n        type: \"\",\n        path: \"\",\n        jdt: \"\",\n        setFieldValue: \"\"\n      },\n      level: 0\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function (values) {\n      var jsonValues = handleSubmit(_this.state.template, values);\n      _this.multipleSections.forEach(function (section) {\n        var path = section.path.split('-').join('.') + \".value\";\n        jsonValues[path] = section.values;\n      });\n      _this.props.onSubmitSubForm(jsonValues);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleAddSection\", function (pathArray, setFieldValue, setFieldTouched) {\n      var section = _this.multipleSections.filter(function (obj) {\n        return obj.path === pathArray.join('-');\n      })[0];\n      _this.setState(function (prevState) {\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          subForm: _objectSpread(_objectSpread({}, prevState.subForm), {}, {\n            openSubForm: true,\n            jdt: section.jdt,\n            path: section.path,\n            type: \"new\",\n            sectionId: \"\",\n            setFieldValue: setFieldValue\n          })\n        });\n      });\n      setFieldTouched(pathArray.join('-'));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleEditSectionValue\", function (sectionPath, id) {\n      var section = _this.multipleSections.filter(function (obj) {\n        return obj.path === sectionPath;\n      })[0];\n      var sectionValues = section.values.filter(function (obj) {\n        return obj.id === id;\n      })[0].values;\n      var mergedJSON = JSON.parse(JSON.stringify(section.jdt));\n      Object.keys(sectionValues).forEach(function (label) {\n        var indexRemove = sectionPath.split('-').length;\n        var jdtLabel = label.split('.').slice(indexRemove);\n        ob.set(mergedJSON, jdtLabel, sectionValues[label]);\n      });\n      _this.setState(function (prevState) {\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          subForm: _objectSpread(_objectSpread({}, prevState.subForm), {}, {\n            openSubForm: true,\n            jdt: mergedJSON,\n            path: section.path,\n            type: \"edit\",\n            sectionId: id\n          })\n        });\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleRemoveSectionValue\", function (sectionPath, id, setFieldValue) {\n      _this.context.fields.updateValue(\"\".concat(sectionPath, \"-value\"));\n      _this.multipleSections.forEach(function (obj) {\n        if (obj.path === sectionPath) {\n          var occurrence = obj.occurrences;\n          var valuesSections = obj.values.filter(function (obj) {\n            return obj.id !== id;\n          });\n          obj.occurrences = occurrence - 1;\n          obj.values = valuesSections;\n          setFieldValue(sectionPath, occurrence - 1);\n        }\n      });\n      _this.forceUpdate();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmitSubForm\", function (values, path, type, sectionId) {\n      var setFieldValue = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n      _this.context.fields.updateValue(\"\".concat(path, \"-value\"));\n      if (type === \"new\") {\n        _this.multipleSections.forEach(function (obj) {\n          if (obj.path === path) {\n            var occurrence = obj.occurrences;\n            var valuesSections = obj.values;\n            var maxId = 0;\n            valuesSections.forEach(function (val) {\n              if (val.id >= maxId) {\n                maxId = val.id;\n              }\n            });\n            obj.occurrences = occurrence + 1;\n            obj.values = [].concat(_toConsumableArray(valuesSections), [{\n              id: maxId + 1,\n              values: values\n            }]);\n            setFieldValue(path, occurrence + 1);\n          }\n        });\n      } else if (type === \"edit\") {\n        _this.multipleSections.forEach(function (obj) {\n          if (obj.path === path) {\n            var valuesSections = obj.values.filter(function (section) {\n              return section.id !== sectionId;\n            });\n            obj.values = [].concat(_toConsumableArray(valuesSections), [{\n              id: sectionId,\n              values: values\n            }]);\n          }\n        });\n      }\n      _this.handleCancelSubForm();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleCancelSubForm\", function () {\n      _this.setState(function (prevState) {\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          subForm: _objectSpread(_objectSpread({}, prevState.subForm), {}, {\n            openSubForm: false,\n            jdt: \"\",\n            path: \"\",\n            type: \"\",\n            sectionId: \"\",\n            setFieldValue: \"\"\n          })\n        });\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleConsultSectionValue\", function (jdt, values, sectionPath) {\n      var mergedJSON = JSON.parse(JSON.stringify(jdt));\n      Object.keys(values).forEach(function (label) {\n        var indexRemove = sectionPath.split('-').length;\n        var jdtLabel = label.split('.').slice(indexRemove);\n        ob.set(mergedJSON, jdtLabel, values[label]);\n      });\n      _this.setState(function (prevState) {\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          subForm: _objectSpread(_objectSpread({}, prevState.subForm), {}, {\n            openSubForm: true,\n            jdt: mergedJSON,\n            path: sectionPath,\n            type: \"consult\"\n          })\n        });\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"buildSingleItemSubFormEditMode\", function (item, itemIndex, pathArray, setFieldValue, values, errors, touched, setFieldTouched, isAny, cardinalityObject, sectionNotMandatoryObject, sectionValidation) {\n      var itemSection = processItemSection(pathArray, isAny, sectionNotMandatoryObject);\n      return buildDatatypeEditMode.buildItemEditMode(item.dataType, item, itemIndex, pathArray, setFieldValue, values, errors, touched, setFieldTouched, isAny, cardinalityObject, sectionValidation, _this.initialValuesSubForm, _this.validationSchemaSubForm, itemSection, _this.multipleSections, _this.state.professionalTasks, _this.context.order, _this.context.datatypes.datatypes[pathArray.join('.')]);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"buildSingleItemSubFormConsultMode\", function (item, itemIndex) {\n      var isAny = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var pathArray = arguments.length > 3 ? arguments[3] : undefined;\n      return buildDatatypeConsultMode.buildItemConsultMode(item.dataType, item, itemIndex, isAny, _this.state.professionalTasks, _this.context.order, pathArray);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"buildInitialValueSection\", function (occurrences, pathLabel) {\n      buildSectionInitialValue(occurrences, pathLabel, _this.initialValuesSubForm);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"buildValidationSection\", function (minOccurrences, pathLabel) {\n      buildSectionValidation(minOccurrences, pathLabel, _this.validationSchemaSubForm);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"sectionConstructor\", function (pathArray, item, cardinalityObject, sectionNotMandatoryObject, sectionValidation) {\n      var path = pathArray.join('-'); // Se a cardinalidade da secção for diferente de 0, há necessidade de ver na validação se o número de campos pedidos é respeitado\n\n      if (item.cardinality !== undefined && item.cardinality.interval.lowerOccurrences > 0) {\n        cardinalityObject[path] = [].concat(_toConsumableArray(handleCardinality(item, pathArray, _this.state.professionalTasks)), [item.node.text, item.cardinality.interval.lowerOccurrences]);\n      } // Para cada secção vamos ver quais os items existentes para depois verificar se o item é required ou não dependendo da lowerOccurrence da secção\n\n      sectionNotMandatoryObject[path] = [].concat(_toConsumableArray(handleSectionValidation(item, pathArray, _this.state.professionalTasks)), [item.node.text, item.occurrences.lowerOccurrences]); // Se a occorrência da secção for diferente de 0, há necessidade de ver na validação de pelo menos um dos campos está preenchido\n\n      if (item.occurrences.lowerOccurrences !== 0) {\n        sectionValidation[path] = [].concat(_toConsumableArray(handleCardinality(item, pathArray, _this.state.professionalTasks)), [item.node.text, 1]);\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"buildSectionSubFormEditMode\", function (item, itemIndex, pathArray, setFieldValue, values, errors, touched, setFieldTouched, cardinalityObject, sectionNotMandatoryObject, sectionValidation) {\n      var section = pathArray.filter(function (x) {\n        return x === 'items';\n      }).length;\n      if (item.occurrences.upperOccurrences !== 1 && pathArray.join('-') !== _this.props.path) {\n        if (_this.multipleSections.filter(function (obj) {\n          return obj.path === pathArray.join('-');\n        }).length === 0) {\n          var sections = _this.multipleSections;\n          var vals = [];\n          var occs = 0;\n          if (item.value) {\n            if (item.value.length > 0) {\n              vals = item.value;\n              occs = item.value.length;\n            }\n          }\n          sections.push({\n            path: pathArray.join('-'),\n            jdt: item,\n            occurrences: occs,\n            minOccurrences: item.occurrences.lowerOccurrences,\n            values: vals\n          });\n          _this.multipleSections = sections;\n          _this.buildInitialValueSection(occs, pathArray.join('-'));\n          _this.buildValidationSection(item.occurrences.lowerOccurrences, pathArray.join('-'));\n        }\n        return /*#__PURE__*/React.createElement(SectionContainer, {\n          item: item,\n          path: item.itemPath,\n          pathArray: pathArray,\n          idJDT: _this.props.idJDT,\n          templateRules: _this.props.templateRules,\n          professionalTasks: _this.state.professionalTasks,\n          values: values,\n          sectionConstructor: function sectionConstructor() {\n            return _this.sectionConstructor(pathArray, item, cardinalityObject, sectionNotMandatoryObject, sectionValidation);\n          },\n          section: section,\n          isTitleVisible: _this.context.datatypes.showSectionTitle && Object.keys(_this.context.datatypes.showSectionTitle).length > 0 ? _this.context.datatypes.showSectionTitle[pathArray.join(\".\")] : true,\n          accordionOpen: true,\n          subForm: true,\n          isMandatory: item.occurrences.lowerOccurrences !== 0,\n          order: _this.context.order ? _this.context.order[pathArray.join('.')] : null,\n          hsize: _this.context.sizes.sizes ? _this.context.sizes.sizes[pathArray.join('.')] : null,\n          description: item.node === null ? \"\" : item.node.description,\n          key: itemIndex,\n          label: item.node.text\n        }, /*#__PURE__*/React.createElement(AddSectionButton, {\n          error: touched[pathArray.join('-')] && errors[pathArray.join('-')],\n          handleAddSection: function handleAddSection() {\n            return _this.handleAddSection(pathArray, setFieldValue, setFieldTouched);\n          },\n          disabled: item.occurrences.upperOccurrences === '*' ? false : _this.multipleSections.filter(function (obj) {\n            return obj.path === pathArray.join('-');\n          })[0].occurrences >= item.occurrences.upperOccurrences\n        }), /*#__PURE__*/React.createElement(SectionsListEditMode, {\n          error: touched[pathArray.join('-')] && errors[pathArray.join('-')],\n          onEditSection: function onEditSection(sectionPath, id) {\n            return _this.handleEditSectionValue(sectionPath, id);\n          },\n          onRemoveSection: function onRemoveSection(sectionPath, id) {\n            return _this.handleRemoveSectionValue(sectionPath, id, setFieldValue);\n          },\n          sections: _this.multipleSections.filter(function (obj) {\n            return obj.path === pathArray.join('-');\n          })[0]\n        }));\n      }\n      return /*#__PURE__*/React.createElement(SectionContainer, {\n        item: item,\n        path: item.itemPath,\n        pathArray: pathArray,\n        idJDT: _this.props.idJDT,\n        templateRules: _this.props.templateRules,\n        professionalTasks: _this.state.professionalTasks,\n        values: values,\n        sectionConstructor: function sectionConstructor() {\n          return _this.sectionConstructor(pathArray, item, cardinalityObject, sectionNotMandatoryObject, sectionValidation);\n        },\n        section: section,\n        isTitleVisible: _this.context.datatypes.showSectionTitle && Object.keys(_this.context.datatypes.showSectionTitle).length > 0 ? _this.context.datatypes.showSectionTitle[pathArray.join(\".\")] : true,\n        accordionOpen: true,\n        subForm: true,\n        isMandatory: item.occurrences.lowerOccurrences !== 0,\n        order: _this.context.order ? _this.context.order[pathArray.join('.')] : null,\n        hsize: _this.context.sizes.sizes ? _this.context.sizes.sizes[pathArray.join('.')] : null,\n        cardinality: item.cardinality !== undefined && item.cardinality.interval.lowerOccurrences,\n        description: item.node === null ? \"\" : item.node.description,\n        key: itemIndex,\n        label: item.node.text\n      }, item.items.map(function (subItem, subItemIndex) {\n        var array = [];\n        array.push('items', subItemIndex);\n        return _this.buildItemSubFormEditMode(subItem, subItemIndex, pathArray.concat(array), setFieldValue, values, errors, touched, setFieldTouched, cardinalityObject, sectionNotMandatoryObject, sectionValidation);\n      }), Object.keys(_this.context.sectionArchetype.sectionArchetype).filter(function (x) {\n        return _this.context.sectionArchetype.sectionArchetype[x].parentPath === pathArray.join('.');\n      }).map(function (x) {\n        return /*#__PURE__*/React.createElement(AddSectionContainer, {\n          key: x,\n          path: x,\n          order: _this.context.order ? _this.context.order[x] : null,\n          label: _this.context.sectionArchetype.sectionArchetype[x].sectionName\n        });\n      }));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"buildSectionSubFormConsultMode\", function (item, itemIndex, pathArray) {\n      var section = pathArray.filter(function (x) {\n        return x === 'items';\n      }).length;\n      if (item.occurrences.upperOccurrences !== 1 && pathArray.join('-') !== _this.props.path) {\n        return /*#__PURE__*/React.createElement(SectionContainer, {\n          item: item,\n          pathArray: pathArray,\n          section: section,\n          isTitleVisible: _this.context.datatypes.showSectionTitle && Object.keys(_this.context.datatypes.showSectionTitle).length > 0 ? _this.context.datatypes.showSectionTitle[pathArray.join(\".\")] : true,\n          subForm: true,\n          accordionOpen: true,\n          order: _this.context.order ? _this.context.order[pathArray.join('.')] : null,\n          hsize: _this.context.sizes.sizes ? _this.context.sizes.sizes[pathArray.join('.')] : null,\n          description: item.node === null ? \"\" : item.node.description,\n          key: itemIndex,\n          professionalTasks: _this.state.professionalTasks,\n          label: item.node.text\n        }, /*#__PURE__*/React.createElement(SectionsListConsultMode, {\n          sectionPath: pathArray.join('-'),\n          sections: item.value,\n          jdt: item,\n          onConsultSection: _this.handleConsultSectionValue\n        }));\n      }\n      return /*#__PURE__*/React.createElement(SectionContainer, {\n        item: item,\n        pathArray: pathArray,\n        section: section,\n        isTitleVisible: _this.context.datatypes.showSectionTitle && Object.keys(_this.context.datatypes.showSectionTitle).length > 0 ? _this.context.datatypes.showSectionTitle[pathArray.join(\".\")] : true,\n        subForm: true,\n        accordionOpen: true,\n        order: _this.context.order ? _this.context.order[pathArray.join('.')] : null,\n        hsize: _this.context.sizes.sizes ? _this.context.sizes.sizes[pathArray.join('.')] : null,\n        description: item.node === null ? \"\" : item.node.description,\n        key: itemIndex,\n        professionalTasks: _this.state.professionalTasks,\n        label: item.node.text\n      }, item.items.map(function (subItem, subItemIndex) {\n        var array = [];\n        array.push('items', subItemIndex);\n        return _this.buildItemSubFormConsultMode(subItem, subItemIndex, pathArray.concat(array));\n      }), Object.keys(_this.context.sectionArchetype.sectionArchetype).filter(function (x) {\n        return _this.context.sectionArchetype.sectionArchetype[x].parentPath === pathArray.join('.');\n      }).map(function (x) {\n        return /*#__PURE__*/React.createElement(AddSectionContainer, {\n          key: x,\n          path: x,\n          order: _this.context.order ? _this.context.order[x] : null,\n          label: _this.context.sectionArchetype.sectionArchetype[x].sectionName\n        });\n      }));\n    });\n    _defineProperty(_assertThisInitialized(_this), \"buildItemSubFormEditMode\", function (item, itemIndex, pathArray, setFieldValue, values, errors, touched, setFieldTouched, cardinalityObject, sectionNotMandatoryObject, sectionValidation) {\n      if (item.data_type === 'Title') {\n        return _this.buildSectionSubFormEditMode(item, itemIndex, pathArray, setFieldValue, values, errors, touched, setFieldTouched, cardinalityObject, sectionNotMandatoryObject, sectionValidation);\n      } else {\n        if (Array.isArray(item)) {\n          return item.map(function (itemAny, itemAnyIndex) {\n            var array = [];\n            array.push(itemAnyIndex);\n            return _this.buildSingleItemSubFormEditMode(itemAny, itemAnyIndex, pathArray.concat(array), setFieldValue, values, errors, touched, setFieldTouched, true, cardinalityObject, sectionNotMandatoryObject, sectionValidation);\n          });\n        } else {\n          return _this.buildSingleItemSubFormEditMode(item, itemIndex, pathArray, setFieldValue, values, errors, touched, setFieldTouched, false, cardinalityObject, sectionNotMandatoryObject, sectionValidation);\n        }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"buildItemSubFormConsultMode\", function (item, itemIndex, pathArray) {\n      if (item.data_type === 'Title') {\n        return _this.buildSectionSubFormConsultMode(item, itemIndex, pathArray);\n      } else {\n        if (Array.isArray(item)) {\n          return item.map(function (itemAny, itemAnyIndex) {\n            var array = [];\n            array.push(itemAnyIndex);\n            return _this.buildSingleItemSubFormConsultMode(itemAny, itemAnyIndex, true, pathArray.concat(array));\n          });\n        } else {\n          return _this.buildSingleItemSubFormConsultMode(item, itemIndex, false, pathArray);\n        }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"openSubForm\", function () {\n      return /*#__PURE__*/React.createElement(SubForm, {\n        level: _this.state.subForm.path.split('-').filter(function (x) {\n          return x === 'items';\n        }).length,\n        template: _this.state.template,\n        professionalTasks: _this.state.professionalTasks,\n        editMode: _this.props.editMode,\n        path: _this.state.subForm.path,\n        onSubmitSubForm: function onSubmitSubForm(values) {\n          return _this.handleSubmitSubForm(values, _this.state.subForm.path, _this.state.subForm.type, _this.state.subForm.sectionId, _this.state.subForm.setFieldValue);\n        },\n        onCancel: function onCancel() {\n          return _this.handleCancelSubForm();\n        },\n        jdt: _this.state.subForm.jdt\n      });\n    });\n    _this.initialValuesSubForm = {};\n    _this.validationSchemaSubForm = {};\n    _this.multipleSections = [];\n    return _this;\n  }\n  _createClass(SubFormComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.editMode && !this.state.confirmEditMode) {\n        this.setState(function (prevState) {\n          return _objectSpread(_objectSpread({}, prevState), {}, {\n            confirmEditMode: !prevState.confirmEditMode\n          });\n        });\n      }\n      this.setState({\n        template: this.props.template,\n        professionalTasks: this.props.professionalTasks,\n        level: this.props.level\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var form = null;\n      if (this.props.editMode) {\n        form = /*#__PURE__*/React.createElement(Formik, {\n          initialValues: this.initialValuesSubForm,\n          validationSchema: Yup.object().shape(this.validationSchemaSubForm),\n          onSubmit: function onSubmit(values) {\n            return _this2.handleSubmit(values);\n          },\n          validateOnMount: true // REVER\n        }, function (_ref) {\n          var values = _ref.values,\n            handleSubmit = _ref.handleSubmit,\n            setFieldValue = _ref.setFieldValue,\n            errors = _ref.errors,\n            touched = _ref.touched,\n            setFieldTouched = _ref.setFieldTouched,\n            isSubmitting = _ref.isSubmitting;\n          return /*#__PURE__*/React.createElement(SubFormContainerEditMode, {\n            level: _this2.state.level,\n            onCancel: _this2.props.onCancel,\n            onHandleSubmit: function onHandleSubmit() {\n              return _this2.setState(function (prevState) {\n                return _objectSpread(_objectSpread({}, prevState), {}, {\n                  checkValidation: !prevState.checkValidation\n                });\n              }, handleSubmit);\n            },\n            onDisabled: isSubmitting\n          }, _this2.buildItemSubFormEditMode(_this2.props.jdt, _this2.props.path.split(\"-\")[_this2.props.path.split(\"-\").length - 1], _this2.props.path.split(\"-\"), setFieldValue, values, errors, touched, setFieldTouched, {}, {}, {}));\n        });\n      } else {\n        form = /*#__PURE__*/React.createElement(SubFormContainerConsultMode, {\n          level: this.state.level,\n          onCancel: this.props.onCancel\n        }, this.buildItemSubFormConsultMode(this.props.jdt, this.props.path.split(\"-\")[this.props.path.split(\"-\").length - 1], this.props.path.split(\"-\")));\n      }\n      return /*#__PURE__*/React.createElement(\"div\", null, this.state.subForm.openSubForm && this.openSubForm(), form);\n    }\n  }]);\n  return SubFormComponent;\n}(Component);\n_defineProperty(SubFormComponent, \"contextType\", CombinedContext);\nvar SubForm = function SubForm(props) {\n  return /*#__PURE__*/React.createElement(ProviderCombinedContext, null, /*#__PURE__*/React.createElement(SubFormComponent, props));\n};\nexport default SubForm;","map":{"version":3,"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","Formik","ob","React","Component","Yup","handleCardinality","handleSectionValidation","processItemSection","handleSubmit","buildDatatypeConsultMode","buildDatatypeEditMode","buildSectionInitialValue","buildSectionValidation","CombinedContext","ProviderCombinedContext","AddSectionContainer","AddSectionButton","SectionContainer","SectionsListConsultMode","SectionsListEditMode","SubFormContainerConsultMode","SubFormContainerEditMode","SubFormComponent","checkValidation","confirmEditMode","template","professionalTasks","subForm","openSubForm","sectionId","type","path","jdt","setFieldValue","level","values","jsonValues","state","multipleSections","forEach","section","split","join","props","onSubmitSubForm","pathArray","setFieldTouched","filter","setState","prevState","sectionPath","id","sectionValues","mergedJSON","JSON","parse","stringify","keys","label","indexRemove","length","jdtLabel","slice","set","context","fields","updateValue","occurrence","occurrences","valuesSections","forceUpdate","maxId","val","handleCancelSubForm","item","itemIndex","errors","touched","isAny","cardinalityObject","sectionNotMandatoryObject","sectionValidation","itemSection","buildItemEditMode","dataType","initialValuesSubForm","validationSchemaSubForm","order","datatypes","buildItemConsultMode","pathLabel","minOccurrences","cardinality","undefined","interval","lowerOccurrences","node","text","x","upperOccurrences","sections","vals","occs","push","buildInitialValueSection","buildValidationSection","createElement","itemPath","idJDT","templateRules","sectionConstructor","isTitleVisible","showSectionTitle","accordionOpen","isMandatory","hsize","sizes","description","error","handleAddSection","disabled","onEditSection","handleEditSectionValue","onRemoveSection","handleRemoveSectionValue","items","map","subItem","subItemIndex","array","buildItemSubFormEditMode","concat","sectionArchetype","parentPath","sectionName","onConsultSection","handleConsultSectionValue","buildItemSubFormConsultMode","data_type","buildSectionSubFormEditMode","Array","isArray","itemAny","itemAnyIndex","buildSingleItemSubFormEditMode","buildSectionSubFormConsultMode","buildSingleItemSubFormConsultMode","SubForm","editMode","handleSubmitSubForm","onCancel","form","initialValues","validationSchema","object","shape","onSubmit","validateOnMount","isSubmitting","onHandleSubmit","onDisabled"],"sources":["C:/Users/ines_/fisiosys/frontend/node_modules/protected-aidaforms/dist/components/SubForm/SubForm.js"],"sourcesContent":["function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\r\n\r\nimport { Formik } from \"formik\";\r\nimport ob from \"object-path\";\r\nimport React, { Component } from \"react\";\r\nimport * as Yup from \"yup\";\r\nimport { handleCardinality } from \"../../assets/functions/HandleCardinality/HandleCardinality\";\r\nimport { handleSectionValidation } from \"../../assets/functions/HandleSectionValidation/handleSectionValidation\";\r\nimport { processItemSection } from \"../../assets/functions/HandleSectionValidation/processItemSection\";\r\nimport { handleSubmit } from \"../../assets/functions/HandleSubmit/handleSubmit\";\r\nimport * as buildDatatypeConsultMode from \"../../containers/Form/BuildItems/BuildItemConsultMode/BuildItemConsultMode/BuildItemConsultMode\";\r\nimport * as buildDatatypeEditMode from \"../../containers/Form/BuildItems/BuildItemEditMode/BuildItemEditMode/BuildItemEditMode\";\r\nimport { buildSectionInitialValue } from '../../containers/Form/FormInitialValues/BuildSectionInitialValue/BuildSectionInitialValue';\r\nimport { buildSectionValidation } from \"../../containers/Form/FormValidation/BuildSectionValidation/BuildSectionValidation\";\r\nimport CombinedContext from \"../../contexts/CombinedContext\";\r\nimport ProviderCombinedContext from \"../../contexts/ProviderCombinedContext\";\r\nimport AddSectionContainer from \"../UI/AddSection/AddSectionContainer\";\r\nimport AddSectionButton from \"../UI/AddSectionButton/AddSectionButton\";\r\nimport SectionContainer from \"../UI/SectionContainer/SectionContainer\";\r\nimport SectionsListConsultMode from \"./SectionsListConsultMode\";\r\nimport SectionsListEditMode from \"./SectionsListEditMode\";\r\nimport SubFormContainerConsultMode from \"./SubFormContainerConsultMode\";\r\nimport SubFormContainerEditMode from \"./SubFormContainerEditMode\";\r\n\r\nclass SubFormComponent extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n    _defineProperty(this, \"state\", {\r\n      checkValidation: false,\r\n      confirmEditMode: false,\r\n      template: null,\r\n      professionalTasks: [],\r\n      subForm: {\r\n        openSubForm: false,\r\n        sectionId: \"\",\r\n        type: \"\",\r\n        path: \"\",\r\n        jdt: \"\",\r\n        setFieldValue: \"\"\r\n      },\r\n      level: 0\r\n    });\r\n\r\n    _defineProperty(this, \"handleSubmit\", values => {\r\n      let jsonValues = handleSubmit(this.state.template, values);\r\n      this.multipleSections.forEach(function (section) {\r\n        const path = section.path.split('-').join('.') + \".value\";\r\n        jsonValues[path] = section.values;\r\n      });\r\n      this.props.onSubmitSubForm(jsonValues);\r\n    });\r\n\r\n    _defineProperty(this, \"handleAddSection\", (pathArray, setFieldValue, setFieldTouched) => {\r\n      const section = this.multipleSections.filter(obj => obj.path === pathArray.join('-'))[0];\r\n      this.setState(prevState => ({ ...prevState,\r\n        subForm: { ...prevState.subForm,\r\n          openSubForm: true,\r\n          jdt: section.jdt,\r\n          path: section.path,\r\n          type: \"new\",\r\n          sectionId: \"\",\r\n          setFieldValue: setFieldValue\r\n        }\r\n      }));\r\n      setFieldTouched(pathArray.join('-'));\r\n    });\r\n\r\n    _defineProperty(this, \"handleEditSectionValue\", (sectionPath, id) => {\r\n      const section = this.multipleSections.filter(obj => obj.path === sectionPath)[0];\r\n      const sectionValues = section.values.filter(obj => obj.id === id)[0].values;\r\n      let mergedJSON = JSON.parse(JSON.stringify(section.jdt));\r\n      Object.keys(sectionValues).forEach(function (label) {\r\n        const indexRemove = sectionPath.split('-').length;\r\n        const jdtLabel = label.split('.').slice(indexRemove);\r\n        ob.set(mergedJSON, jdtLabel, sectionValues[label]);\r\n      });\r\n      this.setState(prevState => ({ ...prevState,\r\n        subForm: { ...prevState.subForm,\r\n          openSubForm: true,\r\n          jdt: mergedJSON,\r\n          path: section.path,\r\n          type: \"edit\",\r\n          sectionId: id\r\n        }\r\n      }));\r\n    });\r\n\r\n    _defineProperty(this, \"handleRemoveSectionValue\", (sectionPath, id, setFieldValue) => {\r\n      this.context.fields.updateValue(`${sectionPath}-value`);\r\n      this.multipleSections.forEach(function (obj) {\r\n        if (obj.path === sectionPath) {\r\n          const occurrence = obj.occurrences;\r\n          const valuesSections = obj.values.filter(obj => obj.id !== id);\r\n          obj.occurrences = occurrence - 1;\r\n          obj.values = valuesSections;\r\n          setFieldValue(sectionPath, occurrence - 1);\r\n        }\r\n      });\r\n      this.forceUpdate();\r\n    });\r\n\r\n    _defineProperty(this, \"handleSubmitSubForm\", (values, path, type, sectionId, setFieldValue = null) => {\r\n      this.context.fields.updateValue(`${path}-value`);\r\n\r\n      if (type === \"new\") {\r\n        this.multipleSections.forEach(function (obj) {\r\n          if (obj.path === path) {\r\n            const occurrence = obj.occurrences;\r\n            const valuesSections = obj.values;\r\n            let maxId = 0;\r\n            valuesSections.forEach(function (val) {\r\n              if (val.id >= maxId) {\r\n                maxId = val.id;\r\n              }\r\n            });\r\n            obj.occurrences = occurrence + 1;\r\n            obj.values = [...valuesSections, {\r\n              id: maxId + 1,\r\n              values: values\r\n            }];\r\n            setFieldValue(path, occurrence + 1);\r\n          }\r\n        });\r\n      } else if (type === \"edit\") {\r\n        this.multipleSections.forEach(function (obj) {\r\n          if (obj.path === path) {\r\n            const valuesSections = obj.values.filter(section => section.id !== sectionId);\r\n            obj.values = [...valuesSections, {\r\n              id: sectionId,\r\n              values: values\r\n            }];\r\n          }\r\n        });\r\n      }\r\n\r\n      this.handleCancelSubForm();\r\n    });\r\n\r\n    _defineProperty(this, \"handleCancelSubForm\", () => {\r\n      this.setState(prevState => ({ ...prevState,\r\n        subForm: { ...prevState.subForm,\r\n          openSubForm: false,\r\n          jdt: \"\",\r\n          path: \"\",\r\n          type: \"\",\r\n          sectionId: \"\",\r\n          setFieldValue: \"\"\r\n        }\r\n      }));\r\n    });\r\n\r\n    _defineProperty(this, \"handleConsultSectionValue\", (jdt, values, sectionPath) => {\r\n      let mergedJSON = JSON.parse(JSON.stringify(jdt));\r\n      Object.keys(values).forEach(function (label) {\r\n        const indexRemove = sectionPath.split('-').length;\r\n        const jdtLabel = label.split('.').slice(indexRemove);\r\n        ob.set(mergedJSON, jdtLabel, values[label]);\r\n      });\r\n      this.setState(prevState => ({ ...prevState,\r\n        subForm: { ...prevState.subForm,\r\n          openSubForm: true,\r\n          jdt: mergedJSON,\r\n          path: sectionPath,\r\n          type: \"consult\"\r\n        }\r\n      }));\r\n    });\r\n\r\n    _defineProperty(this, \"buildSingleItemSubFormEditMode\", (item, itemIndex, pathArray, setFieldValue, values, errors, touched, setFieldTouched, isAny, cardinalityObject, sectionNotMandatoryObject, sectionValidation) => {\r\n      const itemSection = processItemSection(pathArray, isAny, sectionNotMandatoryObject);\r\n      return buildDatatypeEditMode.buildItemEditMode(item.dataType, item, itemIndex, pathArray, setFieldValue, values, errors, touched, setFieldTouched, isAny, cardinalityObject, sectionValidation, this.initialValuesSubForm, this.validationSchemaSubForm, itemSection, this.multipleSections, this.state.professionalTasks, this.context.order, this.context.datatypes.datatypes[pathArray.join('.')]);\r\n    });\r\n\r\n    _defineProperty(this, \"buildSingleItemSubFormConsultMode\", (item, itemIndex, isAny = false, pathArray) => {\r\n      return buildDatatypeConsultMode.buildItemConsultMode(item.dataType, item, itemIndex, isAny, this.state.professionalTasks, this.context.order, pathArray);\r\n    });\r\n\r\n    _defineProperty(this, \"buildInitialValueSection\", (occurrences, pathLabel) => {\r\n      buildSectionInitialValue(occurrences, pathLabel, this.initialValuesSubForm);\r\n    });\r\n\r\n    _defineProperty(this, \"buildValidationSection\", (minOccurrences, pathLabel) => {\r\n      buildSectionValidation(minOccurrences, pathLabel, this.validationSchemaSubForm);\r\n    });\r\n\r\n    _defineProperty(this, \"sectionConstructor\", (pathArray, item, cardinalityObject, sectionNotMandatoryObject, sectionValidation) => {\r\n      let path = pathArray.join('-'); // Se a cardinalidade da secção for diferente de 0, há necessidade de ver na validação se o número de campos pedidos é respeitado\r\n\r\n      if (item.cardinality !== undefined && item.cardinality.interval.lowerOccurrences > 0) {\r\n        cardinalityObject[path] = [...handleCardinality(item, pathArray, this.state.professionalTasks), item.node.text, item.cardinality.interval.lowerOccurrences];\r\n      } // Para cada secção vamos ver quais os items existentes para depois verificar se o item é required ou não dependendo da lowerOccurrence da secção\r\n\r\n\r\n      sectionNotMandatoryObject[path] = [...handleSectionValidation(item, pathArray, this.state.professionalTasks), item.node.text, item.occurrences.lowerOccurrences]; // Se a occorrência da secção for diferente de 0, há necessidade de ver na validação de pelo menos um dos campos está preenchido\r\n\r\n      if (item.occurrences.lowerOccurrences !== 0) {\r\n        sectionValidation[path] = [...handleCardinality(item, pathArray, this.state.professionalTasks), item.node.text, 1];\r\n      }\r\n    });\r\n\r\n    _defineProperty(this, \"buildSectionSubFormEditMode\", (item, itemIndex, pathArray, setFieldValue, values, errors, touched, setFieldTouched, cardinalityObject, sectionNotMandatoryObject, sectionValidation) => {\r\n      const section = pathArray.filter(x => x === 'items').length;\r\n\r\n      if (item.occurrences.upperOccurrences !== 1 && pathArray.join('-') !== this.props.path) {\r\n        if (this.multipleSections.filter(obj => obj.path === pathArray.join('-')).length === 0) {\r\n          let sections = this.multipleSections;\r\n          let vals = [];\r\n          let occs = 0;\r\n\r\n          if (item.value) {\r\n            if (item.value.length > 0) {\r\n              vals = item.value;\r\n              occs = item.value.length;\r\n            }\r\n          }\r\n\r\n          sections.push({\r\n            path: pathArray.join('-'),\r\n            jdt: item,\r\n            occurrences: occs,\r\n            minOccurrences: item.occurrences.lowerOccurrences,\r\n            values: vals\r\n          });\r\n          this.multipleSections = sections;\r\n          this.buildInitialValueSection(occs, pathArray.join('-'));\r\n          this.buildValidationSection(item.occurrences.lowerOccurrences, pathArray.join('-'));\r\n        }\r\n\r\n        return /*#__PURE__*/React.createElement(SectionContainer, {\r\n          item: item,\r\n          path: item.itemPath,\r\n          pathArray: pathArray,\r\n          idJDT: this.props.idJDT,\r\n          templateRules: this.props.templateRules,\r\n          professionalTasks: this.state.professionalTasks,\r\n          values: values,\r\n          sectionConstructor: () => this.sectionConstructor(pathArray, item, cardinalityObject, sectionNotMandatoryObject, sectionValidation),\r\n          section: section,\r\n          isTitleVisible: this.context.datatypes.showSectionTitle && Object.keys(this.context.datatypes.showSectionTitle).length > 0 ? this.context.datatypes.showSectionTitle[pathArray.join(\".\")] : true,\r\n          accordionOpen: true,\r\n          subForm: true,\r\n          isMandatory: item.occurrences.lowerOccurrences !== 0,\r\n          order: this.context.order ? this.context.order[pathArray.join('.')] : null,\r\n          hsize: this.context.sizes.sizes ? this.context.sizes.sizes[pathArray.join('.')] : null,\r\n          description: item.node === null ? \"\" : item.node.description,\r\n          key: itemIndex,\r\n          label: item.node.text\r\n        }, /*#__PURE__*/React.createElement(AddSectionButton, {\r\n          error: touched[pathArray.join('-')] && errors[pathArray.join('-')],\r\n          handleAddSection: () => this.handleAddSection(pathArray, setFieldValue, setFieldTouched),\r\n          disabled: item.occurrences.upperOccurrences === '*' ? false : this.multipleSections.filter(obj => obj.path === pathArray.join('-'))[0].occurrences >= item.occurrences.upperOccurrences\r\n        }), /*#__PURE__*/React.createElement(SectionsListEditMode, {\r\n          error: touched[pathArray.join('-')] && errors[pathArray.join('-')],\r\n          onEditSection: (sectionPath, id) => this.handleEditSectionValue(sectionPath, id),\r\n          onRemoveSection: (sectionPath, id) => this.handleRemoveSectionValue(sectionPath, id, setFieldValue),\r\n          sections: this.multipleSections.filter(obj => obj.path === pathArray.join('-'))[0]\r\n        }));\r\n      }\r\n\r\n      return /*#__PURE__*/React.createElement(SectionContainer, {\r\n        item: item,\r\n        path: item.itemPath,\r\n        pathArray: pathArray,\r\n        idJDT: this.props.idJDT,\r\n        templateRules: this.props.templateRules,\r\n        professionalTasks: this.state.professionalTasks,\r\n        values: values,\r\n        sectionConstructor: () => this.sectionConstructor(pathArray, item, cardinalityObject, sectionNotMandatoryObject, sectionValidation),\r\n        section: section,\r\n        isTitleVisible: this.context.datatypes.showSectionTitle && Object.keys(this.context.datatypes.showSectionTitle).length > 0 ? this.context.datatypes.showSectionTitle[pathArray.join(\".\")] : true,\r\n        accordionOpen: true,\r\n        subForm: true,\r\n        isMandatory: item.occurrences.lowerOccurrences !== 0,\r\n        order: this.context.order ? this.context.order[pathArray.join('.')] : null,\r\n        hsize: this.context.sizes.sizes ? this.context.sizes.sizes[pathArray.join('.')] : null,\r\n        cardinality: item.cardinality !== undefined && item.cardinality.interval.lowerOccurrences,\r\n        description: item.node === null ? \"\" : item.node.description,\r\n        key: itemIndex,\r\n        label: item.node.text\r\n      }, item.items.map((subItem, subItemIndex) => {\r\n        let array = [];\r\n        array.push('items', subItemIndex);\r\n        return this.buildItemSubFormEditMode(subItem, subItemIndex, pathArray.concat(array), setFieldValue, values, errors, touched, setFieldTouched, cardinalityObject, sectionNotMandatoryObject, sectionValidation);\r\n      }), Object.keys(this.context.sectionArchetype.sectionArchetype).filter(x => this.context.sectionArchetype.sectionArchetype[x].parentPath === pathArray.join('.')).map(x => {\r\n        return /*#__PURE__*/React.createElement(AddSectionContainer, {\r\n          key: x,\r\n          path: x,\r\n          order: this.context.order ? this.context.order[x] : null,\r\n          label: this.context.sectionArchetype.sectionArchetype[x].sectionName\r\n        });\r\n      }));\r\n    });\r\n\r\n    _defineProperty(this, \"buildSectionSubFormConsultMode\", (item, itemIndex, pathArray) => {\r\n      const section = pathArray.filter(x => x === 'items').length;\r\n\r\n      if (item.occurrences.upperOccurrences !== 1 && pathArray.join('-') !== this.props.path) {\r\n        return /*#__PURE__*/React.createElement(SectionContainer, {\r\n          item: item,\r\n          pathArray: pathArray,\r\n          section: section,\r\n          isTitleVisible: this.context.datatypes.showSectionTitle && Object.keys(this.context.datatypes.showSectionTitle).length > 0 ? this.context.datatypes.showSectionTitle[pathArray.join(\".\")] : true,\r\n          subForm: true,\r\n          accordionOpen: true,\r\n          order: this.context.order ? this.context.order[pathArray.join('.')] : null,\r\n          hsize: this.context.sizes.sizes ? this.context.sizes.sizes[pathArray.join('.')] : null,\r\n          description: item.node === null ? \"\" : item.node.description,\r\n          key: itemIndex,\r\n          professionalTasks: this.state.professionalTasks,\r\n          label: item.node.text\r\n        }, /*#__PURE__*/React.createElement(SectionsListConsultMode, {\r\n          sectionPath: pathArray.join('-'),\r\n          sections: item.value,\r\n          jdt: item,\r\n          onConsultSection: this.handleConsultSectionValue\r\n        }));\r\n      }\r\n\r\n      return /*#__PURE__*/React.createElement(SectionContainer, {\r\n        item: item,\r\n        pathArray: pathArray,\r\n        section: section,\r\n        isTitleVisible: this.context.datatypes.showSectionTitle && Object.keys(this.context.datatypes.showSectionTitle).length > 0 ? this.context.datatypes.showSectionTitle[pathArray.join(\".\")] : true,\r\n        subForm: true,\r\n        accordionOpen: true,\r\n        order: this.context.order ? this.context.order[pathArray.join('.')] : null,\r\n        hsize: this.context.sizes.sizes ? this.context.sizes.sizes[pathArray.join('.')] : null,\r\n        description: item.node === null ? \"\" : item.node.description,\r\n        key: itemIndex,\r\n        professionalTasks: this.state.professionalTasks,\r\n        label: item.node.text\r\n      }, item.items.map((subItem, subItemIndex) => {\r\n        let array = [];\r\n        array.push('items', subItemIndex);\r\n        return this.buildItemSubFormConsultMode(subItem, subItemIndex, pathArray.concat(array));\r\n      }), Object.keys(this.context.sectionArchetype.sectionArchetype).filter(x => this.context.sectionArchetype.sectionArchetype[x].parentPath === pathArray.join('.')).map(x => {\r\n        return /*#__PURE__*/React.createElement(AddSectionContainer, {\r\n          key: x,\r\n          path: x,\r\n          order: this.context.order ? this.context.order[x] : null,\r\n          label: this.context.sectionArchetype.sectionArchetype[x].sectionName\r\n        });\r\n      }));\r\n    });\r\n\r\n    _defineProperty(this, \"buildItemSubFormEditMode\", (item, itemIndex, pathArray, setFieldValue, values, errors, touched, setFieldTouched, cardinalityObject, sectionNotMandatoryObject, sectionValidation) => {\r\n      if (item.data_type === 'Title') {\r\n        return this.buildSectionSubFormEditMode(item, itemIndex, pathArray, setFieldValue, values, errors, touched, setFieldTouched, cardinalityObject, sectionNotMandatoryObject, sectionValidation);\r\n      } else {\r\n        if (Array.isArray(item)) {\r\n          return item.map((itemAny, itemAnyIndex) => {\r\n            let array = [];\r\n            array.push(itemAnyIndex);\r\n            return this.buildSingleItemSubFormEditMode(itemAny, itemAnyIndex, pathArray.concat(array), setFieldValue, values, errors, touched, setFieldTouched, true, cardinalityObject, sectionNotMandatoryObject, sectionValidation);\r\n          });\r\n        } else {\r\n          return this.buildSingleItemSubFormEditMode(item, itemIndex, pathArray, setFieldValue, values, errors, touched, setFieldTouched, false, cardinalityObject, sectionNotMandatoryObject, sectionValidation);\r\n        }\r\n      }\r\n    });\r\n\r\n    _defineProperty(this, \"buildItemSubFormConsultMode\", (item, itemIndex, pathArray) => {\r\n      if (item.data_type === 'Title') {\r\n        return this.buildSectionSubFormConsultMode(item, itemIndex, pathArray);\r\n      } else {\r\n        if (Array.isArray(item)) {\r\n          return item.map((itemAny, itemAnyIndex) => {\r\n            let array = [];\r\n            array.push(itemAnyIndex);\r\n            return this.buildSingleItemSubFormConsultMode(itemAny, itemAnyIndex, true, pathArray.concat(array));\r\n          });\r\n        } else {\r\n          return this.buildSingleItemSubFormConsultMode(item, itemIndex, false, pathArray);\r\n        }\r\n      }\r\n    });\r\n\r\n    _defineProperty(this, \"openSubForm\", () => {\r\n      return /*#__PURE__*/React.createElement(SubForm, {\r\n        level: this.state.subForm.path.split('-').filter(x => x === 'items').length,\r\n        template: this.state.template,\r\n        professionalTasks: this.state.professionalTasks,\r\n        editMode: this.props.editMode,\r\n        path: this.state.subForm.path,\r\n        onSubmitSubForm: values => this.handleSubmitSubForm(values, this.state.subForm.path, this.state.subForm.type, this.state.subForm.sectionId, this.state.subForm.setFieldValue),\r\n        onCancel: () => this.handleCancelSubForm(),\r\n        jdt: this.state.subForm.jdt\r\n      });\r\n    });\r\n\r\n    this.initialValuesSubForm = {};\r\n    this.validationSchemaSubForm = {};\r\n    this.multipleSections = [];\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.editMode && !this.state.confirmEditMode) {\r\n      this.setState(prevState => ({ ...prevState,\r\n        confirmEditMode: !prevState.confirmEditMode\r\n      }));\r\n    }\r\n\r\n    this.setState({\r\n      template: this.props.template,\r\n      professionalTasks: this.props.professionalTasks,\r\n      level: this.props.level\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let form = null;\r\n\r\n    if (this.props.editMode) {\r\n      form = /*#__PURE__*/React.createElement(Formik, {\r\n        initialValues: this.initialValuesSubForm,\r\n        validationSchema: Yup.object().shape(this.validationSchemaSubForm),\r\n        onSubmit: values => this.handleSubmit(values),\r\n        validateOnMount: true // REVER\r\n\r\n      }, ({\r\n        values,\r\n        handleSubmit,\r\n        setFieldValue,\r\n        errors,\r\n        touched,\r\n        setFieldTouched,\r\n        isSubmitting\r\n      }) => /*#__PURE__*/React.createElement(SubFormContainerEditMode, {\r\n        level: this.state.level,\r\n        onCancel: this.props.onCancel,\r\n        onHandleSubmit: () => this.setState(prevState => ({ // REVER\r\n          ...prevState,\r\n          checkValidation: !prevState.checkValidation\r\n        }), handleSubmit),\r\n        onDisabled: isSubmitting\r\n      }, this.buildItemSubFormEditMode(this.props.jdt, this.props.path.split(\"-\")[this.props.path.split(\"-\").length - 1], this.props.path.split(\"-\"), setFieldValue, values, errors, touched, setFieldTouched, {}, {}, {})));\r\n    } else {\r\n      form = /*#__PURE__*/React.createElement(SubFormContainerConsultMode, {\r\n        level: this.state.level,\r\n        onCancel: this.props.onCancel\r\n      }, this.buildItemSubFormConsultMode(this.props.jdt, this.props.path.split(\"-\")[this.props.path.split(\"-\").length - 1], this.props.path.split(\"-\")));\r\n    }\r\n\r\n    return /*#__PURE__*/React.createElement(\"div\", null, this.state.subForm.openSubForm && this.openSubForm(), form);\r\n  }\r\n\r\n}\r\n\r\n_defineProperty(SubFormComponent, \"contextType\", CombinedContext);\r\n\r\nconst SubForm = props => {\r\n  return /*#__PURE__*/React.createElement(ProviderCombinedContext, null, /*#__PURE__*/React.createElement(SubFormComponent, props));\r\n};\r\n\r\nexport default SubForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}