{"ast":null,"code":"import React, { useContext } from \"react\";\nimport Multimedia from \"../../../../../components/Datatypes/Multimedia/Multimedia\";\nimport { buildValidationEditMode } from \"../../../FormValidation/BuildValidation/BuildValidation\";\nimport { buildInitialValueEditMode } from \"../../../FormInitialValues/BuildInitialValue/BuildInitialValue\";\nimport { handleIsVisible } from \"../../../../../assets/functions/HandleTasks/handleIsVisible\";\nimport { handleIsEditable } from \"../../../../../assets/functions/HandleTasks/handleIsEditable\";\nimport { handleRules } from \"../../../../../assets/functions/HandleRules/handleRules\";\nimport { firstAnyItem } from \"../../../../../assets/functions/FirstAnyItem/FirstAnyItem\";\nimport CombinedContext from \"../../../../../contexts/CombinedContext\";\nimport { getParent } from \"../../../../../assets/functions/GetParentItem/getParent\";\nconst BuildMultimediaEditMode = (item, itemIndex, pathArray, setFieldValue, values, errors, touched, setFieldTouched, isAny, cardinalityObject, sectionValidation, initialValues, validationSchema, itemSection, multipleSections, professionalTasks, order, templateRules, idJDT, idComposition, userInfo) => {\n  const context = useContext(CombinedContext);\n  let isVisible;\n  if (!item.TaskVisible) {\n    isVisible = false;\n  } else {\n    isVisible = handleIsVisible(item, professionalTasks);\n  }\n  let isEditable;\n  if (!item.TaskEditable) {\n    isEditable = false;\n  } else {\n    isEditable = handleIsEditable(item, professionalTasks);\n  }\n  const isRM = pathArray[0] === \"rm\";\n  const parentSection = isRM ? getParent(item.parentPath.split(\".\"), context.composition.template) : getParent(pathArray, context.composition.template);\n  const parentSectionVisibility = parentSection === \"parentless\" ? true : parentSection.TaskVisible.indexOf(\"All\") > -1 ? true : false;\n  if (isVisible || item.value !== null) {\n    const label = isRM ? item.itemName : item.node === null ? item.text : item.node.text;\n    let array = [];\n    array.push(\"value\");\n    const pathLabel = pathArray.concat(array).join(\"-\");\n    buildInitialValueEditMode(item, pathLabel, initialValues);\n    let ruleVisibility;\n    if (!item.ruleVisibility) {\n      ruleVisibility = true;\n    } else {\n      ruleVisibility = handleRules(item, values, \"visibility\");\n    }\n    if (isEditable && parentSectionVisibility) {\n      buildValidationEditMode(item, pathLabel, cardinalityObject, validationSchema, itemSection, sectionValidation, multipleSections, context.datatypes.fileMaxSize[pathArray.join(\".\")]);\n    }\n    if (isVisible && ruleVisibility) {\n      if (isEditable) {\n        const ruleMandatory = handleRules(item, values, \"mandatory\");\n        return /*#__PURE__*/React.createElement(Multimedia, {\n          key: itemIndex,\n          showLabel: !isAny || (order ? firstAnyItem(order, pathArray, isAny) : itemIndex === 0),\n          editMode: true,\n          value: values[pathLabel],\n          onMultimediaChange: setFieldValue,\n          label: label,\n          path: pathArray.join(\".\"),\n          pathLabel: pathLabel,\n          error: touched[pathLabel] && errors[pathLabel],\n          onTouch: setFieldTouched,\n          sectionOccurrence: itemSection[itemSection.length - 1],\n          optional: item.occurrences.lowerOccurrences === 0,\n          optionalMandatory: !ruleMandatory,\n          description: isRM ? item.description : item.node === null ? \"\" : item.node.description,\n          order: order ? order[pathArray.join(\".\")] : null,\n          idComposition: idComposition,\n          userInfo: userInfo\n        });\n      } else {\n        return /*#__PURE__*/React.createElement(Multimedia, {\n          key: itemIndex,\n          showLabel: !isAny || (order ? firstAnyItem(order, pathArray, isAny) : itemIndex === 0),\n          editMode: false,\n          path: pathArray.join(\".\"),\n          value: values[pathLabel],\n          label: label,\n          description: isRM ? item.description : item.node === null ? \"\" : item.node.description,\n          order: order ? order[pathArray.join(\".\")] : null,\n          idComposition: idComposition\n        });\n      }\n    }\n  }\n};\nexport default BuildMultimediaEditMode;","map":{"version":3,"names":["React","useContext","Multimedia","buildValidationEditMode","buildInitialValueEditMode","handleIsVisible","handleIsEditable","handleRules","firstAnyItem","CombinedContext","getParent","BuildMultimediaEditMode","item","itemIndex","pathArray","setFieldValue","values","errors","touched","setFieldTouched","isAny","cardinalityObject","sectionValidation","initialValues","validationSchema","itemSection","multipleSections","professionalTasks","order","templateRules","idJDT","idComposition","userInfo","context","isVisible","TaskVisible","isEditable","TaskEditable","isRM","parentSection","parentPath","split","composition","template","parentSectionVisibility","indexOf","value","label","itemName","node","text","array","push","pathLabel","concat","join","ruleVisibility","datatypes","fileMaxSize","ruleMandatory","createElement","key","showLabel","editMode","onMultimediaChange","path","error","onTouch","sectionOccurrence","length","optional","occurrences","lowerOccurrences","optionalMandatory","description"],"sources":["C:/Users/ines_/fisiosys/frontend/node_modules/protected-aidaforms/dist/containers/Form/BuildItems/BuildItemEditMode/BuildMultimedia/BuildMultimedia.js"],"sourcesContent":["import React, { useContext } from \"react\";\nimport Multimedia from \"../../../../../components/Datatypes/Multimedia/Multimedia\";\nimport { buildValidationEditMode } from \"../../../FormValidation/BuildValidation/BuildValidation\";\nimport { buildInitialValueEditMode } from \"../../../FormInitialValues/BuildInitialValue/BuildInitialValue\";\nimport { handleIsVisible } from \"../../../../../assets/functions/HandleTasks/handleIsVisible\";\nimport { handleIsEditable } from \"../../../../../assets/functions/HandleTasks/handleIsEditable\";\nimport { handleRules } from \"../../../../../assets/functions/HandleRules/handleRules\";\nimport { firstAnyItem } from \"../../../../../assets/functions/FirstAnyItem/FirstAnyItem\";\nimport CombinedContext from \"../../../../../contexts/CombinedContext\";\nimport { getParent } from \"../../../../../assets/functions/GetParentItem/getParent\";\n\nconst BuildMultimediaEditMode = (item, itemIndex, pathArray, setFieldValue, values, errors, touched, setFieldTouched, isAny, cardinalityObject, sectionValidation, initialValues, validationSchema, itemSection, multipleSections, professionalTasks, order, templateRules, idJDT, idComposition, userInfo) => {\n  const context = useContext(CombinedContext);\n  let isVisible;\n\n  if (!item.TaskVisible) {\n    isVisible = false;\n  } else {\n    isVisible = handleIsVisible(item, professionalTasks);\n  }\n\n  let isEditable;\n\n  if (!item.TaskEditable) {\n    isEditable = false;\n  } else {\n    isEditable = handleIsEditable(item, professionalTasks);\n  }\n\n  const isRM = pathArray[0] === \"rm\";\n  const parentSection = isRM ? getParent(item.parentPath.split(\".\"), context.composition.template) : getParent(pathArray, context.composition.template);\n  const parentSectionVisibility = parentSection === \"parentless\" ? true : parentSection.TaskVisible.indexOf(\"All\") > -1 ? true : false;\n\n  if (isVisible || item.value !== null) {\n    const label = isRM ? item.itemName : item.node === null ? item.text : item.node.text;\n    let array = [];\n    array.push(\"value\");\n    const pathLabel = pathArray.concat(array).join(\"-\");\n    buildInitialValueEditMode(item, pathLabel, initialValues);\n    let ruleVisibility;\n\n    if (!item.ruleVisibility) {\n      ruleVisibility = true;\n    } else {\n      ruleVisibility = handleRules(item, values, \"visibility\");\n    }\n\n    if (isEditable && parentSectionVisibility) {\n      buildValidationEditMode(item, pathLabel, cardinalityObject, validationSchema, itemSection, sectionValidation, multipleSections, context.datatypes.fileMaxSize[pathArray.join(\".\")]);\n    }\n\n    if (isVisible && ruleVisibility) {\n      if (isEditable) {\n        const ruleMandatory = handleRules(item, values, \"mandatory\");\n        return /*#__PURE__*/React.createElement(Multimedia, {\n          key: itemIndex,\n          showLabel: !isAny || (order ? firstAnyItem(order, pathArray, isAny) : itemIndex === 0),\n          editMode: true,\n          value: values[pathLabel],\n          onMultimediaChange: setFieldValue,\n          label: label,\n          path: pathArray.join(\".\"),\n          pathLabel: pathLabel,\n          error: touched[pathLabel] && errors[pathLabel],\n          onTouch: setFieldTouched,\n          sectionOccurrence: itemSection[itemSection.length - 1],\n          optional: item.occurrences.lowerOccurrences === 0,\n          optionalMandatory: !ruleMandatory,\n          description: isRM ? item.description : item.node === null ? \"\" : item.node.description,\n          order: order ? order[pathArray.join(\".\")] : null,\n          idComposition: idComposition,\n          userInfo: userInfo\n        });\n      } else {\n        return /*#__PURE__*/React.createElement(Multimedia, {\n          key: itemIndex,\n          showLabel: !isAny || (order ? firstAnyItem(order, pathArray, isAny) : itemIndex === 0),\n          editMode: false,\n          path: pathArray.join(\".\"),\n          value: values[pathLabel],\n          label: label,\n          description: isRM ? item.description : item.node === null ? \"\" : item.node.description,\n          order: order ? order[pathArray.join(\".\")] : null,\n          idComposition: idComposition\n        });\n      }\n    }\n  }\n};\n\nexport default BuildMultimediaEditMode;"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,UAAU,QAAQ,OAAO;AACzC,OAAOC,UAAU,MAAM,2DAA2D;AAClF,SAASC,uBAAuB,QAAQ,yDAAyD;AACjG,SAASC,yBAAyB,QAAQ,gEAAgE;AAC1G,SAASC,eAAe,QAAQ,6DAA6D;AAC7F,SAASC,gBAAgB,QAAQ,8DAA8D;AAC/F,SAASC,WAAW,QAAQ,yDAAyD;AACrF,SAASC,YAAY,QAAQ,2DAA2D;AACxF,OAAOC,eAAe,MAAM,yCAAyC;AACrE,SAASC,SAAS,QAAQ,yDAAyD;AAEnF,MAAMC,uBAAuB,GAAG,CAACC,IAAI,EAAEC,SAAS,EAAEC,SAAS,EAAEC,aAAa,EAAEC,MAAM,EAAEC,MAAM,EAAEC,OAAO,EAAEC,eAAe,EAAEC,KAAK,EAAEC,iBAAiB,EAAEC,iBAAiB,EAAEC,aAAa,EAAEC,gBAAgB,EAAEC,WAAW,EAAEC,gBAAgB,EAAEC,iBAAiB,EAAEC,KAAK,EAAEC,aAAa,EAAEC,KAAK,EAAEC,aAAa,EAAEC,QAAQ,KAAK;EAC7S,MAAMC,OAAO,GAAGhC,UAAU,CAACQ,eAAe,CAAC;EAC3C,IAAIyB,SAAS;EAEb,IAAI,CAACtB,IAAI,CAACuB,WAAW,EAAE;IACrBD,SAAS,GAAG,KAAK;EACnB,CAAC,MAAM;IACLA,SAAS,GAAG7B,eAAe,CAACO,IAAI,EAAEe,iBAAiB,CAAC;EACtD;EAEA,IAAIS,UAAU;EAEd,IAAI,CAACxB,IAAI,CAACyB,YAAY,EAAE;IACtBD,UAAU,GAAG,KAAK;EACpB,CAAC,MAAM;IACLA,UAAU,GAAG9B,gBAAgB,CAACM,IAAI,EAAEe,iBAAiB,CAAC;EACxD;EAEA,MAAMW,IAAI,GAAGxB,SAAS,CAAC,CAAC,CAAC,KAAK,IAAI;EAClC,MAAMyB,aAAa,GAAGD,IAAI,GAAG5B,SAAS,CAACE,IAAI,CAAC4B,UAAU,CAACC,KAAK,CAAC,GAAG,CAAC,EAAER,OAAO,CAACS,WAAW,CAACC,QAAQ,CAAC,GAAGjC,SAAS,CAACI,SAAS,EAAEmB,OAAO,CAACS,WAAW,CAACC,QAAQ,CAAC;EACrJ,MAAMC,uBAAuB,GAAGL,aAAa,KAAK,YAAY,GAAG,IAAI,GAAGA,aAAa,CAACJ,WAAW,CAACU,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,GAAG,KAAK;EAEpI,IAAIX,SAAS,IAAItB,IAAI,CAACkC,KAAK,KAAK,IAAI,EAAE;IACpC,MAAMC,KAAK,GAAGT,IAAI,GAAG1B,IAAI,CAACoC,QAAQ,GAAGpC,IAAI,CAACqC,IAAI,KAAK,IAAI,GAAGrC,IAAI,CAACsC,IAAI,GAAGtC,IAAI,CAACqC,IAAI,CAACC,IAAI;IACpF,IAAIC,KAAK,GAAG,EAAE;IACdA,KAAK,CAACC,IAAI,CAAC,OAAO,CAAC;IACnB,MAAMC,SAAS,GAAGvC,SAAS,CAACwC,MAAM,CAACH,KAAK,CAAC,CAACI,IAAI,CAAC,GAAG,CAAC;IACnDnD,yBAAyB,CAACQ,IAAI,EAAEyC,SAAS,EAAE9B,aAAa,CAAC;IACzD,IAAIiC,cAAc;IAElB,IAAI,CAAC5C,IAAI,CAAC4C,cAAc,EAAE;MACxBA,cAAc,GAAG,IAAI;IACvB,CAAC,MAAM;MACLA,cAAc,GAAGjD,WAAW,CAACK,IAAI,EAAEI,MAAM,EAAE,YAAY,CAAC;IAC1D;IAEA,IAAIoB,UAAU,IAAIQ,uBAAuB,EAAE;MACzCzC,uBAAuB,CAACS,IAAI,EAAEyC,SAAS,EAAEhC,iBAAiB,EAAEG,gBAAgB,EAAEC,WAAW,EAAEH,iBAAiB,EAAEI,gBAAgB,EAAEO,OAAO,CAACwB,SAAS,CAACC,WAAW,CAAC5C,SAAS,CAACyC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;IACrL;IAEA,IAAIrB,SAAS,IAAIsB,cAAc,EAAE;MAC/B,IAAIpB,UAAU,EAAE;QACd,MAAMuB,aAAa,GAAGpD,WAAW,CAACK,IAAI,EAAEI,MAAM,EAAE,WAAW,CAAC;QAC5D,OAAO,aAAahB,KAAK,CAAC4D,aAAa,CAAC1D,UAAU,EAAE;UAClD2D,GAAG,EAAEhD,SAAS;UACdiD,SAAS,EAAE,CAAC1C,KAAK,KAAKQ,KAAK,GAAGpB,YAAY,CAACoB,KAAK,EAAEd,SAAS,EAAEM,KAAK,CAAC,GAAGP,SAAS,KAAK,CAAC,CAAC;UACtFkD,QAAQ,EAAE,IAAI;UACdjB,KAAK,EAAE9B,MAAM,CAACqC,SAAS,CAAC;UACxBW,kBAAkB,EAAEjD,aAAa;UACjCgC,KAAK,EAAEA,KAAK;UACZkB,IAAI,EAAEnD,SAAS,CAACyC,IAAI,CAAC,GAAG,CAAC;UACzBF,SAAS,EAAEA,SAAS;UACpBa,KAAK,EAAEhD,OAAO,CAACmC,SAAS,CAAC,IAAIpC,MAAM,CAACoC,SAAS,CAAC;UAC9Cc,OAAO,EAAEhD,eAAe;UACxBiD,iBAAiB,EAAE3C,WAAW,CAACA,WAAW,CAAC4C,MAAM,GAAG,CAAC,CAAC;UACtDC,QAAQ,EAAE1D,IAAI,CAAC2D,WAAW,CAACC,gBAAgB,KAAK,CAAC;UACjDC,iBAAiB,EAAE,CAACd,aAAa;UACjCe,WAAW,EAAEpC,IAAI,GAAG1B,IAAI,CAAC8D,WAAW,GAAG9D,IAAI,CAACqC,IAAI,KAAK,IAAI,GAAG,EAAE,GAAGrC,IAAI,CAACqC,IAAI,CAACyB,WAAW;UACtF9C,KAAK,EAAEA,KAAK,GAAGA,KAAK,CAACd,SAAS,CAACyC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI;UAChDxB,aAAa,EAAEA,aAAa;UAC5BC,QAAQ,EAAEA;QACZ,CAAC,CAAC;MACJ,CAAC,MAAM;QACL,OAAO,aAAahC,KAAK,CAAC4D,aAAa,CAAC1D,UAAU,EAAE;UAClD2D,GAAG,EAAEhD,SAAS;UACdiD,SAAS,EAAE,CAAC1C,KAAK,KAAKQ,KAAK,GAAGpB,YAAY,CAACoB,KAAK,EAAEd,SAAS,EAAEM,KAAK,CAAC,GAAGP,SAAS,KAAK,CAAC,CAAC;UACtFkD,QAAQ,EAAE,KAAK;UACfE,IAAI,EAAEnD,SAAS,CAACyC,IAAI,CAAC,GAAG,CAAC;UACzBT,KAAK,EAAE9B,MAAM,CAACqC,SAAS,CAAC;UACxBN,KAAK,EAAEA,KAAK;UACZ2B,WAAW,EAAEpC,IAAI,GAAG1B,IAAI,CAAC8D,WAAW,GAAG9D,IAAI,CAACqC,IAAI,KAAK,IAAI,GAAG,EAAE,GAAGrC,IAAI,CAACqC,IAAI,CAACyB,WAAW;UACtF9C,KAAK,EAAEA,KAAK,GAAGA,KAAK,CAACd,SAAS,CAACyC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI;UAChDxB,aAAa,EAAEA;QACjB,CAAC,CAAC;MACJ;IACF;EACF;AACF,CAAC;AAED,eAAepB,uBAAuB"},"metadata":{},"sourceType":"module","externalDependencies":[]}