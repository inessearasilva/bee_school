{"ast":null,"code":"import e, { useRef as n, useState as t, useEffect as o } from \"react\";\nimport i from \"react-loading-skeleton\";\nfunction a(e, n) {\n  void 0 === n && (n = {});\n  var t = n.insertAt;\n  if (e && \"undefined\" != typeof document) {\n    var o = document.head || document.getElementsByTagName(\"head\")[0],\n      i = document.createElement(\"style\");\n    i.type = \"text/css\", \"top\" === t && o.firstChild ? o.insertBefore(i, o.firstChild) : o.appendChild(i), i.styleSheet ? i.styleSheet.cssText = e : i.appendChild(document.createTextNode(e));\n  }\n}\na(\"/* common */\\n.Container {\\n  text-align: left;\\n  background-color: white;\\n  display: flex;\\n  flex-direction: column;\\n  border-radius: 7px;\\n  border: 1px solid #ccc;\\n  color: black;\\n  transition: 0.3s all ease;\\n  height: fit-content; }\\n  .Container:hover {\\n    background-color: #fafafa;\\n    cursor: pointer; }\\n\\n.Secondary {\\n  color: #646464; }\\n\\n.LowerContainer {\\n  padding: 10px; }\\n\\n.Title {\\n  margin-top: 0;\\n  margin-bottom: 10px; }\\n\\n.Image {\\n  width: 100%;\\n  border-top-left-radius: 7px;\\n  border-top-right-radius: 7px;\\n  background-size: cover;\\n  background-repeat: no-repeat;\\n  background-position: center;\\n  height: 30vh; }\\n\\n.SiteDetails {\\n  margin-top: 10px; }\\n\\n/* sm */\\n@media (max-width: 640px) {\\n  .Description {\\n    display: none; } }\\n\\n/* md */\\n@media (min-width: 641px) and (max-width: 768px) {\\n  .Description {\\n    display: none; } }\\n\");\na(\".skeleton-container {\\n  border-radius: 7px;\\n  border: 1px solid #eee; }\\n\\n.skeleton-lower-container {\\n  padding: 10px; }\\n\");\na(\"@keyframes react-loading-skeleton {\\n    100% {\\n        transform: translateX(100%);\\n    }\\n}\\n\\n.react-loading-skeleton {\\n    --base-color: #ebebeb;\\n    --highlight-color: #f5f5f5;\\n    --animation-duration: 1.5s;\\n    --animation-direction: normal;\\n    --pseudo-element-display: block; /* Enable animation */\\n\\n    background-color: var(--base-color);\\n\\n    width: 100%;\\n    border-radius: 0.25rem;\\n    display: inline-flex;\\n    line-height: 1;\\n\\n    position: relative;\\n    overflow: hidden;\\n    z-index: 1; /* Necessary for overflow: hidden to work correctly in Safari */\\n}\\n\\n.react-loading-skeleton::after {\\n    content: ' ';\\n    display: var(--pseudo-element-display);\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    height: 100%;\\n    background-repeat: no-repeat;\\n    background-image: linear-gradient(\\n        90deg,\\n        var(--base-color),\\n        var(--highlight-color),\\n        var(--base-color)\\n    );\\n    transform: translateX(-100%);\\n\\n    animation-name: react-loading-skeleton;\\n    animation-direction: var(--animation-direction);\\n    animation-duration: var(--animation-duration);\\n    animation-timing-function: ease-in-out;\\n    animation-iteration-count: infinite;\\n}\\n\");\nvar r = function (n) {\n    var t = n.width,\n      o = void 0 === t ? \"100%\" : t,\n      a = n.imageHeight,\n      r = void 0 === a ? \"30vh\" : a,\n      l = n.margin;\n    return e.createElement(\"div\", {\n      className: \"skeleton-container\",\n      style: {\n        width: o,\n        margin: l\n      }\n    }, e.createElement(i, {\n      width: o,\n      height: r\n    }), e.createElement(\"div\", {\n      className: \"skeleton-lower-container\"\n    }, e.createElement(i, {\n      count: 3\n    })));\n  },\n  l = \"https://i.imgur.com/UeDNBNQ.jpeg\";\nvar d = function (i) {\n  var a = i.url,\n    l = i.className,\n    d = void 0 === l ? \"\" : l,\n    c = i.width,\n    s = i.height,\n    m = i.descriptionLength,\n    u = i.borderRadius,\n    g = i.imageHeight,\n    h = i.textAlign,\n    p = i.margin,\n    f = i.fallback,\n    v = void 0 === f ? null : f,\n    b = i.backgroundColor,\n    k = void 0 === b ? \"white\" : b,\n    x = i.primaryTextColor,\n    y = void 0 === x ? \"black\" : x,\n    w = i.secondaryTextColor,\n    N = void 0 === w ? \"rgb(100, 100, 100)\" : w,\n    E = i.borderColor,\n    C = void 0 === E ? \"#ccc\" : E,\n    S = i.showLoader,\n    T = void 0 === S || S,\n    I = i.customLoader,\n    L = void 0 === I ? null : I,\n    D = i.openInNewTab,\n    R = void 0 === D || D,\n    B = i.fetcher,\n    U = i.fallbackImageSrc,\n    j = void 0 === U ? \"https://i.imgur.com/UeDNBNQ.jpeg\" : U,\n    A = i.explicitImageSrc,\n    H = void 0 === A ? null : A,\n    z = i.showPlaceholderIfNoImage,\n    F = void 0 === z || z,\n    Q = i.onSuccess,\n    X = void 0 === Q ? function (e) {} : Q,\n    _ = n(!0),\n    P = t(),\n    W = P[0],\n    q = P[1],\n    G = t(!0),\n    J = G[0],\n    K = G[1];\n  if (o(function () {\n    return _.current = !0, K(!0), B ? B(a).then(function (e) {\n      var n;\n      _.current && (!function (e) {\n        return !!e && null !== e.title && null !== e.description && null !== e.image && null !== e.siteName && null !== e.hostname && void 0 !== e.title && void 0 !== e.description && void 0 !== e.image && void 0 !== e.siteName && void 0 !== e.hostname && \"null\" !== e.image && !e.image.startsWith(\"/\");\n      }(e) ? (n = null, q(null)) : (n = e, q(e)), X(n), K(!1));\n    }).catch(function (e) {\n      console.error(e), console.error(\"No metadata could be found for the given URL.\"), _.current && (X(null), q(null), K(!1));\n    }) : fetch(\"https://rlp-proxy.herokuapp.com/v2?url=\" + a).then(function (e) {\n      return e.json();\n    }).then(function (e) {\n      _.current && (q(e.metadata), X(e.metadata), K(!1));\n    }).catch(function (e) {\n      console.error(e), console.error(\"No metadata could be found for the given URL.\"), _.current && (X(null), q(null), K(!1));\n    }), function () {\n      _.current = !1;\n    };\n  }, [a, B]), J && T) return L ? e.createElement(e.Fragment, null, L) : e.createElement(r, {\n    width: c,\n    imageHeight: g,\n    margin: p\n  });\n  if (!W) return e.createElement(e.Fragment, null, v);\n  var M = W.image,\n    O = W.description,\n    V = W.title,\n    Y = W.siteName,\n    Z = W.hostname;\n  return e.createElement(\"div\", {\n    \"data-testid\": \"container\",\n    onClick: function () {\n      var e = R ? \"_blank\" : \"_self\";\n      window.open(a, e);\n    },\n    className: \"Container \" + d,\n    style: {\n      width: c,\n      height: s,\n      borderRadius: u,\n      textAlign: h,\n      margin: p,\n      backgroundColor: k,\n      borderColor: C\n    }\n  }, (M || j) && F && e.createElement(\"div\", {\n    \"data-testid\": \"image-container\",\n    style: {\n      borderTopLeftRadius: u,\n      borderTopRightRadius: u,\n      backgroundImage: \"url(\" + (H || M || j) + \"), url(\" + j + \")\",\n      height: g\n    },\n    className: \"Image\"\n  }), e.createElement(\"div\", {\n    className: \"LowerContainer\"\n  }, e.createElement(\"h3\", {\n    \"data-testid\": \"title\",\n    className: \"Title\",\n    style: {\n      color: y\n    }\n  }, V), O && e.createElement(\"span\", {\n    \"data-testid\": \"desc\",\n    className: \"Description Secondary\",\n    style: {\n      color: N\n    }\n  }, m && O.length > m ? O.slice(0, m) + \"...\" : O), e.createElement(\"div\", {\n    className: \"Secondary SiteDetails\",\n    style: {\n      color: N\n    }\n  }, Y && e.createElement(\"span\", null, Y, \" • \"), e.createElement(\"span\", null, Z))));\n};\nexport { d as LinkPreview, l as placeholderImg };","map":{"version":3,"mappings":"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","names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","Skeleton","_a","_b","width","_c","imageHeight","margin","React","className","LoadingSkeleton","height","count","placeholderImg","LinkPreview","url","descriptionLength","borderRadius","textAlign","fallback","_d","backgroundColor","_e","primaryTextColor","_f","secondaryTextColor","_g","borderColor","_h","showLoader","_j","customLoader","_k","openInNewTab","fetcher","_l","fallbackImageSrc","_m","explicitImageSrc","_o","showPlaceholderIfNoImage","_p","onSuccess","metadata","_isMounted","useRef","_q","useState","setMetadata","_r","loading","setLoading","useEffect","current","then","res","metadata_1","title","description","image","siteName","hostname","undefined","startsWith","isValidResponse","catch","err","console","error","fetch","json","onClick","browserTarget","window","open","borderTopLeftRadius","borderTopRightRadius","backgroundImage","color","length","slice"],"sources":["C:\\Users\\ines_\\bee_v2\\bee_school\\frontend\\node_modules\\@dhaiwat10\\node_modules\\style-inject\\dist\\style-inject.es.js","C:\\Users\\ines_\\bee_v2\\bee_school\\frontend\\node_modules\\@dhaiwat10\\src\\components\\LinkPreview\\Skeleton.tsx","C:\\Users\\ines_\\bee_v2\\bee_school\\frontend\\node_modules\\@dhaiwat10\\src\\components\\LinkPreview\\LinkPreview.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react';\nimport LoadingSkeleton from 'react-loading-skeleton';\n\nimport './skeleton.scss';\nimport 'react-loading-skeleton/dist/skeleton.css';\n\ninterface SkeletonProps {\n  width?: string | number;\n  imageHeight?: string | number;\n  margin?: string | number;\n}\n\nconst Skeleton: React.FC<SkeletonProps> = ({ width = '100%', imageHeight = '30vh', margin }) => {\n  return (\n    <div className='skeleton-container' style={{ width, margin }}>\n      <LoadingSkeleton width={width} height={imageHeight} />\n      <div className='skeleton-lower-container'>\n        <LoadingSkeleton count={3} />\n      </div>\n    </div>\n  );\n};\n\nexport default Skeleton;\n","import React, { useEffect, useRef, useState } from 'react';\n\nimport './linkPreview.scss';\nimport Skeleton from './Skeleton';\n\nconst proxyLink = 'https://rlp-proxy.herokuapp.com/v2?url=';\nexport const placeholderImg = 'https://i.imgur.com/UeDNBNQ.jpeg';\n\nfunction isValidResponse(res: APIResponse | null): boolean {\n  if (!res) return false;\n\n  return (\n    res.title !== null &&\n    res.description !== null &&\n    res.image !== null &&\n    res.siteName !== null &&\n    res.hostname !== null &&\n    res.title !== undefined &&\n    res.description !== undefined &&\n    res.image !== undefined &&\n    res.siteName !== undefined &&\n    res.hostname !== undefined &&\n    res.image !== 'null' &&\n    !res.image.startsWith('/')\n  );\n}\n\nexport interface LinkPreviewProps {\n  url: string;\n  className?: string;\n  width?: string | number;\n  height?: string | number;\n  descriptionLength?: number;\n  borderRadius?: string | number;\n  imageHeight?: string | number;\n  textAlign?: 'left' | 'right' | 'center';\n  margin?: string | number;\n  fallback?: JSX.Element[] | JSX.Element | null;\n  backgroundColor?: string;\n  primaryTextColor?: string;\n  secondaryTextColor?: string;\n  borderColor?: string;\n  showLoader?: boolean;\n  customLoader?: JSX.Element[] | JSX.Element | null;\n  openInNewTab?: boolean;\n  fetcher?: (url: string) => Promise<APIResponse | null>;\n  fallbackImageSrc?: string;\n  explicitImageSrc?: string;\n  /* Whether the placeholder image is displayed in case no image could be scraped */\n  showPlaceholderIfNoImage?: boolean;\n  onSuccess?: (metadata: APIResponse | null) => void;\n}\n\nexport interface APIResponse {\n  title: string | null;\n  description: string | null;\n  image: string | null;\n  siteName: string | null;\n  hostname: string | null;\n}\n\nexport const LinkPreview: React.FC<LinkPreviewProps> = ({\n  url,\n  className = '',\n  width,\n  height,\n  descriptionLength,\n  borderRadius,\n  imageHeight,\n  textAlign,\n  margin,\n  fallback = null,\n  backgroundColor = 'white',\n  primaryTextColor = 'black',\n  secondaryTextColor = 'rgb(100, 100, 100)',\n  borderColor = '#ccc',\n  showLoader = true,\n  customLoader = null,\n  openInNewTab = true,\n  fetcher,\n  fallbackImageSrc = placeholderImg,\n  explicitImageSrc = null,\n  showPlaceholderIfNoImage = true,\n  onSuccess = (metadata) => {},\n}) => {\n  const _isMounted = useRef(true);\n  const [metadata, setMetadata] = useState<APIResponse | null>();\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    _isMounted.current = true;\n    setLoading(true);\n\n    if (fetcher) {\n      fetcher(url)\n        .then((res) => {\n          if (_isMounted.current) {\n            let metadata;\n            if (isValidResponse(res)) {\n              metadata = res;\n              setMetadata(res);\n            } else {\n              metadata = null;\n              setMetadata(null);\n            }\n            onSuccess(metadata);\n            setLoading(false);\n          }\n        })\n        .catch((err: Error) => {\n          console.error(err);\n          console.error('No metadata could be found for the given URL.');\n          if (_isMounted.current) {\n            onSuccess(null);\n            setMetadata(null);\n            setLoading(false);\n          }\n        });\n    } else {\n      fetch(proxyLink + url)\n        .then((res) => res.json())\n        .then((res) => {\n          if (_isMounted.current) {\n            setMetadata((res.metadata as unknown) as APIResponse);\n            onSuccess(res.metadata);\n            setLoading(false);\n          }\n        })\n        .catch((err: Error) => {\n          console.error(err);\n          console.error('No metadata could be found for the given URL.');\n          if (_isMounted.current) {\n            onSuccess(null);\n            setMetadata(null);\n            setLoading(false);\n          }\n        });\n    }\n\n    return () => {\n      _isMounted.current = false;\n    };\n  }, [url, fetcher]);\n\n  if (loading && showLoader) {\n    if (customLoader) {\n      return <>{customLoader}</>;\n    } else {\n      return <Skeleton width={width} imageHeight={imageHeight} margin={margin} />;\n    }\n  }\n\n  if (!metadata) {\n    return <>{fallback}</>;\n  }\n\n  const { image, description, title, siteName, hostname } = metadata;\n\n  const onClick = () => {\n    const browserTarget = openInNewTab ? '_blank' : '_self';\n    window.open(url, browserTarget);\n  };\n\n  return (\n    <div\n      data-testid='container'\n      onClick={onClick}\n      className={`Container ${className}`}\n      style={{ width, height, borderRadius, textAlign, margin, backgroundColor, borderColor }}\n    >\n      {(image || fallbackImageSrc) && showPlaceholderIfNoImage && (\n        <div\n          data-testid='image-container'\n          style={{\n            borderTopLeftRadius: borderRadius,\n            borderTopRightRadius: borderRadius,\n            backgroundImage: `url(${\n              explicitImageSrc || image || fallbackImageSrc\n            }), url(${fallbackImageSrc})`,\n            height: imageHeight,\n          }}\n          className='Image'\n        ></div>\n      )}\n      <div className='LowerContainer'>\n        <h3 data-testid='title' className='Title' style={{ color: primaryTextColor }}>\n          {title}\n        </h3>\n        {description && (\n          <span\n            data-testid='desc'\n            className='Description Secondary'\n            style={{ color: secondaryTextColor }}\n          >\n            {descriptionLength\n              ? description.length > descriptionLength\n                ? description.slice(0, descriptionLength) + '...'\n                : description\n              : description}\n          </span>\n        )}\n        <div className='Secondary SiteDetails' style={{ color: secondaryTextColor }}>\n          {siteName && <span>{siteName} • </span>}\n          <span>{hostname}</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}