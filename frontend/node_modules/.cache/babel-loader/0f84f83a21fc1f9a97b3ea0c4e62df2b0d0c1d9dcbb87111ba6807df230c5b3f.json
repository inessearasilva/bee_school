{"ast":null,"code":"import _toConsumableArray from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport * as Yup from \"yup\";\nimport { handleIfMandatoryValidation } from \"../../../../assets/functions/HandleRules/handleIfMandatoryValidation\";\nimport { handleConditionValidation } from \"../../../../assets/functions/HandleRules/handleConditionValidation\";\nimport { handleRules } from \"../../../../assets/functions/HandleRules/handleRules\";\nimport { handleRequiredValidation } from \"../../../../assets/functions/HandleSectionValidation/handleRequiredValidation\";\nimport { handleRequiredSection } from \"../../../../assets/functions/HandleSectionValidation/handleRequiredSection\"; // ATENÇÃO: CADA NOVA VALIDAÇÃO DEVE VER SE O CAMPO É VISÍVEL!\n\nvar buildDateTimeRangeValidation = function buildDateTimeRangeValidation(item, pathLabel, cardinalityObject, validationSchema, itemSection, sectionValidation, multipleSections) {\n  var checkMandatory = handleIfMandatoryValidation(item);\n  var pathLabelArray = pathLabel.split(\"-\");\n  var pathArray = _toConsumableArray(pathLabelArray);\n  pathArray.pop();\n  pathArray.pop();\n  if (item.occurrences.lowerOccurrences === 1 && item.occurrences.upperOccurrences === 1) {\n    if (pathLabelArray[pathLabelArray.length - 1] === \"start\" && pathLabelArray[pathLabelArray.length - 2] === \"date\") {\n      validationSchema[pathLabel] = Yup.string().test(\"required\", \"Campo obrigatório\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var passedRequired = handleRequiredValidation(value, this.parent, itemSection);\n        if (passedRequired) {\n          return true;\n        } else {\n          return false;\n        }\n      }).test(\"section-validation\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          var sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      }).test(\"at-least-one\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          var sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      });\n    } else if (pathLabelArray[pathLabelArray.length - 1] === \"end\" && pathLabelArray[pathLabelArray.length - 2] === \"date\") {\n      validationSchema[pathLabel] = Yup.string().test(\"required\", \"Campo obrigatório\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var passedRequired = handleRequiredValidation(value, this.parent, itemSection);\n        if (passedRequired) {\n          return true;\n        } else {\n          return false;\n        }\n      }).test(\"section-validation\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          var sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      }).test(\"at-least-one\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          var sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      });\n    } else if (pathLabelArray[pathLabelArray.length - 1] === \"start\" && pathLabelArray[pathLabelArray.length - 2] === \"time\") {\n      var pathTimeEnd = [].concat(_toConsumableArray(pathArray), [\"time\", \"end\"]);\n      var pathDateEnd = [].concat(_toConsumableArray(pathArray), [\"date\", \"end\"]);\n      var pathDateStart = [].concat(_toConsumableArray(pathArray), [\"date\", \"start\"]);\n      var pathLabelTimeEnd = pathTimeEnd.join(\"-\");\n      var pathLabelDateEnd = pathDateEnd.join(\"-\");\n      var pathLabelDateStart = pathDateStart.join(\"-\");\n      validationSchema[pathLabel] = Yup.string().test(\"required\", \"Campo obrigatório\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var passedRequired = handleRequiredValidation(value, this.parent, itemSection);\n        if (passedRequired) {\n          return true;\n        } else {\n          return false;\n        }\n      }).test(pathLabel + \"inferiorigual\", \"A hora inicial deve ser inferior ou igual à hora final\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var endDate = this.parent[pathLabelDateEnd];\n        var startDate = this.parent[pathLabelDateStart];\n        var endTime;\n        var startTime;\n        if (endDate !== undefined && startDate !== undefined && endDate === startDate) {\n          if (this.parent[pathLabelTimeEnd] !== undefined) {\n            endTime = new Date(endDate.split(\"-\")[0], endDate.split(\"-\")[1], endDate.split(\"-\")[2], this.parent[pathLabelTimeEnd].split(\":\")[0], this.parent[pathLabelTimeEnd].split(\":\")[1]);\n          } else {\n            endTime = new Date(endDate.split(\"-\")[0], endDate.split(\"-\")[1], endDate.split(\"-\")[2]);\n          }\n          if (value !== undefined) {\n            startTime = new Date(startDate.split(\"-\")[0], startDate.split(\"-\")[1], startDate.split(\"-\")[2], value.split(\":\")[0], value.split(\":\")[1]);\n          } else {\n            startTime = new Date(startDate.split(\"-\")[0], startDate.split(\"-\")[1], startDate.split(\"-\")[2]);\n          }\n          if (endTime < startTime) {\n            return false;\n          }\n        }\n        return true;\n      }).test(\"section-validation\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          var sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      }).test(\"at-least-one\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          var sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      });\n    } else if (pathLabelArray[pathLabelArray.length - 1] === \"end\" && pathLabelArray[pathLabelArray.length - 2] === \"time\") {\n      var pathTimeStart = [].concat(_toConsumableArray(pathArray), [\"time\", \"start\"]);\n      var _pathDateEnd = [].concat(_toConsumableArray(pathArray), [\"date\", \"end\"]);\n      var _pathDateStart = [].concat(_toConsumableArray(pathArray), [\"date\", \"start\"]);\n      var pathLabelTimeStart = pathTimeStart.join(\"-\");\n      var _pathLabelDateEnd = _pathDateEnd.join(\"-\");\n      var _pathLabelDateStart = _pathDateStart.join(\"-\");\n      validationSchema[pathLabel] = Yup.string().test(\"required\", \"Campo obrigatório\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var passedRequired = handleRequiredValidation(value, this.parent, itemSection);\n        if (passedRequired) {\n          return true;\n        } else {\n          return false;\n        }\n      }).test(pathLabel + \"superiorigual\", \"A hora final deve ser superior ou igual à hora inicial\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var endDate = this.parent[_pathLabelDateEnd];\n        var startDate = this.parent[_pathLabelDateStart];\n        var endTime;\n        var startTime;\n        if (endDate !== undefined && startDate !== undefined && endDate === startDate) {\n          if (value !== undefined) {\n            endTime = new Date(endDate.split(\"-\")[0], endDate.split(\"-\")[1], endDate.split(\"-\")[2], value.split(\":\")[0], value.split(\":\")[1]);\n          } else {\n            endTime = new Date(endDate.split(\"-\")[0], endDate.split(\"-\")[1], endDate.split(\"-\")[2]);\n          }\n          if (this.parent[pathLabelTimeStart] !== undefined) {\n            startTime = new Date(startDate.split(\"-\")[0], startDate.split(\"-\")[1], startDate.split(\"-\")[2], this.parent[pathLabelTimeStart].split(\":\")[0], this.parent[pathLabelTimeStart].split(\":\")[1]);\n          } else {\n            startTime = new Date(startDate.split(\"-\")[0], startDate.split(\"-\")[1], startDate.split(\"-\")[2]);\n          }\n          if (endTime < startTime) {\n            return false;\n          }\n        }\n        return true;\n      }).test(\"section-validation\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          var sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      }).test(\"at-least-one\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          var sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      });\n    }\n  } else if (item.occurrences.lowerOccurrences === 0 && item.occurrences.upperOccurrences === 1) {\n    if (pathLabelArray[pathLabelArray.length - 1] === \"start\" && pathLabelArray[pathLabelArray.length - 2] === \"date\") {\n      var _pathTimeEnd = [].concat(_toConsumableArray(pathArray), [\"time\", \"end\"]);\n      var _pathDateEnd2 = [].concat(_toConsumableArray(pathArray), [\"date\", \"end\"]);\n      var _pathTimeStart = [].concat(_toConsumableArray(pathArray), [\"time\", \"start\"]);\n      var _pathLabelTimeEnd = _pathTimeEnd.join(\"-\");\n      var _pathLabelDateEnd2 = _pathDateEnd2.join(\"-\");\n      var _pathLabelTimeStart = _pathTimeStart.join(\"-\");\n      validationSchema[pathLabel] = Yup.string().test(pathLabel, \"Campo obrigatório\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var endDate = this.parent[_pathLabelDateEnd2];\n        var endTime = this.parent[_pathLabelTimeEnd];\n        var startTime = this.parent[_pathLabelTimeStart];\n        if ((endTime !== undefined || startTime !== undefined || endDate !== undefined) && value === undefined) {\n          return false;\n        }\n        return true;\n      }).test(\"section-validation\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          var sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      }).test(\"at-least-one\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          var sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      }).test(\"rule-mandatory\", \"Campo obrigatório\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        if (!checkMandatory) {\n          return true;\n        } else {\n          var i;\n          for (i = 0; i < item.ruleMandatory.length; i++) {\n            var rule = item.ruleMandatory[i];\n            var mandatory = void 0;\n            if (rule[\"$or\"]) {\n              mandatory = false;\n              var j = void 0;\n              var conditionsArray = rule[\"$or\"];\n              for (j = 0; j < conditionsArray.length; j++) {\n                var condition = conditionsArray[j];\n                var path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\n                var conditionValidation = handleConditionValidation(condition, this.parent[path]);\n                if (conditionValidation) {\n                  mandatory = true;\n                  break;\n                }\n              }\n            } else if (rule[\"$and\"]) {\n              mandatory = true;\n              var _j = void 0;\n              var _conditionsArray = rule[\"$and\"];\n              for (_j = 0; _j < _conditionsArray.length; _j++) {\n                var _condition = _conditionsArray[_j];\n                var _path = _condition[\"$ItemPath\"].split(\".\").join(\"-\");\n                var _conditionValidation = handleConditionValidation(_condition, this.parent[_path]);\n                if (!_conditionValidation) {\n                  mandatory = false;\n                  break;\n                }\n              }\n            }\n            if (!mandatory) {\n              return true;\n            } else {\n              if (value === \"\" || value === undefined) {\n                return false;\n              } else if (Array.isArray(value)) {\n                if (value.length === 0) {\n                  return false;\n                } else if (value[0].identifierId !== undefined && value.filter(function (obj) {\n                  return obj.value !== \"\";\n                }).length === 0) {\n                  return false;\n                } else if (value[0].textId !== undefined && value.filter(function (obj) {\n                  return obj.value.getCurrentContent().hasText();\n                }).length === 0) {\n                  return false;\n                } else {\n                  return true;\n                }\n              } else if (value._immutable !== undefined) {\n                if (!value.getCurrentContent().hasText()) {\n                  return false;\n                } else {\n                  return true;\n                }\n              } else {\n                return true;\n              }\n            }\n          }\n        }\n      });\n    } else if (pathLabelArray[pathLabelArray.length - 1] === \"end\" && pathLabelArray[pathLabelArray.length - 2] === \"date\") {\n      var _pathTimeEnd2 = [].concat(_toConsumableArray(pathArray), [\"time\", \"end\"]);\n      var _pathDateStart2 = [].concat(_toConsumableArray(pathArray), [\"date\", \"start\"]);\n      var _pathTimeStart2 = [].concat(_toConsumableArray(pathArray), [\"time\", \"start\"]);\n      var _pathLabelTimeEnd2 = _pathTimeEnd2.join(\"-\");\n      var _pathLabelDateStart2 = _pathDateStart2.join(\"-\");\n      var _pathLabelTimeStart2 = _pathTimeStart2.join(\"-\");\n      validationSchema[pathLabel] = Yup.string().test(pathLabel + \"superiorigual\", \"Campo obrigatório\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var startDate = this.parent[_pathLabelDateStart2];\n        var endTime = this.parent[_pathLabelTimeEnd2];\n        var startTime = this.parent[_pathLabelTimeStart2];\n        if ((endTime !== undefined || startTime !== undefined || startDate !== undefined) && value === undefined) {\n          return false;\n        }\n        return true;\n      }).test(\"section-validation\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          var sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      }).test(\"at-least-one\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          var sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      }).test(\"rule-mandatory\", \"Campo obrigatório\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        if (!checkMandatory) {\n          return true;\n        } else {\n          var i;\n          for (i = 0; i < item.ruleMandatory.length; i++) {\n            var rule = item.ruleMandatory[i];\n            var mandatory = void 0;\n            if (rule[\"$or\"]) {\n              mandatory = false;\n              var j = void 0;\n              var conditionsArray = rule[\"$or\"];\n              for (j = 0; j < conditionsArray.length; j++) {\n                var condition = conditionsArray[j];\n                var path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\n                var conditionValidation = handleConditionValidation(condition, this.parent[path]);\n                if (conditionValidation) {\n                  mandatory = true;\n                  break;\n                }\n              }\n            } else if (rule[\"$and\"]) {\n              mandatory = true;\n              var _j2 = void 0;\n              var _conditionsArray2 = rule[\"$and\"];\n              for (_j2 = 0; _j2 < _conditionsArray2.length; _j2++) {\n                var _condition2 = _conditionsArray2[_j2];\n                var _path2 = _condition2[\"$ItemPath\"].split(\".\").join(\"-\");\n                var _conditionValidation2 = handleConditionValidation(_condition2, this.parent[_path2]);\n                if (!_conditionValidation2) {\n                  mandatory = false;\n                  break;\n                }\n              }\n            }\n            if (!mandatory) {\n              return true;\n            } else {\n              if (value === \"\" || value === undefined) {\n                return false;\n              } else if (Array.isArray(value)) {\n                if (value.length === 0) {\n                  return false;\n                } else if (value[0].identifierId !== undefined && value.filter(function (obj) {\n                  return obj.value !== \"\";\n                }).length === 0) {\n                  return false;\n                } else if (value[0].textId !== undefined && value.filter(function (obj) {\n                  return obj.value.getCurrentContent().hasText();\n                }).length === 0) {\n                  return false;\n                } else {\n                  return true;\n                }\n              } else if (value._immutable !== undefined) {\n                if (!value.getCurrentContent().hasText()) {\n                  return false;\n                } else {\n                  return true;\n                }\n              } else {\n                return true;\n              }\n            }\n          }\n        }\n      });\n    } else if (pathLabelArray[pathLabelArray.length - 1] === \"start\" && pathLabelArray[pathLabelArray.length - 2] === \"time\") {\n      var _pathTimeEnd3 = [].concat(_toConsumableArray(pathArray), [\"time\", \"end\"]);\n      var _pathDateEnd3 = [].concat(_toConsumableArray(pathArray), [\"date\", \"end\"]);\n      var _pathDateStart3 = [].concat(_toConsumableArray(pathArray), [\"date\", \"start\"]);\n      var _pathLabelTimeEnd3 = _pathTimeEnd3.join(\"-\");\n      var _pathLabelDateEnd3 = _pathDateEnd3.join(\"-\");\n      var _pathLabelDateStart3 = _pathDateStart3.join(\"-\");\n      validationSchema[pathLabel] = Yup.string().test(pathLabel + \"inferiorigual\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var endDate = this.parent[_pathLabelDateEnd3];\n        var startDate = this.parent[_pathLabelDateStart3];\n        var endTime;\n        var startTime;\n        if (endDate !== undefined && startDate !== undefined && endDate === startDate) {\n          if (this.parent[_pathLabelTimeEnd3] !== undefined) {\n            endTime = new Date(endDate.split(\"-\")[0], endDate.split(\"-\")[1], endDate.split(\"-\")[2], this.parent[_pathLabelTimeEnd3].split(\":\")[0], this.parent[_pathLabelTimeEnd3].split(\":\")[1]);\n          } else {\n            endTime = new Date(endDate.split(\"-\")[0], endDate.split(\"-\")[1], endDate.split(\"-\")[2]);\n          }\n          if (value !== undefined) {\n            startTime = new Date(startDate.split(\"-\")[0], startDate.split(\"-\")[1], startDate.split(\"-\")[2], value.split(\":\")[0], value.split(\":\")[1]);\n          } else {\n            startTime = new Date(startDate.split(\"-\")[0], startDate.split(\"-\")[1], startDate.split(\"-\")[2]);\n          }\n          if (endTime < startTime) {\n            return this.createError({\n              message: \"A hora inicial deve ser inferior ou igual à hora final\"\n            });\n          } else if (isNaN(startTime.getTime())) {\n            return this.createError({\n              message: \"Campo obrigatório\"\n            });\n          } else if (!isNaN(endTime.getTime()) && isNaN(startTime.getTime())) {\n            return this.createError({\n              message: \"Campo obrigatório\"\n            });\n          }\n          return true;\n        } else {\n          if (this.parent[_pathLabelTimeEnd3] !== undefined) {\n            endTime = new Date(2000, 1, 1, this.parent[_pathLabelTimeEnd3].split(\":\")[0], this.parent[_pathLabelTimeEnd3].split(\":\")[1]);\n          } else {\n            endTime = new Date(2000, 1, 1);\n          }\n          if (value !== undefined) {\n            startTime = new Date(2000, 1, 1, value.split(\":\")[0], value.split(\":\")[1]);\n          } else {\n            startTime = new Date(2000, 1, 1);\n          }\n          if (!isNaN(endTime.getTime()) && isNaN(startTime.getTime())) {\n            return this.createError({\n              message: \"Campo obrigatório\"\n            });\n          } else if ((startDate !== undefined || endDate !== undefined || !isNaN(endTime.getTime())) && isNaN(startTime.getTime())) {\n            return this.createError({\n              message: \"Campo obrigatório\"\n            });\n          }\n          return true;\n        }\n      }).test(\"section-validation\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          var sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      }).test(\"at-least-one\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          var sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      }).test(\"rule-mandatory\", \"Campo obrigatório\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        if (!checkMandatory) {\n          return true;\n        } else {\n          var i;\n          for (i = 0; i < item.ruleMandatory.length; i++) {\n            var rule = item.ruleMandatory[i];\n            var mandatory = void 0;\n            if (rule[\"$or\"]) {\n              mandatory = false;\n              var j = void 0;\n              var conditionsArray = rule[\"$or\"];\n              for (j = 0; j < conditionsArray.length; j++) {\n                var condition = conditionsArray[j];\n                var path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\n                var conditionValidation = handleConditionValidation(condition, this.parent[path]);\n                if (conditionValidation) {\n                  mandatory = true;\n                  break;\n                }\n              }\n            } else if (rule[\"$and\"]) {\n              mandatory = true;\n              var _j3 = void 0;\n              var _conditionsArray3 = rule[\"$and\"];\n              for (_j3 = 0; _j3 < _conditionsArray3.length; _j3++) {\n                var _condition3 = _conditionsArray3[_j3];\n                var _path3 = _condition3[\"$ItemPath\"].split(\".\").join(\"-\");\n                var _conditionValidation3 = handleConditionValidation(_condition3, this.parent[_path3]);\n                if (!_conditionValidation3) {\n                  mandatory = false;\n                  break;\n                }\n              }\n            }\n            if (!mandatory) {\n              return true;\n            } else {\n              if (value === \"\" || value === undefined) {\n                return false;\n              } else if (Array.isArray(value)) {\n                if (value.length === 0) {\n                  return false;\n                } else if (value[0].identifierId !== undefined && value.filter(function (obj) {\n                  return obj.value !== \"\";\n                }).length === 0) {\n                  return false;\n                } else if (value[0].textId !== undefined && value.filter(function (obj) {\n                  return obj.value.getCurrentContent().hasText();\n                }).length === 0) {\n                  return false;\n                } else {\n                  return true;\n                }\n              } else if (value._immutable !== undefined) {\n                if (!value.getCurrentContent().hasText()) {\n                  return false;\n                } else {\n                  return true;\n                }\n              } else {\n                return true;\n              }\n            }\n          }\n        }\n      });\n    } else if (pathLabelArray[pathLabelArray.length - 1] === \"end\" && pathLabelArray[pathLabelArray.length - 2] === \"time\") {\n      var _pathTimeStart3 = [].concat(_toConsumableArray(pathArray), [\"time\", \"start\"]);\n      var _pathDateEnd4 = [].concat(_toConsumableArray(pathArray), [\"date\", \"end\"]);\n      var _pathDateStart4 = [].concat(_toConsumableArray(pathArray), [\"date\", \"start\"]);\n      var _pathLabelTimeStart3 = _pathTimeStart3.join(\"-\");\n      var _pathLabelDateEnd4 = _pathDateEnd4.join(\"-\");\n      var _pathLabelDateStart4 = _pathDateStart4.join(\"-\");\n      validationSchema[pathLabel] = Yup.string().test(pathLabel + \"superiorigual\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var endDate = this.parent[_pathLabelDateEnd4];\n        var startDate = this.parent[_pathLabelDateStart4];\n        var endTime;\n        var startTime;\n        if (endDate !== undefined && startDate !== undefined && endDate === startDate) {\n          if (value !== undefined) {\n            endTime = new Date(endDate.split(\"-\")[0], endDate.split(\"-\")[1], endDate.split(\"-\")[2], value.split(\":\")[0], value.split(\":\")[1]);\n          } else {\n            endTime = new Date(endDate.split(\"-\")[0], endDate.split(\"-\")[1], endDate.split(\"-\")[2]);\n          }\n          if (this.parent[_pathLabelTimeStart3] !== undefined) {\n            startTime = new Date(startDate.split(\"-\")[0], startDate.split(\"-\")[1], startDate.split(\"-\")[2], this.parent[_pathLabelTimeStart3].split(\":\")[0], this.parent[_pathLabelTimeStart3].split(\":\")[1]);\n          } else {\n            startTime = new Date(startDate.split(\"-\")[0], startDate.split(\"-\")[1], startDate.split(\"-\")[2]);\n          }\n          if (endTime < startTime) {\n            return this.createError({\n              message: \"A hora final deve ser superior ou igual à hora inicial\"\n            });\n          } else if (isNaN(endTime.getTime())) {\n            return this.createError({\n              message: \"Campo obrigatório\"\n            });\n          } else if (isNaN(endTime.getTime()) && !isNaN(startTime.getTime())) {\n            return this.createError({\n              message: \"Campo obrigatório\"\n            });\n          }\n          return true;\n        } else {\n          if (value !== undefined) {\n            endTime = new Date(2000, 1, 1, value.split(\":\")[0], value.split(\":\")[1]);\n          } else {\n            endTime = new Date(2000, 1, 1);\n          }\n          if (this.parent[_pathLabelTimeStart3] !== undefined) {\n            startTime = new Date(2000, 1, 1, this.parent[_pathLabelTimeStart3].split(\":\")[0], this.parent[_pathLabelTimeStart3].split(\":\")[1]);\n          } else {\n            startTime = new Date(2000, 1, 1);\n          }\n          if (isNaN(endTime.getTime()) && !isNaN(startTime.getTime())) {\n            return this.createError({\n              message: \"Campo obrigatório\"\n            });\n          } else if ((startDate !== undefined || endDate !== undefined || !isNaN(startTime.getTime())) && isNaN(endTime.getTime())) {\n            return this.createError({\n              message: \"Campo obrigatório\"\n            });\n          }\n          return true;\n        }\n      }).test(\"section-validation\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          var sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      }).test(\"at-least-one\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        var res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          var sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      }).test(\"rule-mandatory\", \"Campo obrigatório\", function (value) {\n        var isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        if (!checkMandatory) {\n          return true;\n        } else {\n          var i;\n          for (i = 0; i < item.ruleMandatory.length; i++) {\n            var rule = item.ruleMandatory[i];\n            var mandatory = void 0;\n            if (rule[\"$or\"]) {\n              mandatory = false;\n              var j = void 0;\n              var conditionsArray = rule[\"$or\"];\n              for (j = 0; j < conditionsArray.length; j++) {\n                var condition = conditionsArray[j];\n                var path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\n                var conditionValidation = handleConditionValidation(condition, this.parent[path]);\n                if (conditionValidation) {\n                  mandatory = true;\n                  break;\n                }\n              }\n            } else if (rule[\"$and\"]) {\n              mandatory = true;\n              var _j4 = void 0;\n              var _conditionsArray4 = rule[\"$and\"];\n              for (_j4 = 0; _j4 < _conditionsArray4.length; _j4++) {\n                var _condition4 = _conditionsArray4[_j4];\n                var _path4 = _condition4[\"$ItemPath\"].split(\".\").join(\"-\");\n                var _conditionValidation4 = handleConditionValidation(_condition4, this.parent[_path4]);\n                if (!_conditionValidation4) {\n                  mandatory = false;\n                  break;\n                }\n              }\n            }\n            if (!mandatory) {\n              return true;\n            } else {\n              if (value === \"\" || value === undefined) {\n                return false;\n              } else if (Array.isArray(value)) {\n                if (value.length === 0) {\n                  return false;\n                } else if (value[0].identifierId !== undefined && value.filter(function (obj) {\n                  return obj.value !== \"\";\n                }).length === 0) {\n                  return false;\n                } else if (value[0].textId !== undefined && value.filter(function (obj) {\n                  return obj.value.getCurrentContent().hasText();\n                }).length === 0) {\n                  return false;\n                } else {\n                  return true;\n                }\n              } else if (value._immutable !== undefined) {\n                if (!value.getCurrentContent().hasText()) {\n                  return false;\n                } else {\n                  return true;\n                }\n              } else {\n                return true;\n              }\n            }\n          }\n        }\n      });\n    }\n  }\n};\nexport { buildDateTimeRangeValidation };","map":{"version":3,"names":["Yup","handleIfMandatoryValidation","handleConditionValidation","handleRules","handleRequiredValidation","handleRequiredSection","buildDateTimeRangeValidation","item","pathLabel","cardinalityObject","validationSchema","itemSection","sectionValidation","multipleSections","checkMandatory","pathLabelArray","split","pathArray","pop","occurrences","lowerOccurrences","upperOccurrences","length","string","test","value","isVisible","parent","passedRequired","res","sectionsError","createError","message","toString","toLocaleLowerCase","pathTimeEnd","pathDateEnd","pathDateStart","pathLabelTimeEnd","join","pathLabelDateEnd","pathLabelDateStart","endDate","startDate","endTime","startTime","undefined","Date","pathTimeStart","pathLabelTimeStart","i","ruleMandatory","rule","mandatory","j","conditionsArray","condition","path","conditionValidation","Array","isArray","identifierId","filter","obj","textId","getCurrentContent","hasText","_immutable","isNaN","getTime"],"sources":["C:/Users/ines_/fisiosys/frontend/node_modules/protected-aidaforms/dist/containers/Form/FormValidation/BuildDateTimeRangeValidation/BuildDateTimeRangeValidation.js"],"sourcesContent":["import * as Yup from \"yup\";\r\nimport { handleIfMandatoryValidation } from \"../../../../assets/functions/HandleRules/handleIfMandatoryValidation\";\r\nimport { handleConditionValidation } from \"../../../../assets/functions/HandleRules/handleConditionValidation\";\r\nimport { handleRules } from \"../../../../assets/functions/HandleRules/handleRules\";\r\nimport { handleRequiredValidation } from \"../../../../assets/functions/HandleSectionValidation/handleRequiredValidation\";\r\nimport { handleRequiredSection } from \"../../../../assets/functions/HandleSectionValidation/handleRequiredSection\"; // ATENÇÃO: CADA NOVA VALIDAÇÃO DEVE VER SE O CAMPO É VISÍVEL!\r\n\r\nconst buildDateTimeRangeValidation = (item, pathLabel, cardinalityObject, validationSchema, itemSection, sectionValidation, multipleSections) => {\r\n  const checkMandatory = handleIfMandatoryValidation(item);\r\n  let pathLabelArray = pathLabel.split(\"-\");\r\n  let pathArray = [...pathLabelArray];\r\n  pathArray.pop();\r\n  pathArray.pop();\r\n\r\n  if (item.occurrences.lowerOccurrences === 1 && item.occurrences.upperOccurrences === 1) {\r\n    if (pathLabelArray[pathLabelArray.length - 1] === \"start\" && pathLabelArray[pathLabelArray.length - 2] === \"date\") {\r\n      validationSchema[pathLabel] = Yup.string().test(\"required\", \"Campo obrigatório\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const passedRequired = handleRequiredValidation(value, this.parent, itemSection);\r\n\r\n        if (passedRequired) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      }).test(\"section-validation\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\r\n\r\n        if (res === true) {\r\n          return true;\r\n        } else {\r\n          const sectionsError = res;\r\n\r\n          if (sectionsError.length > 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          } else if (sectionsError.length === 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          }\r\n        }\r\n      }).test(\"at-least-one\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\r\n\r\n        if (res === true) {\r\n          return true;\r\n        } else {\r\n          const sectionsError = res;\r\n\r\n          if (sectionsError.length > 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          } else if (sectionsError.length === 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          }\r\n        }\r\n      });\r\n    } else if (pathLabelArray[pathLabelArray.length - 1] === \"end\" && pathLabelArray[pathLabelArray.length - 2] === \"date\") {\r\n      validationSchema[pathLabel] = Yup.string().test(\"required\", \"Campo obrigatório\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const passedRequired = handleRequiredValidation(value, this.parent, itemSection);\r\n\r\n        if (passedRequired) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      }).test(\"section-validation\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\r\n\r\n        if (res === true) {\r\n          return true;\r\n        } else {\r\n          const sectionsError = res;\r\n\r\n          if (sectionsError.length > 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          } else if (sectionsError.length === 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          }\r\n        }\r\n      }).test(\"at-least-one\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\r\n\r\n        if (res === true) {\r\n          return true;\r\n        } else {\r\n          const sectionsError = res;\r\n\r\n          if (sectionsError.length > 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          } else if (sectionsError.length === 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          }\r\n        }\r\n      });\r\n    } else if (pathLabelArray[pathLabelArray.length - 1] === \"start\" && pathLabelArray[pathLabelArray.length - 2] === \"time\") {\r\n      let pathTimeEnd = [...pathArray, \"time\", \"end\"];\r\n      let pathDateEnd = [...pathArray, \"date\", \"end\"];\r\n      let pathDateStart = [...pathArray, \"date\", \"start\"];\r\n      let pathLabelTimeEnd = pathTimeEnd.join(\"-\");\r\n      let pathLabelDateEnd = pathDateEnd.join(\"-\");\r\n      let pathLabelDateStart = pathDateStart.join(\"-\");\r\n      validationSchema[pathLabel] = Yup.string().test(\"required\", \"Campo obrigatório\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const passedRequired = handleRequiredValidation(value, this.parent, itemSection);\r\n\r\n        if (passedRequired) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      }).test(pathLabel + \"inferiorigual\", \"A hora inicial deve ser inferior ou igual à hora final\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        let endDate = this.parent[pathLabelDateEnd];\r\n        let startDate = this.parent[pathLabelDateStart];\r\n        let endTime;\r\n        let startTime;\r\n\r\n        if (endDate !== undefined && startDate !== undefined && endDate === startDate) {\r\n          if (this.parent[pathLabelTimeEnd] !== undefined) {\r\n            endTime = new Date(endDate.split(\"-\")[0], endDate.split(\"-\")[1], endDate.split(\"-\")[2], this.parent[pathLabelTimeEnd].split(\":\")[0], this.parent[pathLabelTimeEnd].split(\":\")[1]);\r\n          } else {\r\n            endTime = new Date(endDate.split(\"-\")[0], endDate.split(\"-\")[1], endDate.split(\"-\")[2]);\r\n          }\r\n\r\n          if (value !== undefined) {\r\n            startTime = new Date(startDate.split(\"-\")[0], startDate.split(\"-\")[1], startDate.split(\"-\")[2], value.split(\":\")[0], value.split(\":\")[1]);\r\n          } else {\r\n            startTime = new Date(startDate.split(\"-\")[0], startDate.split(\"-\")[1], startDate.split(\"-\")[2]);\r\n          }\r\n\r\n          if (endTime < startTime) {\r\n            return false;\r\n          }\r\n        }\r\n\r\n        return true;\r\n      }).test(\"section-validation\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\r\n\r\n        if (res === true) {\r\n          return true;\r\n        } else {\r\n          const sectionsError = res;\r\n\r\n          if (sectionsError.length > 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          } else if (sectionsError.length === 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          }\r\n        }\r\n      }).test(\"at-least-one\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\r\n\r\n        if (res === true) {\r\n          return true;\r\n        } else {\r\n          const sectionsError = res;\r\n\r\n          if (sectionsError.length > 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          } else if (sectionsError.length === 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          }\r\n        }\r\n      });\r\n    } else if (pathLabelArray[pathLabelArray.length - 1] === \"end\" && pathLabelArray[pathLabelArray.length - 2] === \"time\") {\r\n      let pathTimeStart = [...pathArray, \"time\", \"start\"];\r\n      let pathDateEnd = [...pathArray, \"date\", \"end\"];\r\n      let pathDateStart = [...pathArray, \"date\", \"start\"];\r\n      let pathLabelTimeStart = pathTimeStart.join(\"-\");\r\n      let pathLabelDateEnd = pathDateEnd.join(\"-\");\r\n      let pathLabelDateStart = pathDateStart.join(\"-\");\r\n      validationSchema[pathLabel] = Yup.string().test(\"required\", \"Campo obrigatório\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const passedRequired = handleRequiredValidation(value, this.parent, itemSection);\r\n\r\n        if (passedRequired) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      }).test(pathLabel + \"superiorigual\", \"A hora final deve ser superior ou igual à hora inicial\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        let endDate = this.parent[pathLabelDateEnd];\r\n        let startDate = this.parent[pathLabelDateStart];\r\n        let endTime;\r\n        let startTime;\r\n\r\n        if (endDate !== undefined && startDate !== undefined && endDate === startDate) {\r\n          if (value !== undefined) {\r\n            endTime = new Date(endDate.split(\"-\")[0], endDate.split(\"-\")[1], endDate.split(\"-\")[2], value.split(\":\")[0], value.split(\":\")[1]);\r\n          } else {\r\n            endTime = new Date(endDate.split(\"-\")[0], endDate.split(\"-\")[1], endDate.split(\"-\")[2]);\r\n          }\r\n\r\n          if (this.parent[pathLabelTimeStart] !== undefined) {\r\n            startTime = new Date(startDate.split(\"-\")[0], startDate.split(\"-\")[1], startDate.split(\"-\")[2], this.parent[pathLabelTimeStart].split(\":\")[0], this.parent[pathLabelTimeStart].split(\":\")[1]);\r\n          } else {\r\n            startTime = new Date(startDate.split(\"-\")[0], startDate.split(\"-\")[1], startDate.split(\"-\")[2]);\r\n          }\r\n\r\n          if (endTime < startTime) {\r\n            return false;\r\n          }\r\n        }\r\n\r\n        return true;\r\n      }).test(\"section-validation\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\r\n\r\n        if (res === true) {\r\n          return true;\r\n        } else {\r\n          const sectionsError = res;\r\n\r\n          if (sectionsError.length > 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          } else if (sectionsError.length === 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          }\r\n        }\r\n      }).test(\"at-least-one\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\r\n\r\n        if (res === true) {\r\n          return true;\r\n        } else {\r\n          const sectionsError = res;\r\n\r\n          if (sectionsError.length > 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          } else if (sectionsError.length === 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          }\r\n        }\r\n      });\r\n    }\r\n  } else if (item.occurrences.lowerOccurrences === 0 && item.occurrences.upperOccurrences === 1) {\r\n    if (pathLabelArray[pathLabelArray.length - 1] === \"start\" && pathLabelArray[pathLabelArray.length - 2] === \"date\") {\r\n      let pathTimeEnd = [...pathArray, \"time\", \"end\"];\r\n      let pathDateEnd = [...pathArray, \"date\", \"end\"];\r\n      let pathTimeStart = [...pathArray, \"time\", \"start\"];\r\n      let pathLabelTimeEnd = pathTimeEnd.join(\"-\");\r\n      let pathLabelDateEnd = pathDateEnd.join(\"-\");\r\n      let pathLabelTimeStart = pathTimeStart.join(\"-\");\r\n      validationSchema[pathLabel] = Yup.string().test(pathLabel, \"Campo obrigatório\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        let endDate = this.parent[pathLabelDateEnd];\r\n        let endTime = this.parent[pathLabelTimeEnd];\r\n        let startTime = this.parent[pathLabelTimeStart];\r\n\r\n        if ((endTime !== undefined || startTime !== undefined || endDate !== undefined) && value === undefined) {\r\n          return false;\r\n        }\r\n\r\n        return true;\r\n      }).test(\"section-validation\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\r\n\r\n        if (res === true) {\r\n          return true;\r\n        } else {\r\n          const sectionsError = res;\r\n\r\n          if (sectionsError.length > 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          } else if (sectionsError.length === 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          }\r\n        }\r\n      }).test(\"at-least-one\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\r\n\r\n        if (res === true) {\r\n          return true;\r\n        } else {\r\n          const sectionsError = res;\r\n\r\n          if (sectionsError.length > 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          } else if (sectionsError.length === 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          }\r\n        }\r\n      }).test(\"rule-mandatory\", \"Campo obrigatório\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        if (!checkMandatory) {\r\n          return true;\r\n        } else {\r\n          let i;\r\n\r\n          for (i = 0; i < item.ruleMandatory.length; i++) {\r\n            const rule = item.ruleMandatory[i];\r\n            let mandatory;\r\n\r\n            if (rule[\"$or\"]) {\r\n              mandatory = false;\r\n              let j;\r\n              const conditionsArray = rule[\"$or\"];\r\n\r\n              for (j = 0; j < conditionsArray.length; j++) {\r\n                const condition = conditionsArray[j];\r\n                const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\r\n                const conditionValidation = handleConditionValidation(condition, this.parent[path]);\r\n\r\n                if (conditionValidation) {\r\n                  mandatory = true;\r\n                  break;\r\n                }\r\n              }\r\n            } else if (rule[\"$and\"]) {\r\n              mandatory = true;\r\n              let j;\r\n              const conditionsArray = rule[\"$and\"];\r\n\r\n              for (j = 0; j < conditionsArray.length; j++) {\r\n                const condition = conditionsArray[j];\r\n                const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\r\n                const conditionValidation = handleConditionValidation(condition, this.parent[path]);\r\n\r\n                if (!conditionValidation) {\r\n                  mandatory = false;\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n\r\n            if (!mandatory) {\r\n              return true;\r\n            } else {\r\n              if (value === \"\" || value === undefined) {\r\n                return false;\r\n              } else if (Array.isArray(value)) {\r\n                if (value.length === 0) {\r\n                  return false;\r\n                } else if (value[0].identifierId !== undefined && value.filter(obj => obj.value !== \"\").length === 0) {\r\n                  return false;\r\n                } else if (value[0].textId !== undefined && value.filter(obj => obj.value.getCurrentContent().hasText()).length === 0) {\r\n                  return false;\r\n                } else {\r\n                  return true;\r\n                }\r\n              } else if (value._immutable !== undefined) {\r\n                if (!value.getCurrentContent().hasText()) {\r\n                  return false;\r\n                } else {\r\n                  return true;\r\n                }\r\n              } else {\r\n                return true;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    } else if (pathLabelArray[pathLabelArray.length - 1] === \"end\" && pathLabelArray[pathLabelArray.length - 2] === \"date\") {\r\n      let pathTimeEnd = [...pathArray, \"time\", \"end\"];\r\n      let pathDateStart = [...pathArray, \"date\", \"start\"];\r\n      let pathTimeStart = [...pathArray, \"time\", \"start\"];\r\n      let pathLabelTimeEnd = pathTimeEnd.join(\"-\");\r\n      let pathLabelDateStart = pathDateStart.join(\"-\");\r\n      let pathLabelTimeStart = pathTimeStart.join(\"-\");\r\n      validationSchema[pathLabel] = Yup.string().test(pathLabel + \"superiorigual\", \"Campo obrigatório\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        let startDate = this.parent[pathLabelDateStart];\r\n        let endTime = this.parent[pathLabelTimeEnd];\r\n        let startTime = this.parent[pathLabelTimeStart];\r\n\r\n        if ((endTime !== undefined || startTime !== undefined || startDate !== undefined) && value === undefined) {\r\n          return false;\r\n        }\r\n\r\n        return true;\r\n      }).test(\"section-validation\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\r\n\r\n        if (res === true) {\r\n          return true;\r\n        } else {\r\n          const sectionsError = res;\r\n\r\n          if (sectionsError.length > 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          } else if (sectionsError.length === 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          }\r\n        }\r\n      }).test(\"at-least-one\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\r\n\r\n        if (res === true) {\r\n          return true;\r\n        } else {\r\n          const sectionsError = res;\r\n\r\n          if (sectionsError.length > 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          } else if (sectionsError.length === 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          }\r\n        }\r\n      }).test(\"rule-mandatory\", \"Campo obrigatório\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        if (!checkMandatory) {\r\n          return true;\r\n        } else {\r\n          let i;\r\n\r\n          for (i = 0; i < item.ruleMandatory.length; i++) {\r\n            const rule = item.ruleMandatory[i];\r\n            let mandatory;\r\n\r\n            if (rule[\"$or\"]) {\r\n              mandatory = false;\r\n              let j;\r\n              const conditionsArray = rule[\"$or\"];\r\n\r\n              for (j = 0; j < conditionsArray.length; j++) {\r\n                const condition = conditionsArray[j];\r\n                const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\r\n                const conditionValidation = handleConditionValidation(condition, this.parent[path]);\r\n\r\n                if (conditionValidation) {\r\n                  mandatory = true;\r\n                  break;\r\n                }\r\n              }\r\n            } else if (rule[\"$and\"]) {\r\n              mandatory = true;\r\n              let j;\r\n              const conditionsArray = rule[\"$and\"];\r\n\r\n              for (j = 0; j < conditionsArray.length; j++) {\r\n                const condition = conditionsArray[j];\r\n                const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\r\n                const conditionValidation = handleConditionValidation(condition, this.parent[path]);\r\n\r\n                if (!conditionValidation) {\r\n                  mandatory = false;\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n\r\n            if (!mandatory) {\r\n              return true;\r\n            } else {\r\n              if (value === \"\" || value === undefined) {\r\n                return false;\r\n              } else if (Array.isArray(value)) {\r\n                if (value.length === 0) {\r\n                  return false;\r\n                } else if (value[0].identifierId !== undefined && value.filter(obj => obj.value !== \"\").length === 0) {\r\n                  return false;\r\n                } else if (value[0].textId !== undefined && value.filter(obj => obj.value.getCurrentContent().hasText()).length === 0) {\r\n                  return false;\r\n                } else {\r\n                  return true;\r\n                }\r\n              } else if (value._immutable !== undefined) {\r\n                if (!value.getCurrentContent().hasText()) {\r\n                  return false;\r\n                } else {\r\n                  return true;\r\n                }\r\n              } else {\r\n                return true;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    } else if (pathLabelArray[pathLabelArray.length - 1] === \"start\" && pathLabelArray[pathLabelArray.length - 2] === \"time\") {\r\n      let pathTimeEnd = [...pathArray, \"time\", \"end\"];\r\n      let pathDateEnd = [...pathArray, \"date\", \"end\"];\r\n      let pathDateStart = [...pathArray, \"date\", \"start\"];\r\n      let pathLabelTimeEnd = pathTimeEnd.join(\"-\");\r\n      let pathLabelDateEnd = pathDateEnd.join(\"-\");\r\n      let pathLabelDateStart = pathDateStart.join(\"-\");\r\n      validationSchema[pathLabel] = Yup.string().test(pathLabel + \"inferiorigual\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        let endDate = this.parent[pathLabelDateEnd];\r\n        let startDate = this.parent[pathLabelDateStart];\r\n        let endTime;\r\n        let startTime;\r\n\r\n        if (endDate !== undefined && startDate !== undefined && endDate === startDate) {\r\n          if (this.parent[pathLabelTimeEnd] !== undefined) {\r\n            endTime = new Date(endDate.split(\"-\")[0], endDate.split(\"-\")[1], endDate.split(\"-\")[2], this.parent[pathLabelTimeEnd].split(\":\")[0], this.parent[pathLabelTimeEnd].split(\":\")[1]);\r\n          } else {\r\n            endTime = new Date(endDate.split(\"-\")[0], endDate.split(\"-\")[1], endDate.split(\"-\")[2]);\r\n          }\r\n\r\n          if (value !== undefined) {\r\n            startTime = new Date(startDate.split(\"-\")[0], startDate.split(\"-\")[1], startDate.split(\"-\")[2], value.split(\":\")[0], value.split(\":\")[1]);\r\n          } else {\r\n            startTime = new Date(startDate.split(\"-\")[0], startDate.split(\"-\")[1], startDate.split(\"-\")[2]);\r\n          }\r\n\r\n          if (endTime < startTime) {\r\n            return this.createError({\r\n              message: \"A hora inicial deve ser inferior ou igual à hora final\"\r\n            });\r\n          } else if (isNaN(startTime.getTime())) {\r\n            return this.createError({\r\n              message: \"Campo obrigatório\"\r\n            });\r\n          } else if (!isNaN(endTime.getTime()) && isNaN(startTime.getTime())) {\r\n            return this.createError({\r\n              message: \"Campo obrigatório\"\r\n            });\r\n          }\r\n\r\n          return true;\r\n        } else {\r\n          if (this.parent[pathLabelTimeEnd] !== undefined) {\r\n            endTime = new Date(2000, 1, 1, this.parent[pathLabelTimeEnd].split(\":\")[0], this.parent[pathLabelTimeEnd].split(\":\")[1]);\r\n          } else {\r\n            endTime = new Date(2000, 1, 1);\r\n          }\r\n\r\n          if (value !== undefined) {\r\n            startTime = new Date(2000, 1, 1, value.split(\":\")[0], value.split(\":\")[1]);\r\n          } else {\r\n            startTime = new Date(2000, 1, 1);\r\n          }\r\n\r\n          if (!isNaN(endTime.getTime()) && isNaN(startTime.getTime())) {\r\n            return this.createError({\r\n              message: \"Campo obrigatório\"\r\n            });\r\n          } else if ((startDate !== undefined || endDate !== undefined || !isNaN(endTime.getTime())) && isNaN(startTime.getTime())) {\r\n            return this.createError({\r\n              message: \"Campo obrigatório\"\r\n            });\r\n          }\r\n\r\n          return true;\r\n        }\r\n      }).test(\"section-validation\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\r\n\r\n        if (res === true) {\r\n          return true;\r\n        } else {\r\n          const sectionsError = res;\r\n\r\n          if (sectionsError.length > 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          } else if (sectionsError.length === 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          }\r\n        }\r\n      }).test(\"at-least-one\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\r\n\r\n        if (res === true) {\r\n          return true;\r\n        } else {\r\n          const sectionsError = res;\r\n\r\n          if (sectionsError.length > 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          } else if (sectionsError.length === 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          }\r\n        }\r\n      }).test(\"rule-mandatory\", \"Campo obrigatório\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        if (!checkMandatory) {\r\n          return true;\r\n        } else {\r\n          let i;\r\n\r\n          for (i = 0; i < item.ruleMandatory.length; i++) {\r\n            const rule = item.ruleMandatory[i];\r\n            let mandatory;\r\n\r\n            if (rule[\"$or\"]) {\r\n              mandatory = false;\r\n              let j;\r\n              const conditionsArray = rule[\"$or\"];\r\n\r\n              for (j = 0; j < conditionsArray.length; j++) {\r\n                const condition = conditionsArray[j];\r\n                const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\r\n                const conditionValidation = handleConditionValidation(condition, this.parent[path]);\r\n\r\n                if (conditionValidation) {\r\n                  mandatory = true;\r\n                  break;\r\n                }\r\n              }\r\n            } else if (rule[\"$and\"]) {\r\n              mandatory = true;\r\n              let j;\r\n              const conditionsArray = rule[\"$and\"];\r\n\r\n              for (j = 0; j < conditionsArray.length; j++) {\r\n                const condition = conditionsArray[j];\r\n                const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\r\n                const conditionValidation = handleConditionValidation(condition, this.parent[path]);\r\n\r\n                if (!conditionValidation) {\r\n                  mandatory = false;\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n\r\n            if (!mandatory) {\r\n              return true;\r\n            } else {\r\n              if (value === \"\" || value === undefined) {\r\n                return false;\r\n              } else if (Array.isArray(value)) {\r\n                if (value.length === 0) {\r\n                  return false;\r\n                } else if (value[0].identifierId !== undefined && value.filter(obj => obj.value !== \"\").length === 0) {\r\n                  return false;\r\n                } else if (value[0].textId !== undefined && value.filter(obj => obj.value.getCurrentContent().hasText()).length === 0) {\r\n                  return false;\r\n                } else {\r\n                  return true;\r\n                }\r\n              } else if (value._immutable !== undefined) {\r\n                if (!value.getCurrentContent().hasText()) {\r\n                  return false;\r\n                } else {\r\n                  return true;\r\n                }\r\n              } else {\r\n                return true;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    } else if (pathLabelArray[pathLabelArray.length - 1] === \"end\" && pathLabelArray[pathLabelArray.length - 2] === \"time\") {\r\n      let pathTimeStart = [...pathArray, \"time\", \"start\"];\r\n      let pathDateEnd = [...pathArray, \"date\", \"end\"];\r\n      let pathDateStart = [...pathArray, \"date\", \"start\"];\r\n      let pathLabelTimeStart = pathTimeStart.join(\"-\");\r\n      let pathLabelDateEnd = pathDateEnd.join(\"-\");\r\n      let pathLabelDateStart = pathDateStart.join(\"-\");\r\n      validationSchema[pathLabel] = Yup.string().test(pathLabel + \"superiorigual\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        let endDate = this.parent[pathLabelDateEnd];\r\n        let startDate = this.parent[pathLabelDateStart];\r\n        let endTime;\r\n        let startTime;\r\n\r\n        if (endDate !== undefined && startDate !== undefined && endDate === startDate) {\r\n          if (value !== undefined) {\r\n            endTime = new Date(endDate.split(\"-\")[0], endDate.split(\"-\")[1], endDate.split(\"-\")[2], value.split(\":\")[0], value.split(\":\")[1]);\r\n          } else {\r\n            endTime = new Date(endDate.split(\"-\")[0], endDate.split(\"-\")[1], endDate.split(\"-\")[2]);\r\n          }\r\n\r\n          if (this.parent[pathLabelTimeStart] !== undefined) {\r\n            startTime = new Date(startDate.split(\"-\")[0], startDate.split(\"-\")[1], startDate.split(\"-\")[2], this.parent[pathLabelTimeStart].split(\":\")[0], this.parent[pathLabelTimeStart].split(\":\")[1]);\r\n          } else {\r\n            startTime = new Date(startDate.split(\"-\")[0], startDate.split(\"-\")[1], startDate.split(\"-\")[2]);\r\n          }\r\n\r\n          if (endTime < startTime) {\r\n            return this.createError({\r\n              message: \"A hora final deve ser superior ou igual à hora inicial\"\r\n            });\r\n          } else if (isNaN(endTime.getTime())) {\r\n            return this.createError({\r\n              message: \"Campo obrigatório\"\r\n            });\r\n          } else if (isNaN(endTime.getTime()) && !isNaN(startTime.getTime())) {\r\n            return this.createError({\r\n              message: \"Campo obrigatório\"\r\n            });\r\n          }\r\n\r\n          return true;\r\n        } else {\r\n          if (value !== undefined) {\r\n            endTime = new Date(2000, 1, 1, value.split(\":\")[0], value.split(\":\")[1]);\r\n          } else {\r\n            endTime = new Date(2000, 1, 1);\r\n          }\r\n\r\n          if (this.parent[pathLabelTimeStart] !== undefined) {\r\n            startTime = new Date(2000, 1, 1, this.parent[pathLabelTimeStart].split(\":\")[0], this.parent[pathLabelTimeStart].split(\":\")[1]);\r\n          } else {\r\n            startTime = new Date(2000, 1, 1);\r\n          }\r\n\r\n          if (isNaN(endTime.getTime()) && !isNaN(startTime.getTime())) {\r\n            return this.createError({\r\n              message: \"Campo obrigatório\"\r\n            });\r\n          } else if ((startDate !== undefined || endDate !== undefined || !isNaN(startTime.getTime())) && isNaN(endTime.getTime())) {\r\n            return this.createError({\r\n              message: \"Campo obrigatório\"\r\n            });\r\n          }\r\n\r\n          return true;\r\n        }\r\n      }).test(\"section-validation\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\r\n\r\n        if (res === true) {\r\n          return true;\r\n        } else {\r\n          const sectionsError = res;\r\n\r\n          if (sectionsError.length > 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          } else if (sectionsError.length === 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          }\r\n        }\r\n      }).test(\"at-least-one\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\r\n\r\n        if (res === true) {\r\n          return true;\r\n        } else {\r\n          const sectionsError = res;\r\n\r\n          if (sectionsError.length > 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          } else if (sectionsError.length === 1) {\r\n            return this.createError({\r\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\r\n            });\r\n          }\r\n        }\r\n      }).test(\"rule-mandatory\", \"Campo obrigatório\", function (value) {\r\n        const isVisible = handleRules(item, this.parent, \"visibility\");\r\n\r\n        if (!isVisible) {\r\n          return true;\r\n        }\r\n\r\n        if (!checkMandatory) {\r\n          return true;\r\n        } else {\r\n          let i;\r\n\r\n          for (i = 0; i < item.ruleMandatory.length; i++) {\r\n            const rule = item.ruleMandatory[i];\r\n            let mandatory;\r\n\r\n            if (rule[\"$or\"]) {\r\n              mandatory = false;\r\n              let j;\r\n              const conditionsArray = rule[\"$or\"];\r\n\r\n              for (j = 0; j < conditionsArray.length; j++) {\r\n                const condition = conditionsArray[j];\r\n                const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\r\n                const conditionValidation = handleConditionValidation(condition, this.parent[path]);\r\n\r\n                if (conditionValidation) {\r\n                  mandatory = true;\r\n                  break;\r\n                }\r\n              }\r\n            } else if (rule[\"$and\"]) {\r\n              mandatory = true;\r\n              let j;\r\n              const conditionsArray = rule[\"$and\"];\r\n\r\n              for (j = 0; j < conditionsArray.length; j++) {\r\n                const condition = conditionsArray[j];\r\n                const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\r\n                const conditionValidation = handleConditionValidation(condition, this.parent[path]);\r\n\r\n                if (!conditionValidation) {\r\n                  mandatory = false;\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n\r\n            if (!mandatory) {\r\n              return true;\r\n            } else {\r\n              if (value === \"\" || value === undefined) {\r\n                return false;\r\n              } else if (Array.isArray(value)) {\r\n                if (value.length === 0) {\r\n                  return false;\r\n                } else if (value[0].identifierId !== undefined && value.filter(obj => obj.value !== \"\").length === 0) {\r\n                  return false;\r\n                } else if (value[0].textId !== undefined && value.filter(obj => obj.value.getCurrentContent().hasText()).length === 0) {\r\n                  return false;\r\n                } else {\r\n                  return true;\r\n                }\r\n              } else if (value._immutable !== undefined) {\r\n                if (!value.getCurrentContent().hasText()) {\r\n                  return false;\r\n                } else {\r\n                  return true;\r\n                }\r\n              } else {\r\n                return true;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n\r\nexport { buildDateTimeRangeValidation };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}