{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst undici_1 = require(\"undici\");\n/**\n * performs the fetch request and formats the body for ogs\n *\n * @param {object} options - options for ogs\n * @return {object} formatted request body and response\n *\n */\nasync function requestAndResultsFormatter(options) {\n  let body;\n  let response;\n  try {\n    response = await (0, undici_1.fetch)(options.url || '', {\n      signal: AbortSignal.timeout((options.timeout || 10) * 1000),\n      headers: {\n        Origin: options.url\n      },\n      ...options.fetchOptions\n    });\n    body = await response.text();\n    if (response && response.headers && response.headers.get('content-type') && !response.headers.get('content-type')?.includes('text/')) {\n      throw new Error('Page must return a header content-type with text/');\n    }\n    if (response && response.status && (response.status.toString().substring(0, 1) === '4' || response.status.toString().substring(0, 1) === '5')) {\n      switch (response.status) {\n        case 400:\n          throw new Error('400 Bad Request');\n        case 401:\n          throw new Error('401 Unauthorized');\n        case 403:\n          throw new Error('403 Forbidden');\n        case 404:\n          throw new Error('404 Not Found');\n        case 408:\n          throw new Error('408 Request Timeout');\n        case 410:\n          throw new Error('410 Gone');\n        case 500:\n          throw new Error('500 Internal Server Error');\n        case 502:\n          throw new Error('502 Bad Gateway');\n        case 503:\n          throw new Error('503 Service Unavailable');\n        case 504:\n          throw new Error('504 Gateway Timeout');\n        default:\n          throw new Error('Server has returned a 400/500 error code');\n      }\n    }\n    if (body === undefined || body === '') {\n      throw new Error('Page not found');\n    }\n  } catch (error) {\n    if (error instanceof Error && error.message === 'fetch failed') throw error.cause;\n    throw error;\n  }\n  return {\n    body,\n    response\n  };\n}\nexports.default = requestAndResultsFormatter;","map":{"version":3,"names":["Object","defineProperty","exports","value","undici_1","require","requestAndResultsFormatter","options","body","response","fetch","url","signal","AbortSignal","timeout","headers","Origin","fetchOptions","text","get","includes","Error","status","toString","substring","undefined","error","message","cause","default"],"sources":["C:/Users/ines_/bee_v2/bee_school/frontend/node_modules/open-graph-scraper/dist/lib/request.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst undici_1 = require(\"undici\");\n/**\n * performs the fetch request and formats the body for ogs\n *\n * @param {object} options - options for ogs\n * @return {object} formatted request body and response\n *\n */\nasync function requestAndResultsFormatter(options) {\n    let body;\n    let response;\n    try {\n        response = await (0, undici_1.fetch)(options.url || '', {\n            signal: AbortSignal.timeout((options.timeout || 10) * 1000),\n            headers: { Origin: options.url },\n            ...options.fetchOptions,\n        });\n        body = await response.text();\n        if (response && response.headers && response.headers.get('content-type') && !response.headers.get('content-type')?.includes('text/')) {\n            throw new Error('Page must return a header content-type with text/');\n        }\n        if (response && response.status && (response.status.toString().substring(0, 1) === '4' || response.status.toString().substring(0, 1) === '5')) {\n            switch (response.status) {\n                case 400:\n                    throw new Error('400 Bad Request');\n                case 401:\n                    throw new Error('401 Unauthorized');\n                case 403:\n                    throw new Error('403 Forbidden');\n                case 404:\n                    throw new Error('404 Not Found');\n                case 408:\n                    throw new Error('408 Request Timeout');\n                case 410:\n                    throw new Error('410 Gone');\n                case 500:\n                    throw new Error('500 Internal Server Error');\n                case 502:\n                    throw new Error('502 Bad Gateway');\n                case 503:\n                    throw new Error('503 Service Unavailable');\n                case 504:\n                    throw new Error('504 Gateway Timeout');\n                default:\n                    throw new Error('Server has returned a 400/500 error code');\n            }\n        }\n        if (body === undefined || body === '') {\n            throw new Error('Page not found');\n        }\n    }\n    catch (error) {\n        if (error instanceof Error && error.message === 'fetch failed')\n            throw error.cause;\n        throw error;\n    }\n    return { body, response };\n}\nexports.default = requestAndResultsFormatter;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7D,MAAMC,QAAQ,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAeC,0BAA0B,CAACC,OAAO,EAAE;EAC/C,IAAIC,IAAI;EACR,IAAIC,QAAQ;EACZ,IAAI;IACAA,QAAQ,GAAG,MAAM,CAAC,CAAC,EAAEL,QAAQ,CAACM,KAAK,EAAEH,OAAO,CAACI,GAAG,IAAI,EAAE,EAAE;MACpDC,MAAM,EAAEC,WAAW,CAACC,OAAO,CAAC,CAACP,OAAO,CAACO,OAAO,IAAI,EAAE,IAAI,IAAI,CAAC;MAC3DC,OAAO,EAAE;QAAEC,MAAM,EAAET,OAAO,CAACI;MAAI,CAAC;MAChC,GAAGJ,OAAO,CAACU;IACf,CAAC,CAAC;IACFT,IAAI,GAAG,MAAMC,QAAQ,CAACS,IAAI,EAAE;IAC5B,IAAIT,QAAQ,IAAIA,QAAQ,CAACM,OAAO,IAAIN,QAAQ,CAACM,OAAO,CAACI,GAAG,CAAC,cAAc,CAAC,IAAI,CAACV,QAAQ,CAACM,OAAO,CAACI,GAAG,CAAC,cAAc,CAAC,EAAEC,QAAQ,CAAC,OAAO,CAAC,EAAE;MAClI,MAAM,IAAIC,KAAK,CAAC,mDAAmD,CAAC;IACxE;IACA,IAAIZ,QAAQ,IAAIA,QAAQ,CAACa,MAAM,KAAKb,QAAQ,CAACa,MAAM,CAACC,QAAQ,EAAE,CAACC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,GAAG,IAAIf,QAAQ,CAACa,MAAM,CAACC,QAAQ,EAAE,CAACC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,EAAE;MAC3I,QAAQf,QAAQ,CAACa,MAAM;QACnB,KAAK,GAAG;UACJ,MAAM,IAAID,KAAK,CAAC,iBAAiB,CAAC;QACtC,KAAK,GAAG;UACJ,MAAM,IAAIA,KAAK,CAAC,kBAAkB,CAAC;QACvC,KAAK,GAAG;UACJ,MAAM,IAAIA,KAAK,CAAC,eAAe,CAAC;QACpC,KAAK,GAAG;UACJ,MAAM,IAAIA,KAAK,CAAC,eAAe,CAAC;QACpC,KAAK,GAAG;UACJ,MAAM,IAAIA,KAAK,CAAC,qBAAqB,CAAC;QAC1C,KAAK,GAAG;UACJ,MAAM,IAAIA,KAAK,CAAC,UAAU,CAAC;QAC/B,KAAK,GAAG;UACJ,MAAM,IAAIA,KAAK,CAAC,2BAA2B,CAAC;QAChD,KAAK,GAAG;UACJ,MAAM,IAAIA,KAAK,CAAC,iBAAiB,CAAC;QACtC,KAAK,GAAG;UACJ,MAAM,IAAIA,KAAK,CAAC,yBAAyB,CAAC;QAC9C,KAAK,GAAG;UACJ,MAAM,IAAIA,KAAK,CAAC,qBAAqB,CAAC;QAC1C;UACI,MAAM,IAAIA,KAAK,CAAC,0CAA0C,CAAC;MAAC;IAExE;IACA,IAAIb,IAAI,KAAKiB,SAAS,IAAIjB,IAAI,KAAK,EAAE,EAAE;MACnC,MAAM,IAAIa,KAAK,CAAC,gBAAgB,CAAC;IACrC;EACJ,CAAC,CACD,OAAOK,KAAK,EAAE;IACV,IAAIA,KAAK,YAAYL,KAAK,IAAIK,KAAK,CAACC,OAAO,KAAK,cAAc,EAC1D,MAAMD,KAAK,CAACE,KAAK;IACrB,MAAMF,KAAK;EACf;EACA,OAAO;IAAElB,IAAI;IAAEC;EAAS,CAAC;AAC7B;AACAP,OAAO,CAAC2B,OAAO,GAAGvB,0BAA0B"},"metadata":{},"sourceType":"script","externalDependencies":[]}