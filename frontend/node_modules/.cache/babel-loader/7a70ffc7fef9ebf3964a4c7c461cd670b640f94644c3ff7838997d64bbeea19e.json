{"ast":null,"code":"import React, { useContext, useEffect, useState } from \"react\";\nimport CombinedContext from \"../../../../../../contexts/CombinedContext\";\nimport PrefixInput from \"../../../../../UI/Input/PrefixInput\";\nimport IconButton from \"../../../../UI/Button/IconButton\";\nimport { FileIcon } from \"../../../../../../assets/icons/svg_icons\";\nimport { getItemsList } from \"../../../../../../assets/data/SidebarData\";\nconst FileExtensionPanel = props => {\n  const context = useContext(CombinedContext);\n  const [selectedFileExtensions, setFileExtensions] = useState([]);\n  const [otherExtension, setOtherExtension] = useState(\"\");\n  useEffect(() => {\n    if (context.datatypes.fileExtensions[context.composition.openCompositionPlanningPath]) {\n      setFileExtensions(context.datatypes.fileExtensions[context.composition.openCompositionPlanningPath]);\n      context.datatypes.fileExtensions[context.composition.openCompositionPlanningPath].forEach(f => f.description === \"Outro\" && setOtherExtension(f.extension));\n    }\n  }, [context.composition.openCompositionPlanningPath, context.datatypes.fileExtensions]);\n  const handleFileExtensionChange = (e, obj) => {\n    let value = selectedFileExtensions.filter(x => x.id === obj.id).length > 0 ? selectedFileExtensions.filter(x => x.id !== obj.id) // se o elemento já existe na lista é removido\n    : obj.description === \"Outro\" || obj.description === \"Todos os ficheiros\" ? [obj] // se selecciona todos/outro os elementos são todos removidos\n    : [...selectedFileExtensions.filter(x => x.description !== \"Outro\" && x.description !== \"Todos os ficheiros\"), obj];\n    setFileExtensions(value);\n    obj.description === \"Outro\" && setOtherExtension(\"\");\n    context.datatypes.handleFileExtensions(context.composition.openCompositionPlanningPath, value);\n  };\n  const handleOtherFileExtension = e => {\n    let extensionValue = e.target.value;\n    extensionValue = extensionValue.substring(0, 1) !== '.' ? '.' + extensionValue : extensionValue;\n    let index = selectedFileExtensions.findIndex(x => x.description === \"Outro\");\n    let finalValues = Object.values({\n      ...selectedFileExtensions,\n      [index]: {\n        ...selectedFileExtensions[index],\n        extension: extensionValue\n      }\n    });\n    context.datatypes.handleFileExtensions(context.composition.openCompositionPlanningPath, finalValues);\n    setFileExtensions(finalValues);\n    setOtherExtension(extensionValue);\n  };\n  let itemsList = getItemsList(otherExtension);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center justify-center\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"grid gap-1 grid-cols-1 sm:grid-cols-2\"\n  }, Object.keys(itemsList).map(option => /*#__PURE__*/React.createElement(IconButton, {\n    key: itemsList[option].id,\n    icon: /*#__PURE__*/React.createElement(FileIcon, {\n      fill: itemsList[option].color,\n      text: itemsList[option].text\n    }),\n    type: \"fileExtensions\",\n    color: itemsList[option].color,\n    selected: context.datatypes.fileExtensions[context.composition.openCompositionPlanningPath] === undefined ? itemsList[option].isDefault && true : context.datatypes.fileExtensions[context.composition.openCompositionPlanningPath].filter(f => f.id === itemsList[option].id).length === 1,\n    handleClick: e => handleFileExtensionChange(e, itemsList[option]),\n    description: itemsList[option].description\n  })))), selectedFileExtensions !== [] && selectedFileExtensions.filter(f => f.description === \"Outro\").length === 1 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PrefixInput, {\n    prefix: \"Qual?\",\n    onChange: event => handleOtherFileExtension(event),\n    value: otherExtension\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-gray-600 text-9 xl:text-10 xxl:text-11 xxxl:text-xs leading-tight mt-2 pb-4\"\n  }, /*#__PURE__*/React.createElement(\"b\", null, \"Nota:\"), \" Introduza a extens\\xE3o do ficheiro (p.e: .txt)\")));\n};\nexport default FileExtensionPanel;","map":{"version":3,"names":["React","useContext","useEffect","useState","CombinedContext","PrefixInput","IconButton","FileIcon","getItemsList","FileExtensionPanel","props","context","selectedFileExtensions","setFileExtensions","otherExtension","setOtherExtension","datatypes","fileExtensions","composition","openCompositionPlanningPath","forEach","f","description","extension","handleFileExtensionChange","e","obj","value","filter","x","id","length","handleFileExtensions","handleOtherFileExtension","extensionValue","target","substring","index","findIndex","finalValues","Object","values","itemsList","createElement","Fragment","className","keys","map","option","key","icon","fill","color","text","type","selected","undefined","isDefault","handleClick","prefix","onChange","event"],"sources":["C:/Users/ines_/Desktop/fisiosys/fisiosys/frontend/node_modules/protected-aidaforms/dist/components/FormDesigner/Sidebar/SidePanel/ConfigurationSettingsPanel/FilePanel/FileExtensionPanel.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport CombinedContext from \"../../../../../../contexts/CombinedContext\";\r\nimport PrefixInput from \"../../../../../UI/Input/PrefixInput\";\r\nimport IconButton from \"../../../../UI/Button/IconButton\";\r\nimport { FileIcon } from \"../../../../../../assets/icons/svg_icons\";\r\nimport { getItemsList } from \"../../../../../../assets/data/SidebarData\";\r\n\r\nconst FileExtensionPanel = props => {\r\n  const context = useContext(CombinedContext);\r\n  const [selectedFileExtensions, setFileExtensions] = useState([]);\r\n  const [otherExtension, setOtherExtension] = useState(\"\");\r\n  useEffect(() => {\r\n    if (context.datatypes.fileExtensions[context.composition.openCompositionPlanningPath]) {\r\n      setFileExtensions(context.datatypes.fileExtensions[context.composition.openCompositionPlanningPath]);\r\n      context.datatypes.fileExtensions[context.composition.openCompositionPlanningPath].forEach(f => f.description === \"Outro\" && setOtherExtension(f.extension));\r\n    }\r\n  }, [context.composition.openCompositionPlanningPath, context.datatypes.fileExtensions]);\r\n\r\n  const handleFileExtensionChange = (e, obj) => {\r\n    let value = selectedFileExtensions.filter(x => x.id === obj.id).length > 0 ? selectedFileExtensions.filter(x => x.id !== obj.id) // se o elemento já existe na lista é removido\r\n    : obj.description === \"Outro\" || obj.description === \"Todos os ficheiros\" ? [obj] // se selecciona todos/outro os elementos são todos removidos\r\n    : [...selectedFileExtensions.filter(x => x.description !== \"Outro\" && x.description !== \"Todos os ficheiros\"), obj];\r\n    setFileExtensions(value);\r\n    obj.description === \"Outro\" && setOtherExtension(\"\");\r\n    context.datatypes.handleFileExtensions(context.composition.openCompositionPlanningPath, value);\r\n  };\r\n\r\n  const handleOtherFileExtension = e => {\r\n    let extensionValue = e.target.value;\r\n    extensionValue = extensionValue.substring(0, 1) !== '.' ? '.' + extensionValue : extensionValue;\r\n    let index = selectedFileExtensions.findIndex(x => x.description === \"Outro\");\r\n    let finalValues = Object.values({ ...selectedFileExtensions,\r\n      [index]: { ...selectedFileExtensions[index],\r\n        extension: extensionValue\r\n      }\r\n    });\r\n    context.datatypes.handleFileExtensions(context.composition.openCompositionPlanningPath, finalValues);\r\n    setFileExtensions(finalValues);\r\n    setOtherExtension(extensionValue);\r\n  };\r\n\r\n  let itemsList = getItemsList(otherExtension);\r\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\r\n    className: \"flex items-center justify-center\"\r\n  }, /*#__PURE__*/React.createElement(\"div\", {\r\n    className: \"grid gap-1 grid-cols-1 sm:grid-cols-2\"\r\n  }, Object.keys(itemsList).map(option => /*#__PURE__*/React.createElement(IconButton, {\r\n    key: itemsList[option].id,\r\n    icon: /*#__PURE__*/React.createElement(FileIcon, {\r\n      fill: itemsList[option].color,\r\n      text: itemsList[option].text\r\n    }),\r\n    type: \"fileExtensions\",\r\n    color: itemsList[option].color,\r\n    selected: context.datatypes.fileExtensions[context.composition.openCompositionPlanningPath] === undefined ? itemsList[option].isDefault && true : context.datatypes.fileExtensions[context.composition.openCompositionPlanningPath].filter(f => f.id === itemsList[option].id).length === 1,\r\n    handleClick: e => handleFileExtensionChange(e, itemsList[option]),\r\n    description: itemsList[option].description\r\n  })))), selectedFileExtensions !== [] && selectedFileExtensions.filter(f => f.description === \"Outro\").length === 1 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PrefixInput, {\r\n    prefix: \"Qual?\",\r\n    onChange: event => handleOtherFileExtension(event),\r\n    value: otherExtension\r\n  }), /*#__PURE__*/React.createElement(\"p\", {\r\n    className: \"text-gray-600 text-9 xl:text-10 xxl:text-11 xxxl:text-xs leading-tight mt-2 pb-4\"\r\n  }, /*#__PURE__*/React.createElement(\"b\", null, \"Nota:\"), \" Introduza a extens\\xE3o do ficheiro (p.e: .txt)\")));\r\n};\r\n\r\nexport default FileExtensionPanel;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}