{"ast":null,"code":"import React, { useContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport CompositionPlanningPanel from \"../CompositionPlanningPanel\";\nimport CombinedContext from \"../../../../../../contexts/CombinedContext\";\nimport { getEnvUrl } from \"../../../../../../environment\";\nconst TaskSettingsPanel = props => {\n  const context = useContext(CombinedContext);\n  const [taskSelected, setTask] = useState(null);\n  const [showDropTasks, setShowDropTasks] = useState(false);\n  const [concepts, setConcepts] = useState(null);\n  const [showDropConcepts, setShowDropConcepts] = useState(false);\n  const {\n    multipleConcept,\n    onConceptChange\n  } = props;\n  const handleSetShowDropTasks = () => {\n    setShowDropTasks(!showDropTasks);\n  };\n  const handleSelectTask = obj => {\n    setTask(taskSelected !== null && taskSelected.id === obj.id ? null : obj);\n    setConcepts(null);\n    setShowDropTasks(false);\n  };\n  const handleClearTask = () => {\n    setTask(null);\n    setConcepts(null);\n    onConceptChange([]);\n    setShowDropTasks(false);\n  };\n  useEffect(() => {\n    taskSelected !== null && axios({\n      method: \"get\",\n      url: `${getEnvUrl('aidarefsets', '4010')}/refsetConcepts?id=${taskSelected.id}`,\n      // url: `http://172.21.220.49:4010/refsetConcepts?id=${taskSelected.id}`,\n      headers: {\n        Authorization: \"Bearer \" + context.token\n      }\n    }).then(response => {\n      if (response.data.success === true) {\n        setConcepts(response.data.concepts);\n      } else {\n        setConcepts([]);\n      }\n    }).catch(error => {\n      setConcepts([]);\n    });\n  }, [taskSelected, context.token]);\n  const handleSetShowDropConcepts = () => {\n    setShowDropConcepts(!showDropConcepts);\n  };\n  const handleSelectMultipleConcepts = (event, value) => {\n    event.stopPropagation();\n    onConceptChange(multipleConcept.filter(x => x.idTask === value.idTask).length > 0 ? multipleConcept.filter(x => x.idTask !== value.idTask) : [...multipleConcept, value]);\n    setShowDropConcepts(false);\n  };\n  const handleClearMultipleConcepts = () => {\n    onConceptChange([]);\n    setShowDropConcepts(false);\n  };\n  let taskList = context.composition.compositionPlanningTasks;\n  let bodyData = [{\n    value: multipleConcept,\n    placeholder: \"Selecione uma tarefa...\",\n    type: \"multiple_dropdown\",\n    isDropSelected: showDropConcepts,\n    dropList: concepts,\n    dropListID: \"idTask\",\n    dropListTextID: \"task\",\n    handleOpenDrop: handleSetShowDropConcepts,\n    handleSetValue: handleSelectMultipleConcepts,\n    handleClearValue: handleClearMultipleConcepts\n  }];\n  return /*#__PURE__*/React.createElement(CompositionPlanningPanel, {\n    jsonTitle: props.jsonTitle,\n    itemsList: taskList,\n    selectedItem: taskSelected,\n    handleSelectItem: handleSelectTask,\n    handleClearValue: handleClearTask,\n    handleOpenDrop: handleSetShowDropTasks,\n    showDropList: showDropTasks,\n    hasSearchBar: false,\n    concepts: concepts,\n    dropListID: \"id\",\n    dropListTextID: \"name\",\n    bodyData: bodyData\n  });\n};\nexport default TaskSettingsPanel;","map":{"version":3,"names":["React","useContext","useEffect","useState","axios","CompositionPlanningPanel","CombinedContext","getEnvUrl","TaskSettingsPanel","props","context","taskSelected","setTask","showDropTasks","setShowDropTasks","concepts","setConcepts","showDropConcepts","setShowDropConcepts","multipleConcept","onConceptChange","handleSetShowDropTasks","handleSelectTask","obj","id","handleClearTask","method","url","headers","Authorization","token","then","response","data","success","catch","error","handleSetShowDropConcepts","handleSelectMultipleConcepts","event","value","stopPropagation","filter","x","idTask","length","handleClearMultipleConcepts","taskList","composition","compositionPlanningTasks","bodyData","placeholder","type","isDropSelected","dropList","dropListID","dropListTextID","handleOpenDrop","handleSetValue","handleClearValue","createElement","jsonTitle","itemsList","selectedItem","handleSelectItem","showDropList","hasSearchBar"],"sources":["C:/Users/ines_/fisiosys/fisiosys/frontend/node_modules/protected-aidaforms/dist/components/FormDesigner/Sidebar/SidePanel/CompositionPlanningPanels/TaskSettingsPanel/TaskSettingsPanel.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport CompositionPlanningPanel from \"../CompositionPlanningPanel\";\r\nimport CombinedContext from \"../../../../../../contexts/CombinedContext\";\r\nimport { getEnvUrl } from \"../../../../../../environment\";\r\n\r\nconst TaskSettingsPanel = props => {\r\n  const context = useContext(CombinedContext);\r\n  const [taskSelected, setTask] = useState(null);\r\n  const [showDropTasks, setShowDropTasks] = useState(false);\r\n  const [concepts, setConcepts] = useState(null);\r\n  const [showDropConcepts, setShowDropConcepts] = useState(false);\r\n  const {\r\n    multipleConcept,\r\n    onConceptChange\r\n  } = props;\r\n\r\n  const handleSetShowDropTasks = () => {\r\n    setShowDropTasks(!showDropTasks);\r\n  };\r\n\r\n  const handleSelectTask = obj => {\r\n    setTask(taskSelected !== null && taskSelected.id === obj.id ? null : obj);\r\n    setConcepts(null);\r\n    setShowDropTasks(false);\r\n  };\r\n\r\n  const handleClearTask = () => {\r\n    setTask(null);\r\n    setConcepts(null);\r\n    onConceptChange([]);\r\n    setShowDropTasks(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    taskSelected !== null && axios({\r\n      method: \"get\",\r\n      url: `${getEnvUrl('aidarefsets', '4010')}/refsetConcepts?id=${taskSelected.id}`,\r\n      // url: `http://172.21.220.49:4010/refsetConcepts?id=${taskSelected.id}`,\r\n      headers: {\r\n        Authorization: \"Bearer \" + context.token\r\n      }\r\n    }).then(response => {\r\n      if (response.data.success === true) {\r\n        setConcepts(response.data.concepts);\r\n      } else {\r\n        setConcepts([]);\r\n      }\r\n    }).catch(error => {\r\n      setConcepts([]);\r\n    });\r\n  }, [taskSelected, context.token]);\r\n\r\n  const handleSetShowDropConcepts = () => {\r\n    setShowDropConcepts(!showDropConcepts);\r\n  };\r\n\r\n  const handleSelectMultipleConcepts = (event, value) => {\r\n    event.stopPropagation();\r\n    onConceptChange(multipleConcept.filter(x => x.idTask === value.idTask).length > 0 ? multipleConcept.filter(x => x.idTask !== value.idTask) : [...multipleConcept, value]);\r\n    setShowDropConcepts(false);\r\n  };\r\n\r\n  const handleClearMultipleConcepts = () => {\r\n    onConceptChange([]);\r\n    setShowDropConcepts(false);\r\n  };\r\n\r\n  let taskList = context.composition.compositionPlanningTasks;\r\n  let bodyData = [{\r\n    value: multipleConcept,\r\n    placeholder: \"Selecione uma tarefa...\",\r\n    type: \"multiple_dropdown\",\r\n    isDropSelected: showDropConcepts,\r\n    dropList: concepts,\r\n    dropListID: \"idTask\",\r\n    dropListTextID: \"task\",\r\n    handleOpenDrop: handleSetShowDropConcepts,\r\n    handleSetValue: handleSelectMultipleConcepts,\r\n    handleClearValue: handleClearMultipleConcepts\r\n  }];\r\n  return /*#__PURE__*/React.createElement(CompositionPlanningPanel, {\r\n    jsonTitle: props.jsonTitle,\r\n    itemsList: taskList,\r\n    selectedItem: taskSelected,\r\n    handleSelectItem: handleSelectTask,\r\n    handleClearValue: handleClearTask,\r\n    handleOpenDrop: handleSetShowDropTasks,\r\n    showDropList: showDropTasks,\r\n    hasSearchBar: false,\r\n    concepts: concepts,\r\n    dropListID: \"id\",\r\n    dropListTextID: \"name\",\r\n    bodyData: bodyData\r\n  });\r\n};\r\n\r\nexport default TaskSettingsPanel;"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC9D,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,wBAAwB,MAAM,6BAA6B;AAClE,OAAOC,eAAe,MAAM,4CAA4C;AACxE,SAASC,SAAS,QAAQ,+BAA+B;AAEzD,MAAMC,iBAAiB,GAAGC,KAAK,IAAI;EACjC,MAAMC,OAAO,GAAGT,UAAU,CAACK,eAAe,CAAC;EAC3C,MAAM,CAACK,YAAY,EAAEC,OAAO,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACU,aAAa,EAAEC,gBAAgB,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACY,QAAQ,EAAEC,WAAW,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACc,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EAC/D,MAAM;IACJgB,eAAe;IACfC;EACF,CAAC,GAAGX,KAAK;EAET,MAAMY,sBAAsB,GAAG,MAAM;IACnCP,gBAAgB,CAAC,CAACD,aAAa,CAAC;EAClC,CAAC;EAED,MAAMS,gBAAgB,GAAGC,GAAG,IAAI;IAC9BX,OAAO,CAACD,YAAY,KAAK,IAAI,IAAIA,YAAY,CAACa,EAAE,KAAKD,GAAG,CAACC,EAAE,GAAG,IAAI,GAAGD,GAAG,CAAC;IACzEP,WAAW,CAAC,IAAI,CAAC;IACjBF,gBAAgB,CAAC,KAAK,CAAC;EACzB,CAAC;EAED,MAAMW,eAAe,GAAG,MAAM;IAC5Bb,OAAO,CAAC,IAAI,CAAC;IACbI,WAAW,CAAC,IAAI,CAAC;IACjBI,eAAe,CAAC,EAAE,CAAC;IACnBN,gBAAgB,CAAC,KAAK,CAAC;EACzB,CAAC;EAEDZ,SAAS,CAAC,MAAM;IACdS,YAAY,KAAK,IAAI,IAAIP,KAAK,CAAC;MAC7BsB,MAAM,EAAE,KAAK;MACbC,GAAG,EAAG,GAAEpB,SAAS,CAAC,aAAa,EAAE,MAAM,CAAE,sBAAqBI,YAAY,CAACa,EAAG,EAAC;MAC/E;MACAI,OAAO,EAAE;QACPC,aAAa,EAAE,SAAS,GAAGnB,OAAO,CAACoB;MACrC;IACF,CAAC,CAAC,CAACC,IAAI,CAACC,QAAQ,IAAI;MAClB,IAAIA,QAAQ,CAACC,IAAI,CAACC,OAAO,KAAK,IAAI,EAAE;QAClClB,WAAW,CAACgB,QAAQ,CAACC,IAAI,CAAClB,QAAQ,CAAC;MACrC,CAAC,MAAM;QACLC,WAAW,CAAC,EAAE,CAAC;MACjB;IACF,CAAC,CAAC,CAACmB,KAAK,CAACC,KAAK,IAAI;MAChBpB,WAAW,CAAC,EAAE,CAAC;IACjB,CAAC,CAAC;EACJ,CAAC,EAAE,CAACL,YAAY,EAAED,OAAO,CAACoB,KAAK,CAAC,CAAC;EAEjC,MAAMO,yBAAyB,GAAG,MAAM;IACtCnB,mBAAmB,CAAC,CAACD,gBAAgB,CAAC;EACxC,CAAC;EAED,MAAMqB,4BAA4B,GAAG,CAACC,KAAK,EAAEC,KAAK,KAAK;IACrDD,KAAK,CAACE,eAAe,EAAE;IACvBrB,eAAe,CAACD,eAAe,CAACuB,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,MAAM,KAAKJ,KAAK,CAACI,MAAM,CAAC,CAACC,MAAM,GAAG,CAAC,GAAG1B,eAAe,CAACuB,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,MAAM,KAAKJ,KAAK,CAACI,MAAM,CAAC,GAAG,CAAC,GAAGzB,eAAe,EAAEqB,KAAK,CAAC,CAAC;IACzKtB,mBAAmB,CAAC,KAAK,CAAC;EAC5B,CAAC;EAED,MAAM4B,2BAA2B,GAAG,MAAM;IACxC1B,eAAe,CAAC,EAAE,CAAC;IACnBF,mBAAmB,CAAC,KAAK,CAAC;EAC5B,CAAC;EAED,IAAI6B,QAAQ,GAAGrC,OAAO,CAACsC,WAAW,CAACC,wBAAwB;EAC3D,IAAIC,QAAQ,GAAG,CAAC;IACdV,KAAK,EAAErB,eAAe;IACtBgC,WAAW,EAAE,yBAAyB;IACtCC,IAAI,EAAE,mBAAmB;IACzBC,cAAc,EAAEpC,gBAAgB;IAChCqC,QAAQ,EAAEvC,QAAQ;IAClBwC,UAAU,EAAE,QAAQ;IACpBC,cAAc,EAAE,MAAM;IACtBC,cAAc,EAAEpB,yBAAyB;IACzCqB,cAAc,EAAEpB,4BAA4B;IAC5CqB,gBAAgB,EAAEb;EACpB,CAAC,CAAC;EACF,OAAO,aAAa9C,KAAK,CAAC4D,aAAa,CAACvD,wBAAwB,EAAE;IAChEwD,SAAS,EAAEpD,KAAK,CAACoD,SAAS;IAC1BC,SAAS,EAAEf,QAAQ;IACnBgB,YAAY,EAAEpD,YAAY;IAC1BqD,gBAAgB,EAAE1C,gBAAgB;IAClCqC,gBAAgB,EAAElC,eAAe;IACjCgC,cAAc,EAAEpC,sBAAsB;IACtC4C,YAAY,EAAEpD,aAAa;IAC3BqD,YAAY,EAAE,KAAK;IACnBnD,QAAQ,EAAEA,QAAQ;IAClBwC,UAAU,EAAE,IAAI;IAChBC,cAAc,EAAE,MAAM;IACtBN,QAAQ,EAAEA;EACZ,CAAC,CAAC;AACJ,CAAC;AAED,eAAe1C,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}