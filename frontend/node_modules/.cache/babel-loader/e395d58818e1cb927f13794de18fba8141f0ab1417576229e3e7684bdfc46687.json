{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ines_/bee_v2/bee_school/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ines_/bee_v2/bee_school/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ines_/bee_v2/bee_school/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{MapContainer,TileLayer,CircleMarker,Popup}from\"react-leaflet\";import\"leaflet/dist/leaflet.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Record=function Record(props){var heatmapData=Object.entries(props.record.geographical).reduce(function(data,_ref){var _ref2=_slicedToArray(_ref,2),country=_ref2[0],values=_ref2[1];if(country!==\"null\"){var value=values[0];var latitude=values[1];var longitude=values[2];if(latitude!==null&&longitude!==null){data.push({country:country,value:value,coordinates:[latitude,longitude]});}}return data;},[]);return/*#__PURE__*/_jsxs(MapContainer,{className:\"homemap\",center:[0,0],zoomSnap:0,zoom:1.70,doubleClickZoom:false,attributionControl:false,maxBounds:[[90,-180],[-90,180]],children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",noWrap:true}),heatmapData.map(function(data){return/*#__PURE__*/_jsx(CircleMarker,{center:data.coordinates,radius:Math.pow(data.value,1/5)*5,color:\"#F9E076\",fillColor:\"#F9E076\",fillOpacity:0.8,children:/*#__PURE__*/_jsxs(Popup,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Country: \"}),data.country]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Value: \"}),data.value]})]})},data.country);})]});};export default function Map(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),records=_useState2[0],setRecords=_useState2[1];useEffect(function(){function getRecords(){return _getRecords.apply(this,arguments);}function _getRecords(){_getRecords=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,message,records;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://bee-aware-2b421aedee22.herokuapp.com/statistics_general/\");case 2:response=_context.sent;if(response.ok){_context.next=7;break;}message=\"An error occurred: \".concat(response.statusText);window.alert(message);return _context.abrupt(\"return\");case 7:_context.next=9;return response.json();case 9:records=_context.sent;setRecords(records);case 11:case\"end\":return _context.stop();}}},_callee);}));return _getRecords.apply(this,arguments);}getRecords();},[]);return/*#__PURE__*/_jsx(\"div\",{children:records.map(function(record){return/*#__PURE__*/_jsx(Record,{record:record},record._id);})});}","map":{"version":3,"names":["React","useEffect","useState","MapContainer","TileLayer","CircleMarker","Popup","Record","props","heatmapData","Object","entries","record","geographical","reduce","data","country","values","value","latitude","longitude","push","coordinates","map","Map","records","setRecords","getRecords","fetch","response","ok","message","statusText","window","alert","json","_id"],"sources":["C:/Users/ines_/bee_v2/bee_school/frontend/src/views/dashboard/Map.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { MapContainer, TileLayer, CircleMarker, Popup } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\n\nconst Record = (props) => {\n  const heatmapData = Object.entries(props.record.geographical).reduce((data, [country, values]) => {\n    if (country !== \"null\") {\n      const value = values[0]; \n      const latitude = values[1]; \n      const longitude = values[2];\n      \n      if (latitude !== null && longitude !== null) {\n        data.push({\n          country: country,\n          value: value,\n          coordinates: [latitude, longitude],\n        });\n      }\n    }\n    return data;\n  }, []);\n\n  return (\n    <MapContainer className=\"homemap\" center={[0, 0]} zoomSnap={0} zoom={1.70} doubleClickZoom={false} attributionControl={false} maxBounds={[[90, -180], [-90, 180]]}>\n      <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" noWrap={true}/>\n      {heatmapData.map((data) => (\n        <CircleMarker\n          key={data.country}\n          center={data.coordinates}\n          radius= {(data.value) ** (1/5) * 5}\n          color=\"#F9E076\"\n          fillColor=\"#F9E076\"\n          fillOpacity={0.8}\n        >\n          <Popup>\n            <div>\n              <strong>Country: </strong>{data.country}\n            </div>\n            <div>\n              <strong>Value: </strong>{data.value}\n            </div>\n          </Popup>\n        </CircleMarker>\n      ))}\n    </MapContainer>\n  );\n};\n\nexport default function Map() {\n  const [records, setRecords] = useState([]);\n\n  useEffect(() => {\n    async function getRecords() {\n      const response = await fetch(`https://bee-aware-2b421aedee22.herokuapp.com/statistics_general/`);\n\n      if (!response.ok) {\n        const message = `An error occurred: ${response.statusText}`;\n        window.alert(message);\n        return;\n      }\n\n      const records = await response.json();\n      setRecords(records);\n    }\n\n    getRecords();\n  }, []);\n\n  return (\n    <div>\n      {records.map((record) => (\n        <Record record={record} key={record._id} />\n      ))}\n    </div>\n  );\n}\n"],"mappings":"6YAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,YAAY,CAAEC,SAAS,CAAEC,YAAY,CAAEC,KAAK,KAAQ,eAAe,CAC5E,MAAO,0BAA0B,CAAC,wFAElC,GAAMC,OAAM,CAAG,QAATA,OAAM,CAAIC,KAAK,CAAK,CACxB,GAAMC,YAAW,CAAGC,MAAM,CAACC,OAAO,CAACH,KAAK,CAACI,MAAM,CAACC,YAAY,CAAC,CAACC,MAAM,CAAC,SAACC,IAAI,MAAwB,kCAArBC,OAAO,UAAEC,MAAM,UAC1F,GAAID,OAAO,GAAK,MAAM,CAAE,CACtB,GAAME,MAAK,CAAGD,MAAM,CAAC,CAAC,CAAC,CACvB,GAAME,SAAQ,CAAGF,MAAM,CAAC,CAAC,CAAC,CAC1B,GAAMG,UAAS,CAAGH,MAAM,CAAC,CAAC,CAAC,CAE3B,GAAIE,QAAQ,GAAK,IAAI,EAAIC,SAAS,GAAK,IAAI,CAAE,CAC3CL,IAAI,CAACM,IAAI,CAAC,CACRL,OAAO,CAAEA,OAAO,CAChBE,KAAK,CAAEA,KAAK,CACZI,WAAW,CAAE,CAACH,QAAQ,CAAEC,SAAS,CACnC,CAAC,CAAC,CACJ,CACF,CACA,MAAOL,KAAI,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,MAAC,YAAY,EAAC,SAAS,CAAC,SAAS,CAAC,MAAM,CAAE,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,QAAQ,CAAE,CAAE,CAAC,IAAI,CAAE,IAAK,CAAC,eAAe,CAAE,KAAM,CAAC,kBAAkB,CAAE,KAAM,CAAC,SAAS,CAAE,CAAC,CAAC,EAAE,CAAE,CAAC,GAAG,CAAC,CAAE,CAAC,CAAC,EAAE,CAAE,GAAG,CAAC,CAAE,wBAChK,KAAC,SAAS,EAAC,GAAG,CAAC,oDAAoD,CAAC,MAAM,CAAE,IAAK,EAAE,CAClFN,WAAW,CAACc,GAAG,CAAC,SAACR,IAAI,qBACpB,KAAC,YAAY,EAEX,MAAM,CAAEA,IAAI,CAACO,WAAY,CACzB,MAAM,CAAG,SAACP,IAAI,CAACG,KAAK,CAAM,CAAC,CAAC,CAAC,EAAI,CAAE,CACnC,KAAK,CAAC,SAAS,CACf,SAAS,CAAC,SAAS,CACnB,WAAW,CAAE,GAAI,uBAEjB,MAAC,KAAK,yBACJ,oCACE,qCAA0B,CAACH,IAAI,CAACC,OAAO,GACnC,cACN,oCACE,mCAAwB,CAACD,IAAI,CAACG,KAAK,GAC/B,GACA,EAdHH,IAAI,CAACC,OAAO,CAeJ,EAChB,CAAC,GACW,CAEnB,CAAC,CAED,cAAe,SAASQ,IAAG,EAAG,CAC5B,cAA8BtB,QAAQ,CAAC,EAAE,CAAC,wCAAnCuB,OAAO,eAAEC,UAAU,eAE1BzB,SAAS,CAAC,UAAM,SACC0B,WAAU,0IAAzB,wLACyBC,MAAK,oEAAoE,QAA1FC,QAAQ,kBAETA,QAAQ,CAACC,EAAE,yBACRC,OAAO,8BAAyBF,QAAQ,CAACG,UAAU,EACzDC,MAAM,CAACC,KAAK,CAACH,OAAO,CAAC,CAAC,8DAIFF,SAAQ,CAACM,IAAI,EAAE,QAA/BV,OAAO,eACbC,UAAU,CAACD,OAAO,CAAC,CAAC,uDACrB,6CAEDE,UAAU,EAAE,CACd,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,qBACGF,OAAO,CAACF,GAAG,CAAC,SAACX,MAAM,qBAClB,KAAC,MAAM,EAAC,MAAM,CAAEA,MAAO,EAAMA,MAAM,CAACwB,GAAG,CAAI,EAC5C,CAAC,EACE,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}