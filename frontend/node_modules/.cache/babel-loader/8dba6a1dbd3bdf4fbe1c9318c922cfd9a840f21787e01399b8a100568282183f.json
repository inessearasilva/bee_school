{"ast":null,"code":"import * as Yup from \"yup\";\nimport { handleIfMandatoryValidation } from \"../../../../assets/functions/HandleRules/handleIfMandatoryValidation\";\nimport { handleConditionValidation } from \"../../../../assets/functions/HandleRules/handleConditionValidation\";\nimport { handleRules } from \"../../../../assets/functions/HandleRules/handleRules\";\nimport { handleRequiredValidation } from \"../../../../assets/functions/HandleSectionValidation/handleRequiredValidation\";\nimport { handleRequiredSection } from \"../../../../assets/functions/HandleSectionValidation/handleRequiredSection\";\nimport { validatePhoneNumber } from \"../../../../assets/functions/ValidatePhoneNumber/validatePhoneNumber\"; // ATENÇÃO: CADA NOVA VALIDAÇÃO DEVE VER SE O CAMPO É VISÍVEL!\n\nconst buildIdentifierValidation = (item, pathLabel, cardinalityObject, validationSchema, itemSection, sectionValidation, multipleSections) => {\n  const checkMandatory = handleIfMandatoryValidation(item);\n  if (item.occurrences.upperOccurrences === 1) {\n    if (item.occurrences.lowerOccurrences === 1 && item.occurrences.upperOccurrences === 1) {\n      validationSchema[pathLabel] = Yup.string().test(\"required\", \"Campo obrigatório\", function (value) {\n        const isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        const passedRequired = handleRequiredValidation(value, this.parent, itemSection);\n        if (passedRequired) {\n          return true;\n        } else {\n          return false;\n        }\n      }).test(\"isPhoneNumber\", \"O contacto está inválido: deve ter 9 dígitos\", function (value) {\n        const isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        if (item.isPhoneNumber === true) {\n          if (value === undefined || value === \"\") {\n            return true;\n          } else {\n            if (validatePhoneNumber(value) === false) {\n              return false;\n            }\n            return true;\n          }\n        } else {\n          return true;\n        }\n      }).test(\"section-validation\", function (value) {\n        const isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          const sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      }).test(\"at-least-one\", function (value) {\n        const isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          const sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      });\n    } else if (item.occurrences.lowerOccurrences === 0 && item.occurrences.upperOccurrences === 1) {\n      validationSchema[pathLabel] = Yup.string().test(\"section-validation\", function (value) {\n        const isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          const sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      }).test(\"isPhoneNumber\", \"O contacto está inválido: deve ter 9 dígitos\", function (value) {\n        const isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        if (item.isPhoneNumber === true) {\n          if (value === undefined || value === \"\") {\n            return true;\n          } else {\n            if (validatePhoneNumber(value) === false) {\n              return false;\n            }\n            return true;\n          }\n        } else {\n          return true;\n        }\n      }).test(\"at-least-one\", function (value) {\n        const isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n        if (res === true) {\n          return true;\n        } else {\n          const sectionsError = res;\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      }).test(\"rule-mandatory\", \"Campo obrigatório\", function (value) {\n        const isVisible = handleRules(item, this.parent, \"visibility\");\n        if (!isVisible) {\n          return true;\n        }\n        if (!checkMandatory) {\n          return true;\n        } else {\n          let i;\n          for (i = 0; i < item.ruleMandatory.length; i++) {\n            const rule = item.ruleMandatory[i];\n            let mandatory;\n            if (rule[\"$or\"]) {\n              mandatory = false;\n              let j;\n              const conditionsArray = rule[\"$or\"];\n              for (j = 0; j < conditionsArray.length; j++) {\n                const condition = conditionsArray[j];\n                const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\n                const conditionValidation = handleConditionValidation(condition, this.parent[path]);\n                if (conditionValidation) {\n                  mandatory = true;\n                  break;\n                }\n              }\n            } else if (rule[\"$and\"]) {\n              mandatory = true;\n              let j;\n              const conditionsArray = rule[\"$and\"];\n              for (j = 0; j < conditionsArray.length; j++) {\n                const condition = conditionsArray[j];\n                const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\n                const conditionValidation = handleConditionValidation(condition, this.parent[path]);\n                if (!conditionValidation) {\n                  mandatory = false;\n                  break;\n                }\n              }\n            }\n            if (!mandatory) {\n              return true;\n            } else {\n              if (value === \"\" || value === undefined) {\n                return false;\n              } else if (Array.isArray(value)) {\n                if (value.length === 0) {\n                  return false;\n                } else if (value[0].identifierId !== undefined && value.filter(obj => obj.value !== \"\").length === 0) {\n                  return false;\n                } else if (value[0].textId !== undefined && value.filter(obj => obj.value.getCurrentContent().hasText()).length === 0) {\n                  return false;\n                } else {\n                  return true;\n                }\n              } else if (value._immutable !== undefined) {\n                if (!value.getCurrentContent().hasText()) {\n                  return false;\n                } else {\n                  return true;\n                }\n              } else {\n                return true;\n              }\n            }\n          }\n        }\n      });\n    }\n  } else {\n    if (item.occurrences.lowerOccurrences === 0) {\n      if (item.occurrences.upperOccurrences === \"*\") {\n        validationSchema[pathLabel] = Yup.array().test(\"section-validation\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n          if (!isVisible) {\n            return true;\n          }\n          const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n          if (res === true) {\n            return true;\n          } else {\n            const sectionsError = res;\n            if (sectionsError.length > 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            } else if (sectionsError.length === 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            }\n          }\n        }).test(\"at-least-one\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n          if (!isVisible) {\n            return true;\n          }\n          const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n          if (res === true) {\n            return true;\n          } else {\n            const sectionsError = res;\n            if (sectionsError.length > 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            } else if (sectionsError.length === 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            }\n          }\n        }).test(\"rule-mandatory\", \"Campo obrigatório\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n          if (!isVisible) {\n            return true;\n          }\n          if (!checkMandatory) {\n            return true;\n          } else {\n            let i;\n            for (i = 0; i < item.ruleMandatory.length; i++) {\n              const rule = item.ruleMandatory[i];\n              let mandatory;\n              if (rule[\"$or\"]) {\n                mandatory = false;\n                let j;\n                const conditionsArray = rule[\"$or\"];\n                for (j = 0; j < conditionsArray.length; j++) {\n                  const condition = conditionsArray[j];\n                  const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\n                  const conditionValidation = handleConditionValidation(condition, this.parent[path]);\n                  if (conditionValidation) {\n                    mandatory = true;\n                    break;\n                  }\n                }\n              } else if (rule[\"$and\"]) {\n                mandatory = true;\n                let j;\n                const conditionsArray = rule[\"$and\"];\n                for (j = 0; j < conditionsArray.length; j++) {\n                  const condition = conditionsArray[j];\n                  const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\n                  const conditionValidation = handleConditionValidation(condition, this.parent[path]);\n                  if (!conditionValidation) {\n                    mandatory = false;\n                    break;\n                  }\n                }\n              }\n              if (!mandatory) {\n                return true;\n              } else {\n                if (value === \"\" || value === undefined) {\n                  return false;\n                } else if (Array.isArray(value)) {\n                  if (value.length === 0) {\n                    return false;\n                  } else if (value[0].identifierId !== undefined && value.filter(obj => obj.value !== \"\").length === 0) {\n                    return false;\n                  } else if (value[0].textId !== undefined && value.filter(obj => obj.value.getCurrentContent().hasText()).length === 0) {\n                    return false;\n                  } else {\n                    return true;\n                  }\n                } else if (value._immutable !== undefined) {\n                  if (!value.getCurrentContent().hasText()) {\n                    return false;\n                  } else {\n                    return true;\n                  }\n                } else {\n                  return true;\n                }\n              }\n            }\n          }\n        });\n      } else {\n        validationSchema[pathLabel] = Yup.array().test(\"max-length\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n          if (!isVisible) {\n            return true;\n          }\n          let writtenFields = 0;\n          value.forEach(function (obj) {\n            if (obj.value !== \"\") {\n              writtenFields += 1;\n            }\n          });\n          if (writtenFields > item.occurrences.upperOccurrences) {\n            return this.createError({\n              message: \"Campo inválido: limite máximo de \" + item.occurrences.upperOccurrences + \" itens\"\n            });\n          }\n          return true;\n        }).test(\"section-validation\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n          if (!isVisible) {\n            return true;\n          }\n          const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n          if (res === true) {\n            return true;\n          } else {\n            const sectionsError = res;\n            if (sectionsError.length > 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            } else if (sectionsError.length === 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            }\n          }\n        }).test(\"at-least-one\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n          if (!isVisible) {\n            return true;\n          }\n          const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n          if (res === true) {\n            return true;\n          } else {\n            const sectionsError = res;\n            if (sectionsError.length > 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            } else if (sectionsError.length === 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            }\n          }\n        }).test(\"rule-mandatory\", \"Campo obrigatório\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n          if (!isVisible) {\n            return true;\n          }\n          if (!checkMandatory) {\n            return true;\n          } else {\n            let i;\n            for (i = 0; i < item.ruleMandatory.length; i++) {\n              const rule = item.ruleMandatory[i];\n              let mandatory;\n              if (rule[\"$or\"]) {\n                mandatory = false;\n                let j;\n                const conditionsArray = rule[\"$or\"];\n                for (j = 0; j < conditionsArray.length; j++) {\n                  const condition = conditionsArray[j];\n                  const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\n                  const conditionValidation = handleConditionValidation(condition, this.parent[path]);\n                  if (conditionValidation) {\n                    mandatory = true;\n                    break;\n                  }\n                }\n              } else if (rule[\"$and\"]) {\n                mandatory = true;\n                let j;\n                const conditionsArray = rule[\"$and\"];\n                for (j = 0; j < conditionsArray.length; j++) {\n                  const condition = conditionsArray[j];\n                  const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\n                  const conditionValidation = handleConditionValidation(condition, this.parent[path]);\n                  if (!conditionValidation) {\n                    mandatory = false;\n                    break;\n                  }\n                }\n              }\n              if (!mandatory) {\n                return true;\n              } else {\n                if (value === \"\" || value === undefined) {\n                  return false;\n                } else if (Array.isArray(value)) {\n                  if (value.length === 0) {\n                    return false;\n                  } else if (value[0].identifierId !== undefined && value.filter(obj => obj.value !== \"\").length === 0) {\n                    return false;\n                  } else if (value[0].textId !== undefined && value.filter(obj => obj.value.getCurrentContent().hasText()).length === 0) {\n                    return false;\n                  } else {\n                    return true;\n                  }\n                } else if (value._immutable !== undefined) {\n                  if (!value.getCurrentContent().hasText()) {\n                    return false;\n                  } else {\n                    return true;\n                  }\n                } else {\n                  return true;\n                }\n              }\n            }\n          }\n        });\n      }\n    } else if (item.occurrences.lowerOccurrences >= 1) {\n      if (item.occurrences.upperOccurrences === \"*\") {\n        validationSchema[pathLabel] = Yup.array().test(pathLabel, \"Campo obrigatório\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n          if (!isVisible) {\n            return true;\n          }\n          const passedRequired = handleRequiredValidation(value, this.parent, itemSection);\n          if (passedRequired) {\n            return true;\n          } else {\n            return false;\n          }\n        }).test(\"min-length\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n          if (!isVisible) {\n            return true;\n          }\n          let writtenFields = 0;\n          value.forEach(function (obj) {\n            if (obj.value !== \"\") {\n              writtenFields += 1;\n            }\n          });\n          if (writtenFields >= 1) {\n            if (writtenFields < item.occurrences.lowerOccurrences) {\n              if (item.occurrences.lowerOccurrences === 1) {\n                return this.createError({\n                  message: \"Campo inválido: limite mínimo de \" + item.occurrences.lowerOccurrences + \" item\"\n                });\n              } else {\n                return this.createError({\n                  message: \"Campo inválido: limite mínimo de \" + item.occurrences.lowerOccurrences + \" itens\"\n                });\n              }\n            }\n          }\n          return true;\n        }).test(\"section-validation\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n          if (!isVisible) {\n            return true;\n          }\n          const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n          if (res === true) {\n            return true;\n          } else {\n            const sectionsError = res;\n            if (sectionsError.length > 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            } else if (sectionsError.length === 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            }\n          }\n        }).test(\"at-least-one\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n          if (!isVisible) {\n            return true;\n          }\n          const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n          if (res === true) {\n            return true;\n          } else {\n            const sectionsError = res;\n            if (sectionsError.length > 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            } else if (sectionsError.length === 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            }\n          }\n        });\n      } else {\n        validationSchema[pathLabel] = Yup.array().test(pathLabel, \"Campo obrigatório\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n          if (!isVisible) {\n            return true;\n          }\n          const passedRequired = handleRequiredValidation(value, this.parent, itemSection);\n          if (passedRequired) {\n            return true;\n          } else {\n            return false;\n          }\n        }).test(\"min-length\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n          if (!isVisible) {\n            return true;\n          }\n          let writtenFields = 0;\n          value.forEach(function (obj) {\n            if (obj.value !== \"\") {\n              writtenFields += 1;\n            }\n          });\n          if (writtenFields >= 1) {\n            if (writtenFields < item.occurrences.lowerOccurrences) {\n              if (item.occurrences.lowerOccurrences === 1) {\n                return this.createError({\n                  message: \"Campo inválido: limite mínimo de \" + item.occurrences.lowerOccurrences + \" item\"\n                });\n              } else {\n                return this.createError({\n                  message: \"Campo inválido: limite mínimo de \" + item.occurrences.lowerOccurrences + \" itens\"\n                });\n              }\n            }\n          }\n          return true;\n        }).test(\"max-length\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n          if (!isVisible) {\n            return true;\n          }\n          let writtenFields = 0;\n          value.forEach(function (obj) {\n            if (obj.value !== \"\") {\n              writtenFields += 1;\n            }\n          });\n          if (writtenFields >= 1) {\n            if (writtenFields > item.occurrences.upperOccurrences) {\n              return this.createError({\n                message: \"Campo inválido: limite máximo de \" + item.occurrences.upperOccurrences + \" itens\"\n              });\n            }\n          }\n          return true;\n        }).test(\"section-validation\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n          if (!isVisible) {\n            return true;\n          }\n          const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n          if (res === true) {\n            return true;\n          } else {\n            const sectionsError = res;\n            if (sectionsError.length > 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            } else if (sectionsError.length === 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            }\n          }\n        }).test(\"at-least-one\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n          if (!isVisible) {\n            return true;\n          }\n          const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n          if (res === true) {\n            return true;\n          } else {\n            const sectionsError = res;\n            if (sectionsError.length > 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            } else if (sectionsError.length === 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            }\n          }\n        });\n      }\n    }\n  }\n};\nexport { buildIdentifierValidation };","map":{"version":3,"names":["Yup","handleIfMandatoryValidation","handleConditionValidation","handleRules","handleRequiredValidation","handleRequiredSection","validatePhoneNumber","buildIdentifierValidation","item","pathLabel","cardinalityObject","validationSchema","itemSection","sectionValidation","multipleSections","checkMandatory","occurrences","upperOccurrences","lowerOccurrences","string","test","value","isVisible","parent","passedRequired","isPhoneNumber","undefined","res","sectionsError","length","createError","message","toString","toLocaleLowerCase","i","ruleMandatory","rule","mandatory","j","conditionsArray","condition","path","split","join","conditionValidation","Array","isArray","identifierId","filter","obj","textId","getCurrentContent","hasText","_immutable","array","writtenFields","forEach"],"sources":["C:/Users/ines_/fisiosys/frontend/node_modules/protected-aidaforms/dist/containers/Form/FormValidation/BuildIdentifierValidation/BuildIdentifierValidation.js"],"sourcesContent":["import * as Yup from \"yup\";\nimport { handleIfMandatoryValidation } from \"../../../../assets/functions/HandleRules/handleIfMandatoryValidation\";\nimport { handleConditionValidation } from \"../../../../assets/functions/HandleRules/handleConditionValidation\";\nimport { handleRules } from \"../../../../assets/functions/HandleRules/handleRules\";\nimport { handleRequiredValidation } from \"../../../../assets/functions/HandleSectionValidation/handleRequiredValidation\";\nimport { handleRequiredSection } from \"../../../../assets/functions/HandleSectionValidation/handleRequiredSection\";\nimport { validatePhoneNumber } from \"../../../../assets/functions/ValidatePhoneNumber/validatePhoneNumber\"; // ATENÇÃO: CADA NOVA VALIDAÇÃO DEVE VER SE O CAMPO É VISÍVEL!\n\nconst buildIdentifierValidation = (item, pathLabel, cardinalityObject, validationSchema, itemSection, sectionValidation, multipleSections) => {\n  const checkMandatory = handleIfMandatoryValidation(item);\n\n  if (item.occurrences.upperOccurrences === 1) {\n    if (item.occurrences.lowerOccurrences === 1 && item.occurrences.upperOccurrences === 1) {\n      validationSchema[pathLabel] = Yup.string().test(\"required\", \"Campo obrigatório\", function (value) {\n        const isVisible = handleRules(item, this.parent, \"visibility\");\n\n        if (!isVisible) {\n          return true;\n        }\n\n        const passedRequired = handleRequiredValidation(value, this.parent, itemSection);\n\n        if (passedRequired) {\n          return true;\n        } else {\n          return false;\n        }\n      }).test(\"isPhoneNumber\", \"O contacto está inválido: deve ter 9 dígitos\", function (value) {\n        const isVisible = handleRules(item, this.parent, \"visibility\");\n\n        if (!isVisible) {\n          return true;\n        }\n\n        if (item.isPhoneNumber === true) {\n          if (value === undefined || value === \"\") {\n            return true;\n          } else {\n            if (validatePhoneNumber(value) === false) {\n              return false;\n            }\n\n            return true;\n          }\n        } else {\n          return true;\n        }\n      }).test(\"section-validation\", function (value) {\n        const isVisible = handleRules(item, this.parent, \"visibility\");\n\n        if (!isVisible) {\n          return true;\n        }\n\n        const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n\n        if (res === true) {\n          return true;\n        } else {\n          const sectionsError = res;\n\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      }).test(\"at-least-one\", function (value) {\n        const isVisible = handleRules(item, this.parent, \"visibility\");\n\n        if (!isVisible) {\n          return true;\n        }\n\n        const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n\n        if (res === true) {\n          return true;\n        } else {\n          const sectionsError = res;\n\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      });\n    } else if (item.occurrences.lowerOccurrences === 0 && item.occurrences.upperOccurrences === 1) {\n      validationSchema[pathLabel] = Yup.string().test(\"section-validation\", function (value) {\n        const isVisible = handleRules(item, this.parent, \"visibility\");\n\n        if (!isVisible) {\n          return true;\n        }\n\n        const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n\n        if (res === true) {\n          return true;\n        } else {\n          const sectionsError = res;\n\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      }).test(\"isPhoneNumber\", \"O contacto está inválido: deve ter 9 dígitos\", function (value) {\n        const isVisible = handleRules(item, this.parent, \"visibility\");\n\n        if (!isVisible) {\n          return true;\n        }\n\n        if (item.isPhoneNumber === true) {\n          if (value === undefined || value === \"\") {\n            return true;\n          } else {\n            if (validatePhoneNumber(value) === false) {\n              return false;\n            }\n\n            return true;\n          }\n        } else {\n          return true;\n        }\n      }).test(\"at-least-one\", function (value) {\n        const isVisible = handleRules(item, this.parent, \"visibility\");\n\n        if (!isVisible) {\n          return true;\n        }\n\n        const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n\n        if (res === true) {\n          return true;\n        } else {\n          const sectionsError = res;\n\n          if (sectionsError.length > 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          } else if (sectionsError.length === 1) {\n            return this.createError({\n              message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n            });\n          }\n        }\n      }).test(\"rule-mandatory\", \"Campo obrigatório\", function (value) {\n        const isVisible = handleRules(item, this.parent, \"visibility\");\n\n        if (!isVisible) {\n          return true;\n        }\n\n        if (!checkMandatory) {\n          return true;\n        } else {\n          let i;\n\n          for (i = 0; i < item.ruleMandatory.length; i++) {\n            const rule = item.ruleMandatory[i];\n            let mandatory;\n\n            if (rule[\"$or\"]) {\n              mandatory = false;\n              let j;\n              const conditionsArray = rule[\"$or\"];\n\n              for (j = 0; j < conditionsArray.length; j++) {\n                const condition = conditionsArray[j];\n                const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\n                const conditionValidation = handleConditionValidation(condition, this.parent[path]);\n\n                if (conditionValidation) {\n                  mandatory = true;\n                  break;\n                }\n              }\n            } else if (rule[\"$and\"]) {\n              mandatory = true;\n              let j;\n              const conditionsArray = rule[\"$and\"];\n\n              for (j = 0; j < conditionsArray.length; j++) {\n                const condition = conditionsArray[j];\n                const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\n                const conditionValidation = handleConditionValidation(condition, this.parent[path]);\n\n                if (!conditionValidation) {\n                  mandatory = false;\n                  break;\n                }\n              }\n            }\n\n            if (!mandatory) {\n              return true;\n            } else {\n              if (value === \"\" || value === undefined) {\n                return false;\n              } else if (Array.isArray(value)) {\n                if (value.length === 0) {\n                  return false;\n                } else if (value[0].identifierId !== undefined && value.filter(obj => obj.value !== \"\").length === 0) {\n                  return false;\n                } else if (value[0].textId !== undefined && value.filter(obj => obj.value.getCurrentContent().hasText()).length === 0) {\n                  return false;\n                } else {\n                  return true;\n                }\n              } else if (value._immutable !== undefined) {\n                if (!value.getCurrentContent().hasText()) {\n                  return false;\n                } else {\n                  return true;\n                }\n              } else {\n                return true;\n              }\n            }\n          }\n        }\n      });\n    }\n  } else {\n    if (item.occurrences.lowerOccurrences === 0) {\n      if (item.occurrences.upperOccurrences === \"*\") {\n        validationSchema[pathLabel] = Yup.array().test(\"section-validation\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n\n          if (!isVisible) {\n            return true;\n          }\n\n          const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n\n          if (res === true) {\n            return true;\n          } else {\n            const sectionsError = res;\n\n            if (sectionsError.length > 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            } else if (sectionsError.length === 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            }\n          }\n        }).test(\"at-least-one\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n\n          if (!isVisible) {\n            return true;\n          }\n\n          const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n\n          if (res === true) {\n            return true;\n          } else {\n            const sectionsError = res;\n\n            if (sectionsError.length > 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            } else if (sectionsError.length === 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            }\n          }\n        }).test(\"rule-mandatory\", \"Campo obrigatório\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n\n          if (!isVisible) {\n            return true;\n          }\n\n          if (!checkMandatory) {\n            return true;\n          } else {\n            let i;\n\n            for (i = 0; i < item.ruleMandatory.length; i++) {\n              const rule = item.ruleMandatory[i];\n              let mandatory;\n\n              if (rule[\"$or\"]) {\n                mandatory = false;\n                let j;\n                const conditionsArray = rule[\"$or\"];\n\n                for (j = 0; j < conditionsArray.length; j++) {\n                  const condition = conditionsArray[j];\n                  const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\n                  const conditionValidation = handleConditionValidation(condition, this.parent[path]);\n\n                  if (conditionValidation) {\n                    mandatory = true;\n                    break;\n                  }\n                }\n              } else if (rule[\"$and\"]) {\n                mandatory = true;\n                let j;\n                const conditionsArray = rule[\"$and\"];\n\n                for (j = 0; j < conditionsArray.length; j++) {\n                  const condition = conditionsArray[j];\n                  const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\n                  const conditionValidation = handleConditionValidation(condition, this.parent[path]);\n\n                  if (!conditionValidation) {\n                    mandatory = false;\n                    break;\n                  }\n                }\n              }\n\n              if (!mandatory) {\n                return true;\n              } else {\n                if (value === \"\" || value === undefined) {\n                  return false;\n                } else if (Array.isArray(value)) {\n                  if (value.length === 0) {\n                    return false;\n                  } else if (value[0].identifierId !== undefined && value.filter(obj => obj.value !== \"\").length === 0) {\n                    return false;\n                  } else if (value[0].textId !== undefined && value.filter(obj => obj.value.getCurrentContent().hasText()).length === 0) {\n                    return false;\n                  } else {\n                    return true;\n                  }\n                } else if (value._immutable !== undefined) {\n                  if (!value.getCurrentContent().hasText()) {\n                    return false;\n                  } else {\n                    return true;\n                  }\n                } else {\n                  return true;\n                }\n              }\n            }\n          }\n        });\n      } else {\n        validationSchema[pathLabel] = Yup.array().test(\"max-length\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n\n          if (!isVisible) {\n            return true;\n          }\n\n          let writtenFields = 0;\n          value.forEach(function (obj) {\n            if (obj.value !== \"\") {\n              writtenFields += 1;\n            }\n          });\n\n          if (writtenFields > item.occurrences.upperOccurrences) {\n            return this.createError({\n              message: \"Campo inválido: limite máximo de \" + item.occurrences.upperOccurrences + \" itens\"\n            });\n          }\n\n          return true;\n        }).test(\"section-validation\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n\n          if (!isVisible) {\n            return true;\n          }\n\n          const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n\n          if (res === true) {\n            return true;\n          } else {\n            const sectionsError = res;\n\n            if (sectionsError.length > 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            } else if (sectionsError.length === 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            }\n          }\n        }).test(\"at-least-one\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n\n          if (!isVisible) {\n            return true;\n          }\n\n          const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n\n          if (res === true) {\n            return true;\n          } else {\n            const sectionsError = res;\n\n            if (sectionsError.length > 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            } else if (sectionsError.length === 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            }\n          }\n        }).test(\"rule-mandatory\", \"Campo obrigatório\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n\n          if (!isVisible) {\n            return true;\n          }\n\n          if (!checkMandatory) {\n            return true;\n          } else {\n            let i;\n\n            for (i = 0; i < item.ruleMandatory.length; i++) {\n              const rule = item.ruleMandatory[i];\n              let mandatory;\n\n              if (rule[\"$or\"]) {\n                mandatory = false;\n                let j;\n                const conditionsArray = rule[\"$or\"];\n\n                for (j = 0; j < conditionsArray.length; j++) {\n                  const condition = conditionsArray[j];\n                  const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\n                  const conditionValidation = handleConditionValidation(condition, this.parent[path]);\n\n                  if (conditionValidation) {\n                    mandatory = true;\n                    break;\n                  }\n                }\n              } else if (rule[\"$and\"]) {\n                mandatory = true;\n                let j;\n                const conditionsArray = rule[\"$and\"];\n\n                for (j = 0; j < conditionsArray.length; j++) {\n                  const condition = conditionsArray[j];\n                  const path = condition[\"$ItemPath\"].split(\".\").join(\"-\");\n                  const conditionValidation = handleConditionValidation(condition, this.parent[path]);\n\n                  if (!conditionValidation) {\n                    mandatory = false;\n                    break;\n                  }\n                }\n              }\n\n              if (!mandatory) {\n                return true;\n              } else {\n                if (value === \"\" || value === undefined) {\n                  return false;\n                } else if (Array.isArray(value)) {\n                  if (value.length === 0) {\n                    return false;\n                  } else if (value[0].identifierId !== undefined && value.filter(obj => obj.value !== \"\").length === 0) {\n                    return false;\n                  } else if (value[0].textId !== undefined && value.filter(obj => obj.value.getCurrentContent().hasText()).length === 0) {\n                    return false;\n                  } else {\n                    return true;\n                  }\n                } else if (value._immutable !== undefined) {\n                  if (!value.getCurrentContent().hasText()) {\n                    return false;\n                  } else {\n                    return true;\n                  }\n                } else {\n                  return true;\n                }\n              }\n            }\n          }\n        });\n      }\n    } else if (item.occurrences.lowerOccurrences >= 1) {\n      if (item.occurrences.upperOccurrences === \"*\") {\n        validationSchema[pathLabel] = Yup.array().test(pathLabel, \"Campo obrigatório\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n\n          if (!isVisible) {\n            return true;\n          }\n\n          const passedRequired = handleRequiredValidation(value, this.parent, itemSection);\n\n          if (passedRequired) {\n            return true;\n          } else {\n            return false;\n          }\n        }).test(\"min-length\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n\n          if (!isVisible) {\n            return true;\n          }\n\n          let writtenFields = 0;\n          value.forEach(function (obj) {\n            if (obj.value !== \"\") {\n              writtenFields += 1;\n            }\n          });\n\n          if (writtenFields >= 1) {\n            if (writtenFields < item.occurrences.lowerOccurrences) {\n              if (item.occurrences.lowerOccurrences === 1) {\n                return this.createError({\n                  message: \"Campo inválido: limite mínimo de \" + item.occurrences.lowerOccurrences + \" item\"\n                });\n              } else {\n                return this.createError({\n                  message: \"Campo inválido: limite mínimo de \" + item.occurrences.lowerOccurrences + \" itens\"\n                });\n              }\n            }\n          }\n\n          return true;\n        }).test(\"section-validation\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n\n          if (!isVisible) {\n            return true;\n          }\n\n          const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n\n          if (res === true) {\n            return true;\n          } else {\n            const sectionsError = res;\n\n            if (sectionsError.length > 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            } else if (sectionsError.length === 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            }\n          }\n        }).test(\"at-least-one\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n\n          if (!isVisible) {\n            return true;\n          }\n\n          const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n\n          if (res === true) {\n            return true;\n          } else {\n            const sectionsError = res;\n\n            if (sectionsError.length > 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            } else if (sectionsError.length === 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            }\n          }\n        });\n      } else {\n        validationSchema[pathLabel] = Yup.array().test(pathLabel, \"Campo obrigatório\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n\n          if (!isVisible) {\n            return true;\n          }\n\n          const passedRequired = handleRequiredValidation(value, this.parent, itemSection);\n\n          if (passedRequired) {\n            return true;\n          } else {\n            return false;\n          }\n        }).test(\"min-length\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n\n          if (!isVisible) {\n            return true;\n          }\n\n          let writtenFields = 0;\n          value.forEach(function (obj) {\n            if (obj.value !== \"\") {\n              writtenFields += 1;\n            }\n          });\n\n          if (writtenFields >= 1) {\n            if (writtenFields < item.occurrences.lowerOccurrences) {\n              if (item.occurrences.lowerOccurrences === 1) {\n                return this.createError({\n                  message: \"Campo inválido: limite mínimo de \" + item.occurrences.lowerOccurrences + \" item\"\n                });\n              } else {\n                return this.createError({\n                  message: \"Campo inválido: limite mínimo de \" + item.occurrences.lowerOccurrences + \" itens\"\n                });\n              }\n            }\n          }\n\n          return true;\n        }).test(\"max-length\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n\n          if (!isVisible) {\n            return true;\n          }\n\n          let writtenFields = 0;\n          value.forEach(function (obj) {\n            if (obj.value !== \"\") {\n              writtenFields += 1;\n            }\n          });\n\n          if (writtenFields >= 1) {\n            if (writtenFields > item.occurrences.upperOccurrences) {\n              return this.createError({\n                message: \"Campo inválido: limite máximo de \" + item.occurrences.upperOccurrences + \" itens\"\n              });\n            }\n          }\n\n          return true;\n        }).test(\"section-validation\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n\n          if (!isVisible) {\n            return true;\n          }\n\n          const res = handleRequiredSection(sectionValidation, pathLabel, this.parent, multipleSections);\n\n          if (res === true) {\n            return true;\n          } else {\n            const sectionsError = res;\n\n            if (sectionsError.length > 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            } else if (sectionsError.length === 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            }\n          }\n        }).test(\"at-least-one\", function (value) {\n          const isVisible = handleRules(item, this.parent, \"visibility\");\n\n          if (!isVisible) {\n            return true;\n          }\n\n          const res = handleRequiredSection(cardinalityObject, pathLabel, this.parent, multipleSections);\n\n          if (res === true) {\n            return true;\n          } else {\n            const sectionsError = res;\n\n            if (sectionsError.length > 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos nas secções: \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            } else if (sectionsError.length === 1) {\n              return this.createError({\n                message: \"Precisa de preencher mais campos na secção \" + sectionsError.toString().toLocaleLowerCase()\n              });\n            }\n          }\n        });\n      }\n    }\n  }\n};\n\nexport { buildIdentifierValidation };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}