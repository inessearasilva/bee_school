{"ast":null,"code":"import React, { useContext, useEffect } from \"react\";\nimport Multimedia from \"../../../../../components/FormDesigner/Datatypes/Multimedia/Multimedia\";\nimport { buildInitialValueEditMode } from \"../../../FormInitialValues/BuildInitialValue/BuildInitialValue\";\nimport { firstAnyItem } from \"../../../../../assets/functions/FirstAnyItem/FirstAnyItem\";\nimport { mapFileExtension } from \"../../../../../assets/functions/HandleMultimediaFiles/mapFileExtension\";\nimport { getItemsList } from \"../../../../../assets/data/SidebarData\";\nimport CombinedContext from \"../../../../../contexts/CombinedContext\";\nconst BuildMultimediaFormDesigner = (item, itemIndex, pathArray, setFieldValue, values, isAny, itemSection, initialValues, handleFormOrder, formOrder) => {\n  const isRM = pathArray[0] === \"rm\" ? true : false;\n  const label = isRM ? item.itemName : item.node === null ? item.text : item.node.text;\n  let array = [];\n  array.push(\"value\");\n  const pathLabel = pathArray.concat(array).join(\"-\");\n  buildInitialValueEditMode(item, pathLabel, initialValues);\n  const context = useContext(CombinedContext); // Para verificar se existe alguma restrição de extensão do archetypeDesigner\n\n  useEffect(() => {\n    if (item.itemsList !== undefined && item.itemsList.length > 0) {\n      // vai buscar o mapeamento\n      let idInitialExtension = mapFileExtension(item.itemsList, \"\"); // vai buscar a lista de restrições\n\n      let items = getItemsList(\"\"); // atualiza a restrição para o valor que vem do archetypeDesigner, caso este seja contemplado no mapeamento\n      // caso contrário coloca a opção default - Todos os Ficheiros (id=0)\n\n      context.datatypes.handleFileExtensions(pathArray.join(\".\"), Object.values(items).filter(i => idInitialExtension === 9 ? i.id === 0 : i.id === idInitialExtension));\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(Multimedia, {\n    isRM: isRM,\n    data: isRM && item,\n    isSection: false,\n    groupID: item.groupID,\n    path: pathArray.join(\".\"),\n    handleFormOrder: handleFormOrder,\n    order: formOrder ? formOrder[pathArray.join(\".\")] : null,\n    item: item,\n    key: itemIndex,\n    isAny: isAny,\n    showLabel: !isAny || (formOrder ? firstAnyItem(formOrder, pathArray, isAny) : itemIndex === 0),\n    value: values[pathLabel],\n    onMultimediaChange: setFieldValue,\n    label: label,\n    pathLabel: pathLabel,\n    optional: item.occurrences.lowerOccurrences === 0,\n    sectionOccurrence: itemSection[itemSection.length - 1],\n    description: isRM ? item.description : item.node === null ? \"\" : item.node.description\n  });\n};\nexport default BuildMultimediaFormDesigner;","map":{"version":3,"names":["React","useContext","useEffect","Multimedia","buildInitialValueEditMode","firstAnyItem","mapFileExtension","getItemsList","CombinedContext","BuildMultimediaFormDesigner","item","itemIndex","pathArray","setFieldValue","values","isAny","itemSection","initialValues","handleFormOrder","formOrder","isRM","label","itemName","node","text","array","push","pathLabel","concat","join","context","itemsList","undefined","length","idInitialExtension","items","datatypes","handleFileExtensions","Object","filter","i","id","createElement","data","isSection","groupID","path","order","key","showLabel","value","onMultimediaChange","optional","occurrences","lowerOccurrences","sectionOccurrence","description"],"sources":["C:/Users/ines_/Desktop/fisiosys/fisiosys/frontend/node_modules/protected-aidaforms/dist/containers/Form/BuildItems/BuildItemDesignerMode/BuildMultimedia/BuildMultimedia.js"],"sourcesContent":["import React, { useContext, useEffect } from \"react\";\r\nimport Multimedia from \"../../../../../components/FormDesigner/Datatypes/Multimedia/Multimedia\";\r\nimport { buildInitialValueEditMode } from \"../../../FormInitialValues/BuildInitialValue/BuildInitialValue\";\r\nimport { firstAnyItem } from \"../../../../../assets/functions/FirstAnyItem/FirstAnyItem\";\r\nimport { mapFileExtension } from \"../../../../../assets/functions/HandleMultimediaFiles/mapFileExtension\";\r\nimport { getItemsList } from \"../../../../../assets/data/SidebarData\";\r\nimport CombinedContext from \"../../../../../contexts/CombinedContext\";\r\n\r\nconst BuildMultimediaFormDesigner = (item, itemIndex, pathArray, setFieldValue, values, isAny, itemSection, initialValues, handleFormOrder, formOrder) => {\r\n  const isRM = pathArray[0] === \"rm\" ? true : false;\r\n  const label = isRM ? item.itemName : item.node === null ? item.text : item.node.text;\r\n  let array = [];\r\n  array.push(\"value\");\r\n  const pathLabel = pathArray.concat(array).join(\"-\");\r\n  buildInitialValueEditMode(item, pathLabel, initialValues);\r\n  const context = useContext(CombinedContext); // Para verificar se existe alguma restrição de extensão do archetypeDesigner\r\n\r\n  useEffect(() => {\r\n    if (item.itemsList !== undefined && item.itemsList.length > 0) {\r\n      // vai buscar o mapeamento\r\n      let idInitialExtension = mapFileExtension(item.itemsList, \"\"); // vai buscar a lista de restrições\r\n\r\n      let items = getItemsList(\"\"); // atualiza a restrição para o valor que vem do archetypeDesigner, caso este seja contemplado no mapeamento\r\n      // caso contrário coloca a opção default - Todos os Ficheiros (id=0)\r\n\r\n      context.datatypes.handleFileExtensions(pathArray.join(\".\"), Object.values(items).filter(i => idInitialExtension === 9 ? i.id === 0 : i.id === idInitialExtension));\r\n    }\r\n  }, []);\r\n  return /*#__PURE__*/React.createElement(Multimedia, {\r\n    isRM: isRM,\r\n    data: isRM && item,\r\n    isSection: false,\r\n    groupID: item.groupID,\r\n    path: pathArray.join(\".\"),\r\n    handleFormOrder: handleFormOrder,\r\n    order: formOrder ? formOrder[pathArray.join(\".\")] : null,\r\n    item: item,\r\n    key: itemIndex,\r\n    isAny: isAny,\r\n    showLabel: !isAny || (formOrder ? firstAnyItem(formOrder, pathArray, isAny) : itemIndex === 0),\r\n    value: values[pathLabel],\r\n    onMultimediaChange: setFieldValue,\r\n    label: label,\r\n    pathLabel: pathLabel,\r\n    optional: item.occurrences.lowerOccurrences === 0,\r\n    sectionOccurrence: itemSection[itemSection.length - 1],\r\n    description: isRM ? item.description : item.node === null ? \"\" : item.node.description\r\n  });\r\n};\r\n\r\nexport default BuildMultimediaFormDesigner;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}