{"ast":null,"code":"import _objectSpread from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nimport { faCheck, faSearch, faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport axios from \"axios\";\nimport { ContentState, EditorState } from \"draft-js\";\nimport React, { Component } from \"react\";\nimport { debounce } from \"../../../assets/functions/Debounce/debounce\";\nimport CombinedContext from \"../../../contexts/CombinedContext\";\nimport ProviderCombinedContext from \"../../../contexts/ProviderCombinedContext\";\nimport styles from \"../../../styles/custom.module.css\";\nimport FieldContainer from \"../../UI/FieldContainer/FieldContainer\";\nimport Label from \"../../UI/Label/Label\";\nimport ValidationError from \"../../UI/ValidationError/ValidationError\";\nimport { handleInternalFunctions } from \"../../../assets/functions/InternalFuntions/handleInternalFunctions\";\nimport { getEnvUrl } from \"../../../environment\"; // ESTE COMPONENTE NÃO FOI MUDADO PARA HOOKS POR CAUSA DA CALLBACK A SEGUIR AO SETSTATE\nvar SelectSearchComponent = /*#__PURE__*/function (_Component) {\n  _inherits(SelectSearchComponent, _Component);\n  var _super = _createSuper(SelectSearchComponent);\n  function SelectSearchComponent() {\n    var _this;\n    _classCallCheck(this, SelectSearchComponent);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"dropContainer\", /*#__PURE__*/React.createRef());\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      showDropdown: false,\n      data: [],\n      searchValue: \"\",\n      focused: false,\n      additionalData: [],\n      fetchedRefset: false\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleClickOutside\", function (event) {\n      if (_this.dropContainer.current && !_this.dropContainer.current.contains(event.target)) {\n        _this.setState({\n          showDropdown: false,\n          data: [],\n          additionalData: []\n        });\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(value) {\n        var res, paths;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.context.fields.updateValue(_this.props.pathLabel);\n              case 2:\n                _this.setState({\n                  showDropdown: false\n                });\n                _context.next = 5;\n                return _this.props.onSelectSearchChange(_this.props.pathLabel, value);\n              case 5:\n                if (!(Array.isArray(_this.props.internalFunctions) && _this.props.internalFunctions.length > 0)) {\n                  _context.next = 8;\n                  break;\n                }\n                _context.next = 8;\n                return handleInternalFunctions(_this.props.internalFunctions, _this.props.onSelectSearchChange, _this.context.token, _this.props.values, _this.context.fields);\n              case 8:\n                // ACRESCENTAR OUTRAS OPÇÕES => Antigas internal functions\n\n                if (_this.state.additionalData.length > 0) {\n                  res = _this.state.additionalData.filter(function (x) {\n                    return x.code === value.code;\n                  });\n                  if (res.length > 0) {\n                    paths = res[0].data;\n                    Object.keys(paths).forEach(function (path) {\n                      var newPath = path.split(\".\").join(\"-\");\n                      if (paths[path] !== null) {\n                        var datatypes = _this.props.internalFunctions[0].datatypeCompositionData[path];\n                        if (datatypes.datatype === \"DV_TEXT\" && datatypes.upperOccurrences === 1) {\n                          var fieldValue = EditorState.createWithContent(ContentState.createFromText(paths[path].toString()));\n                          _this.props.onSelectSearchChange(newPath, fieldValue);\n                          _this.context.fields.updateValue(newPath);\n                        } else if (datatypes.datatype === \"DV_IDENTIFIER\" && datatypes.upperOccurrences === 1) {\n                          _this.props.onSelectSearchChange(newPath, paths[path].toString());\n                          _this.context.fields.updateValue(newPath);\n                        }\n                      }\n                    });\n                  }\n                }\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    _defineProperty(_assertThisInitialized(_this), \"handleChangeSearch\", function (value) {\n      _this.setState({\n        searchValue: value\n      }, function () {\n        _this.context.fields.updateValue(_this.props.pathLabel);\n        _this.props.onSelectSearchChange(_this.props.pathLabel, {\n          code: _this.state.searchValue,\n          text: _this.state.searchValue\n        });\n        var filteredData = [];\n        if (Array.isArray(_this.state.data) && _this.state.data.length > 0) {\n          filteredData = _this.state.data.filter(function (d) {\n            return d.text.toLowerCase().includes(_this.state.searchValue.toLowerCase());\n          });\n        }\n        _this.setState({\n          data: filteredData\n        });\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"fetchData\", debounce(function (value) {\n      var data = [];\n      var additionalData = [];\n      _this.setState({\n        showDropdown: true,\n        data: [],\n        additionalData: []\n      });\n      var context = _this.context; // Vai ver se tem refset em primeiro\n\n      if (Array.isArray(_this.props.refset) && _this.props.refset.length > 0) {\n        _this.setState({\n          fetchedRefset: true\n        }, function () {\n          if (_this.props.refset[0].includes(\"code\") && _this.props.refset[0].includes(\"text\")) {\n            axios({\n              method: \"get\",\n              url: \"\".concat(_this.props.refset[0]),\n              headers: {\n                Authorization: \"Bearer \".concat(_this.context.token)\n              }\n            }).then(function (res) {\n              if (res.data.success === true || res.data.success === \"true\") {\n                if (Array.isArray(res.data.concepts) && res.data.concepts.length > 0) {\n                  _this.setState({\n                    data: res.data.concepts\n                  });\n                } else {\n                  _this.setState({\n                    showDropdown: false\n                  });\n                }\n              } else {\n                _this.setState({\n                  showDropdown: false\n                });\n              }\n            }).catch(function (err) {\n              _this.setState({\n                showDropdown: false\n              });\n            });\n          } else if (_this.props.concepts) {\n            _this.setState({\n              data: _this.props.concepts\n            });\n          }\n        });\n      } else if (_this.state.fetchedRefset === false && _this.props.internalFunctions.length !== 0) {\n        // Seleciono logo o primeiro porque no caso de um drop downdown não haverá mais functions em princípio\n        // Apenas uma função para ir buscar os valores da drop e pronto\n        // A ver no futuro se isso se mantém\n        // Há um url já definido porque não me mandam o url no internalFunctions\n        var params = {};\n        var url = \"\";\n        if (_this.props.internalFunctions[0].url) {\n          url = _this.props.internalFunctions[0].url + _this.props.internalFunctions[0].name;\n        } else {\n          url = \"\".concat(getEnvUrl('aidagequipas', '4001'), \"/\").concat(_this.props.internalFunctions[0].name); // url = \"http://172.21.220.44:4001/\" + this.props.internalFunctions[0].name;\n        }\n\n        if (_this.props.internalFunctions[0].definedParams !== null) {\n          params = _objectSpread({}, _this.props.internalFunctions[0].definedParams);\n        } // COMENTEI ESTA PARTE PORQUE AGORA JÁ NÃO TEMOS O 'VALUE'\n        // A função deixou de ser chamada no handleChangeSearch e passou a ser chamada no onClick\n        // VER ESTA QUESTÃO -> VOU TER QUE ARRANJAR FORMA DE DETETAR QUANDO É QUE VAI SER PARA ENVIAR O PARÂMETRO 'QUERY'\n        // if (this.props.internalFunctions[0].undefinedParams !== null) {\n        //   Object.keys(this.props.internalFunctions[0].undefinedParams).forEach(\n        //     function (key) {\n        //       if (key === \"Codigos\") {\n        //         params[\"codigos\"] = context.codigos;\n        //       } else if (key === \"QueryString\") {\n        //         params[\"query\"] = value;\n        //       }\n        //       context.formData.referenceModel.forEach((obj) => {\n        //         if (key === obj.item) {\n        //           params[key] = obj.value;\n        //         }\n        //       });\n        //     }\n        //   );\n        // }\n\n        axios({\n          method: _this.props.internalFunctions[0].method,\n          url: url,\n          headers: {\n            Authorization: \"Bearer \" + context.token\n          },\n          data: params\n        }).then(function (response) {\n          if (response.data.success) {\n            var i;\n            for (i = 0; i < response.data.data.length; i++) {\n              data.push(response.data.data[i]);\n            }\n            if (response.data.additionalData) {\n              for (i = 0; i < response.data.additionalData.length; i++) {\n                additionalData.push(response.data.additionalData[i]);\n              }\n            }\n          }\n          if (data.length === 0) {\n            _this.setState({\n              showDropdown: false\n            });\n          } else {\n            _this.setState({\n              data: data,\n              additionalData: additionalData\n            });\n          }\n        }).catch(function (error) {\n          _this.setState({\n            showDropdown: false\n          });\n        });\n      } else {\n        _this.setState({\n          showDropdown: false\n        });\n      }\n    }, 500));\n    _defineProperty(_assertThisInitialized(_this), \"handleFocus\", function (state) {\n      if (state === \"in\") {\n        if (_this.state.data.length > 0) {\n          _this.setState({\n            focused: true,\n            showDropdown: true\n          });\n        } else {\n          _this.setState({\n            focused: true\n          });\n        }\n      } else if (state === \"out\") {\n        _this.props.onTouch(_this.props.pathLabel);\n        _this.setState({\n          focused: false,\n          searchValue: \"\"\n        });\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"handleClearSelectedValue\", function () {\n      _this.context.fields.updateValue(_this.props.pathLabel);\n      _this.props.onSelectSearchChange(_this.props.pathLabel, \"\");\n      _this.setState({\n        data: [],\n        additionalData: []\n      });\n    });\n    return _this;\n  }\n  _createClass(SelectSearchComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener(\"mousedown\", this.handleClickOutside);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener(\"mousedown\", this.handleClickOutside);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var dropListHeigth = {\n        1: \"h-8\",\n        2: \"h-16\",\n        3: \"h-24\"\n      };\n      var dropList;\n      if (this.state.data.length > 0) {\n        dropList = /*#__PURE__*/React.createElement(\"div\", {\n          ref: this.dropContainer,\n          style: {\n            zIndex: 99999999\n          },\n          className: dropListHeigth[this.state.data.length] ? dropListHeigth[this.state.data.length] + \" w-full absolute inset-y-0 mt-10 z-10 cursor-pointer bg-white overflow-y-auto border border-gray-200 rounded-sm\" : \"w-full absolute inset-y-0 mt-10 z-10 cursor-pointer bg-white h-32 overflow-y-auto border border-gray-200 rounded-sm\"\n        }, this.state.data.map(function (elemento, index) {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            onClick: function onClick() {\n              return _this2.handleChange(elemento);\n            },\n            key: index,\n            style: {\n              fontSize: _this2.context.font.fontSize.field\n            },\n            className: _this2.props.value.code === elemento.code ? \"duration-300 relative flex items-center bg-blue-100 text-gray-700 leading-tight h-8 px-4 hover:outline hover:bg-blue-100\" : \"duration-300 relative flex items-center bg-white text-gray-700 leading-tight h-8 px-4 hover:outline hover:bg-blue-100\"\n          }, elemento.text, _this2.props.value.code === elemento.code && /*#__PURE__*/React.createElement(\"div\", {\n            className: \"absolute inset-y-0 right-0 flex items-center pr-4 text-gray-700\"\n          }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n            size: \"xs\",\n            icon: faCheck\n          })));\n        }));\n      } else {\n        dropList = /*#__PURE__*/React.createElement(\"div\", {\n          ref: this.dropContainer,\n          className: \"flex items-center justify-center w-full absolute inset-y-0 mt-10 z-10 cursor-pointer bg-white h-12 overflow-y-auto border border-gray-200 rounded-sm\"\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: styles.dataLoaderSelectSearch\n        }));\n      }\n      var selectSearch = this.props.isFieldEditable ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"w-full relative\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cursor-default absolute inset-y-0 left-0 flex items-center px-3 text-gray-700\"\n      }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        size: \"sm\",\n        icon: faSearch\n      })), this.props.value && !this.state.showDropdown && /*#__PURE__*/React.createElement(\"div\", {\n        onClick: function onClick() {\n          return _this2.handleClearSelectedValue();\n        },\n        className: \"duration-500 cursor-pointer absolute inset-y-0 right-0 flex items-center px-4 text-gray-400 hover:text-gray-700\"\n      }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        size: \"xs\",\n        icon: faTimes\n      })), /*#__PURE__*/React.createElement(\"input\", {\n        onFocus: function onFocus() {\n          return _this2.handleFocus(\"in\");\n        },\n        onBlur: function onBlur() {\n          return _this2.handleFocus(\"out\");\n        },\n        value: this.state.focused ? this.state.searchValue : this.props.value !== \"\" ? this.props.value.text : \"\",\n        onClick: function onClick() {\n          return _this2.fetchData();\n        },\n        onChange: function onChange(e) {\n          return _this2.handleChangeSearch(e.target.value);\n        },\n        style: {\n          fontSize: this.context.font.fontSize.field\n        },\n        className: this.props.error ? this.state.searchValue !== \"\" || this.props.value !== \"\" ? \"block h-10 flex items-center appearance-none w-full bg-gray-200 border border-red-500 text-gray-700 py-2 pr-4 pl-8 rounded-sm leading-tight focus:outline-none focus:bg-white focus:border-red-500\" : \"block h-10 flex items-center appearance-none w-full bg-gray-200 border border-red-500 text-gray-500 py-2 pr-4 pl-8 rounded-sm leading-tight focus:outline-none focus:bg-white focus:border-red-500\" : this.state.searchValue !== \"\" || this.props.value !== \"\" ? \"block h-10 flex items-center appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-2 pr-4 pl-8 rounded-sm leading-tight focus:outline-none focus:bg-white focus:border-gray-300\" : \"block h-10 flex items-center appearance-none w-full bg-gray-200 border border-gray-200 text-gray-500 py-2 pr-4 pl-8 rounded-sm leading-tight focus:outline-none focus:bg-white focus:border-gray-300\",\n        title: this.props.description,\n        placeholder: this.props.value !== \"\" ? this.props.value.text : \"Insira um texto para pesquisa...\"\n      })) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"w-full relative cursor-not-allowed opacity-50\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"absolute inset-y-0 left-0 flex items-center px-3 text-gray-700\"\n      }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        size: \"sm\",\n        icon: faSearch\n      })), /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          fontSize: this.context.font.fontSize.field\n        },\n        className: this.state.searchValue !== \"\" || this.props.value !== \"\" ? \"block h-10 flex items-center appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-2 pr-4 pl-8 rounded-sm leading-tight focus:outline-none focus:bg-white focus:border-gray-300\" : \"block h-10 flex items-center appearance-none w-full bg-gray-200 border border-gray-200 text-gray-500 py-2 pr-4 pl-8 rounded-sm leading-tight focus:outline-none focus:bg-white focus:border-gray-300\"\n      }, this.props.value !== \"\" ? this.props.value.text : \"Insira um texto para pesquisa...\"));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          order: this.props.order,\n          width: this.context.sizes.sizes[this.props.path] ? this.context.sizes.sizes[this.props.path] : \"100%\"\n        },\n        className: \"flex\"\n      }, /*#__PURE__*/React.createElement(FieldContainer, null, /*#__PURE__*/React.createElement(Label, {\n        label: this.props.label,\n        editMode: this.props.editMode,\n        optional: this.props.optional,\n        showLabel: this.props.showLabel,\n        optionalMandatory: this.props.optionalMandatory,\n        sectionOccurrence: this.props.sectionOccurrence\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"relative\"\n      }, selectSearch, this.state.showDropdown && dropList), this.props.error && /*#__PURE__*/React.createElement(ValidationError, {\n        errorMessage: this.props.error\n      })));\n    }\n  }]);\n  return SelectSearchComponent;\n}(Component);\n_defineProperty(SelectSearchComponent, \"contextType\", CombinedContext);\nvar SelectSearch = function SelectSearch(props) {\n  return /*#__PURE__*/React.createElement(ProviderCombinedContext, null, /*#__PURE__*/React.createElement(SelectSearchComponent, props));\n};\nexport default SelectSearch;","map":{"version":3,"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","faCheck","faSearch","faTimes","FontAwesomeIcon","axios","ContentState","EditorState","React","Component","debounce","CombinedContext","ProviderCombinedContext","styles","FieldContainer","Label","ValidationError","handleInternalFunctions","getEnvUrl","SelectSearchComponent","args","createRef","showDropdown","data","searchValue","focused","additionalData","fetchedRefset","event","dropContainer","current","contains","target","setState","context","fields","updateValue","props","pathLabel","onSelectSearchChange","Array","isArray","internalFunctions","length","token","values","state","res","filter","x","code","paths","keys","forEach","path","newPath","split","join","datatypes","datatypeCompositionData","datatype","upperOccurrences","fieldValue","createWithContent","createFromText","toString","text","filteredData","d","toLowerCase","includes","refset","method","url","headers","Authorization","then","success","concepts","catch","err","params","name","definedParams","response","i","push","error","onTouch","document","addEventListener","handleClickOutside","removeEventListener","dropListHeigth","dropList","createElement","ref","style","zIndex","className","map","elemento","index","onClick","handleChange","fontSize","font","field","size","icon","dataLoaderSelectSearch","selectSearch","isFieldEditable","handleClearSelectedValue","onFocus","handleFocus","onBlur","fetchData","onChange","e","handleChangeSearch","title","description","placeholder","order","width","sizes","label","editMode","optional","showLabel","optionalMandatory","sectionOccurrence","errorMessage","SelectSearch"],"sources":["C:/Users/ines_/fisiosys/frontend/node_modules/protected-aidaforms/dist/components/Datatypes/SelectSearch/SelectSearch.js"],"sourcesContent":["function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\r\n\r\nimport { faCheck, faSearch, faTimes } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport axios from \"axios\";\r\nimport { ContentState, EditorState } from \"draft-js\";\r\nimport React, { Component } from \"react\";\r\nimport { debounce } from \"../../../assets/functions/Debounce/debounce\";\r\nimport CombinedContext from \"../../../contexts/CombinedContext\";\r\nimport ProviderCombinedContext from \"../../../contexts/ProviderCombinedContext\";\r\nimport styles from \"../../../styles/custom.module.css\";\r\nimport FieldContainer from \"../../UI/FieldContainer/FieldContainer\";\r\nimport Label from \"../../UI/Label/Label\";\r\nimport ValidationError from \"../../UI/ValidationError/ValidationError\";\r\nimport { handleInternalFunctions } from \"../../../assets/functions/InternalFuntions/handleInternalFunctions\";\r\nimport { getEnvUrl } from \"../../../environment\"; // ESTE COMPONENTE NÃO FOI MUDADO PARA HOOKS POR CAUSA DA CALLBACK A SEGUIR AO SETSTATE\r\n\r\nclass SelectSearchComponent extends Component {\r\n  constructor(...args) {\r\n    super(...args);\r\n\r\n    _defineProperty(this, \"dropContainer\", /*#__PURE__*/React.createRef());\r\n\r\n    _defineProperty(this, \"state\", {\r\n      showDropdown: false,\r\n      data: [],\r\n      searchValue: \"\",\r\n      focused: false,\r\n      additionalData: [],\r\n      fetchedRefset: false\r\n    });\r\n\r\n    _defineProperty(this, \"handleClickOutside\", event => {\r\n      if (this.dropContainer.current && !this.dropContainer.current.contains(event.target)) {\r\n        this.setState({\r\n          showDropdown: false,\r\n          data: [],\r\n          additionalData: []\r\n        });\r\n      }\r\n    });\r\n\r\n    _defineProperty(this, \"handleChange\", async value => {\r\n      await this.context.fields.updateValue(this.props.pathLabel);\r\n      this.setState({\r\n        showDropdown: false\r\n      });\r\n      await this.props.onSelectSearchChange(this.props.pathLabel, value); // Ver se internal functions para processar\r\n\r\n      if (Array.isArray(this.props.internalFunctions) && this.props.internalFunctions.length > 0) {\r\n        await handleInternalFunctions(this.props.internalFunctions, this.props.onSelectSearchChange, this.context.token, this.props.values, this.context.fields);\r\n      } // ACRESCENTAR OUTRAS OPÇÕES => Antigas internal functions\r\n\r\n\r\n      if (this.state.additionalData.length > 0) {\r\n        const res = this.state.additionalData.filter(x => x.code === value.code);\r\n\r\n        if (res.length > 0) {\r\n          const paths = res[0].data;\r\n          Object.keys(paths).forEach(path => {\r\n            const newPath = path.split(\".\").join(\"-\");\r\n\r\n            if (paths[path] !== null) {\r\n              const datatypes = this.props.internalFunctions[0].datatypeCompositionData[path];\r\n\r\n              if (datatypes.datatype === \"DV_TEXT\" && datatypes.upperOccurrences === 1) {\r\n                const fieldValue = EditorState.createWithContent(ContentState.createFromText(paths[path].toString()));\r\n                this.props.onSelectSearchChange(newPath, fieldValue);\r\n                this.context.fields.updateValue(newPath);\r\n              } else if (datatypes.datatype === \"DV_IDENTIFIER\" && datatypes.upperOccurrences === 1) {\r\n                this.props.onSelectSearchChange(newPath, paths[path].toString());\r\n                this.context.fields.updateValue(newPath);\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    _defineProperty(this, \"handleChangeSearch\", value => {\r\n      this.setState({\r\n        searchValue: value\r\n      }, () => {\r\n        this.context.fields.updateValue(this.props.pathLabel);\r\n        this.props.onSelectSearchChange(this.props.pathLabel, {\r\n          code: this.state.searchValue,\r\n          text: this.state.searchValue\r\n        });\r\n        let filteredData = [];\r\n\r\n        if (Array.isArray(this.state.data) && this.state.data.length > 0) {\r\n          filteredData = this.state.data.filter(d => {\r\n            return d.text.toLowerCase().includes(this.state.searchValue.toLowerCase());\r\n          });\r\n        }\r\n\r\n        this.setState({\r\n          data: filteredData\r\n        });\r\n      });\r\n    });\r\n\r\n    _defineProperty(this, \"fetchData\", debounce(value => {\r\n      let data = [];\r\n      let additionalData = [];\r\n      this.setState({\r\n        showDropdown: true,\r\n        data: [],\r\n        additionalData: []\r\n      });\r\n      const context = this.context; // Vai ver se tem refset em primeiro\r\n\r\n      if (Array.isArray(this.props.refset) && this.props.refset.length > 0) {\r\n        this.setState({\r\n          fetchedRefset: true\r\n        }, () => {\r\n          if (this.props.refset[0].includes(\"code\") && this.props.refset[0].includes(\"text\")) {\r\n            axios({\r\n              method: \"get\",\r\n              url: `${this.props.refset[0]}`,\r\n              headers: {\r\n                Authorization: `Bearer ${this.context.token}`\r\n              }\r\n            }).then(res => {\r\n              if (res.data.success === true || res.data.success === \"true\") {\r\n                if (Array.isArray(res.data.concepts) && res.data.concepts.length > 0) {\r\n                  this.setState({\r\n                    data: res.data.concepts\r\n                  });\r\n                } else {\r\n                  this.setState({\r\n                    showDropdown: false\r\n                  });\r\n                }\r\n              } else {\r\n                this.setState({\r\n                  showDropdown: false\r\n                });\r\n              }\r\n            }).catch(err => {\r\n              this.setState({\r\n                showDropdown: false\r\n              });\r\n            });\r\n          } else if (this.props.concepts) {\r\n            this.setState({\r\n              data: this.props.concepts\r\n            });\r\n          }\r\n        });\r\n      } else if (this.state.fetchedRefset === false && this.props.internalFunctions.length !== 0) {\r\n        // Seleciono logo o primeiro porque no caso de um drop downdown não haverá mais functions em princípio\r\n        // Apenas uma função para ir buscar os valores da drop e pronto\r\n        // A ver no futuro se isso se mantém\r\n        // Há um url já definido porque não me mandam o url no internalFunctions\r\n        let params = {};\r\n        let url = \"\";\r\n\r\n        if (this.props.internalFunctions[0].url) {\r\n          url = this.props.internalFunctions[0].url + this.props.internalFunctions[0].name;\r\n        } else {\r\n          url = `${getEnvUrl('aidagequipas', '4001')}/${this.props.internalFunctions[0].name}`; // url = \"http://172.21.220.44:4001/\" + this.props.internalFunctions[0].name;\r\n        }\r\n\r\n        if (this.props.internalFunctions[0].definedParams !== null) {\r\n          params = { ...this.props.internalFunctions[0].definedParams\r\n          };\r\n        } // COMENTEI ESTA PARTE PORQUE AGORA JÁ NÃO TEMOS O 'VALUE'\r\n        // A função deixou de ser chamada no handleChangeSearch e passou a ser chamada no onClick\r\n        // VER ESTA QUESTÃO -> VOU TER QUE ARRANJAR FORMA DE DETETAR QUANDO É QUE VAI SER PARA ENVIAR O PARÂMETRO 'QUERY'\r\n        // if (this.props.internalFunctions[0].undefinedParams !== null) {\r\n        //   Object.keys(this.props.internalFunctions[0].undefinedParams).forEach(\r\n        //     function (key) {\r\n        //       if (key === \"Codigos\") {\r\n        //         params[\"codigos\"] = context.codigos;\r\n        //       } else if (key === \"QueryString\") {\r\n        //         params[\"query\"] = value;\r\n        //       }\r\n        //       context.formData.referenceModel.forEach((obj) => {\r\n        //         if (key === obj.item) {\r\n        //           params[key] = obj.value;\r\n        //         }\r\n        //       });\r\n        //     }\r\n        //   );\r\n        // }\r\n\r\n\r\n        axios({\r\n          method: this.props.internalFunctions[0].method,\r\n          url: url,\r\n          headers: {\r\n            Authorization: \"Bearer \" + context.token\r\n          },\r\n          data: params\r\n        }).then(response => {\r\n          if (response.data.success) {\r\n            let i;\r\n\r\n            for (i = 0; i < response.data.data.length; i++) {\r\n              data.push(response.data.data[i]);\r\n            }\r\n\r\n            if (response.data.additionalData) {\r\n              for (i = 0; i < response.data.additionalData.length; i++) {\r\n                additionalData.push(response.data.additionalData[i]);\r\n              }\r\n            }\r\n          }\r\n\r\n          if (data.length === 0) {\r\n            this.setState({\r\n              showDropdown: false\r\n            });\r\n          } else {\r\n            this.setState({\r\n              data: data,\r\n              additionalData: additionalData\r\n            });\r\n          }\r\n        }).catch(error => {\r\n          this.setState({\r\n            showDropdown: false\r\n          });\r\n        });\r\n      } else {\r\n        this.setState({\r\n          showDropdown: false\r\n        });\r\n      }\r\n    }, 500));\r\n\r\n    _defineProperty(this, \"handleFocus\", state => {\r\n      if (state === \"in\") {\r\n        if (this.state.data.length > 0) {\r\n          this.setState({\r\n            focused: true,\r\n            showDropdown: true\r\n          });\r\n        } else {\r\n          this.setState({\r\n            focused: true\r\n          });\r\n        }\r\n      } else if (state === \"out\") {\r\n        this.props.onTouch(this.props.pathLabel);\r\n        this.setState({\r\n          focused: false,\r\n          searchValue: \"\"\r\n        });\r\n      }\r\n    });\r\n\r\n    _defineProperty(this, \"handleClearSelectedValue\", () => {\r\n      this.context.fields.updateValue(this.props.pathLabel);\r\n      this.props.onSelectSearchChange(this.props.pathLabel, \"\");\r\n      this.setState({\r\n        data: [],\r\n        additionalData: []\r\n      });\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener(\"mousedown\", this.handleClickOutside);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"mousedown\", this.handleClickOutside);\r\n  }\r\n\r\n  render() {\r\n    let dropListHeigth = {\r\n      1: \"h-8\",\r\n      2: \"h-16\",\r\n      3: \"h-24\"\r\n    };\r\n    let dropList;\r\n\r\n    if (this.state.data.length > 0) {\r\n      dropList = /*#__PURE__*/React.createElement(\"div\", {\r\n        ref: this.dropContainer,\r\n        style: {\r\n          zIndex: 99999999\r\n        },\r\n        className: dropListHeigth[this.state.data.length] ? dropListHeigth[this.state.data.length] + \" w-full absolute inset-y-0 mt-10 z-10 cursor-pointer bg-white overflow-y-auto border border-gray-200 rounded-sm\" : \"w-full absolute inset-y-0 mt-10 z-10 cursor-pointer bg-white h-32 overflow-y-auto border border-gray-200 rounded-sm\"\r\n      }, this.state.data.map((elemento, index) => {\r\n        return /*#__PURE__*/React.createElement(\"div\", {\r\n          onClick: () => this.handleChange(elemento),\r\n          key: index,\r\n          style: {\r\n            fontSize: this.context.font.fontSize.field\r\n          },\r\n          className: this.props.value.code === elemento.code ? \"duration-300 relative flex items-center bg-blue-100 text-gray-700 leading-tight h-8 px-4 hover:outline hover:bg-blue-100\" : \"duration-300 relative flex items-center bg-white text-gray-700 leading-tight h-8 px-4 hover:outline hover:bg-blue-100\"\r\n        }, elemento.text, this.props.value.code === elemento.code && /*#__PURE__*/React.createElement(\"div\", {\r\n          className: \"absolute inset-y-0 right-0 flex items-center pr-4 text-gray-700\"\r\n        }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\r\n          size: \"xs\",\r\n          icon: faCheck\r\n        })));\r\n      }));\r\n    } else {\r\n      dropList = /*#__PURE__*/React.createElement(\"div\", {\r\n        ref: this.dropContainer,\r\n        className: \"flex items-center justify-center w-full absolute inset-y-0 mt-10 z-10 cursor-pointer bg-white h-12 overflow-y-auto border border-gray-200 rounded-sm\"\r\n      }, /*#__PURE__*/React.createElement(\"div\", {\r\n        className: styles.dataLoaderSelectSearch\r\n      }));\r\n    }\r\n\r\n    let selectSearch = this.props.isFieldEditable ? /*#__PURE__*/React.createElement(\"div\", {\r\n      className: \"w-full relative\"\r\n    }, /*#__PURE__*/React.createElement(\"div\", {\r\n      className: \"cursor-default absolute inset-y-0 left-0 flex items-center px-3 text-gray-700\"\r\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\r\n      size: \"sm\",\r\n      icon: faSearch\r\n    })), this.props.value && !this.state.showDropdown && /*#__PURE__*/React.createElement(\"div\", {\r\n      onClick: () => this.handleClearSelectedValue(),\r\n      className: \"duration-500 cursor-pointer absolute inset-y-0 right-0 flex items-center px-4 text-gray-400 hover:text-gray-700\"\r\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\r\n      size: \"xs\",\r\n      icon: faTimes\r\n    })), /*#__PURE__*/React.createElement(\"input\", {\r\n      onFocus: () => this.handleFocus(\"in\"),\r\n      onBlur: () => this.handleFocus(\"out\"),\r\n      value: this.state.focused ? this.state.searchValue : this.props.value !== \"\" ? this.props.value.text : \"\",\r\n      onClick: () => this.fetchData(),\r\n      onChange: e => this.handleChangeSearch(e.target.value),\r\n      style: {\r\n        fontSize: this.context.font.fontSize.field\r\n      },\r\n      className: this.props.error ? this.state.searchValue !== \"\" || this.props.value !== \"\" ? \"block h-10 flex items-center appearance-none w-full bg-gray-200 border border-red-500 text-gray-700 py-2 pr-4 pl-8 rounded-sm leading-tight focus:outline-none focus:bg-white focus:border-red-500\" : \"block h-10 flex items-center appearance-none w-full bg-gray-200 border border-red-500 text-gray-500 py-2 pr-4 pl-8 rounded-sm leading-tight focus:outline-none focus:bg-white focus:border-red-500\" : this.state.searchValue !== \"\" || this.props.value !== \"\" ? \"block h-10 flex items-center appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-2 pr-4 pl-8 rounded-sm leading-tight focus:outline-none focus:bg-white focus:border-gray-300\" : \"block h-10 flex items-center appearance-none w-full bg-gray-200 border border-gray-200 text-gray-500 py-2 pr-4 pl-8 rounded-sm leading-tight focus:outline-none focus:bg-white focus:border-gray-300\",\r\n      title: this.props.description,\r\n      placeholder: this.props.value !== \"\" ? this.props.value.text : \"Insira um texto para pesquisa...\"\r\n    })) : /*#__PURE__*/React.createElement(\"div\", {\r\n      className: \"w-full relative cursor-not-allowed opacity-50\"\r\n    }, /*#__PURE__*/React.createElement(\"div\", {\r\n      className: \"absolute inset-y-0 left-0 flex items-center px-3 text-gray-700\"\r\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\r\n      size: \"sm\",\r\n      icon: faSearch\r\n    })), /*#__PURE__*/React.createElement(\"span\", {\r\n      style: {\r\n        fontSize: this.context.font.fontSize.field\r\n      },\r\n      className: this.state.searchValue !== \"\" || this.props.value !== \"\" ? \"block h-10 flex items-center appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-2 pr-4 pl-8 rounded-sm leading-tight focus:outline-none focus:bg-white focus:border-gray-300\" : \"block h-10 flex items-center appearance-none w-full bg-gray-200 border border-gray-200 text-gray-500 py-2 pr-4 pl-8 rounded-sm leading-tight focus:outline-none focus:bg-white focus:border-gray-300\"\r\n    }, this.props.value !== \"\" ? this.props.value.text : \"Insira um texto para pesquisa...\"));\r\n    return /*#__PURE__*/React.createElement(\"div\", {\r\n      style: {\r\n        order: this.props.order,\r\n        width: this.context.sizes.sizes[this.props.path] ? this.context.sizes.sizes[this.props.path] : \"100%\"\r\n      },\r\n      className: \"flex\"\r\n    }, /*#__PURE__*/React.createElement(FieldContainer, null, /*#__PURE__*/React.createElement(Label, {\r\n      label: this.props.label,\r\n      editMode: this.props.editMode,\r\n      optional: this.props.optional,\r\n      showLabel: this.props.showLabel,\r\n      optionalMandatory: this.props.optionalMandatory,\r\n      sectionOccurrence: this.props.sectionOccurrence\r\n    }), /*#__PURE__*/React.createElement(\"div\", {\r\n      className: \"relative\"\r\n    }, selectSearch, this.state.showDropdown && dropList), this.props.error && /*#__PURE__*/React.createElement(ValidationError, {\r\n      errorMessage: this.props.error\r\n    })));\r\n  }\r\n\r\n}\r\n\r\n_defineProperty(SelectSearchComponent, \"contextType\", CombinedContext);\r\n\r\nconst SelectSearch = props => {\r\n  return /*#__PURE__*/React.createElement(ProviderCombinedContext, null, /*#__PURE__*/React.createElement(SelectSearchComponent, props));\r\n};\r\n\r\nexport default SelectSearch;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}