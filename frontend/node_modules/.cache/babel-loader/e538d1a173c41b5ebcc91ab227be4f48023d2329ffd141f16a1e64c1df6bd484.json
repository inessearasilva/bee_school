{"ast":null,"code":"import _toConsumableArray from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _regeneratorRuntime from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _defineProperty from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectSpread from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"C:/Users/ines_/fisiosys/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport SidePanel from \"../../SidePanel\";\nimport CombinedContext from \"../../../../../../contexts/CombinedContext\";\nimport ProviderCombinedContext from \"../../../../../../contexts/ProviderCombinedContext\";\nimport Tab from \"../../../../UI/Tab/Tab\";\nimport axios from \"axios\";\nimport CompositionPlanningPanel from \"../CompositionPlanningPanel\";\nimport { getFormFields } from \"../../../../../../assets/functions/GetFormFields/getFormFields\";\nimport { maxValueArray } from \"../../../../../../assets/functions/Maximum/maxValueArray\";\nimport ConfirmButton from \"../../../../UI/Button/ConfirmButton\";\nimport { getEnvUrl } from \"../../../../../../environment\";\nvar FunctionSettingsPanel = function FunctionSettingsPanel(props) {\n  var context = useContext(CombinedContext); // INTERNAL FUNCTIONS\n\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    iFunctionSelected = _useState2[0],\n    setIFunction = _useState2[1];\n  var _useState3 = useState({\n      showDropList: false,\n      // Show primeiro dropdown dos conceitos\n      showDropRefsets: false,\n      // Show dropdown dos refsets\n      showDropColRes: false,\n      // Show dropdowm coluna com a resposta\n      showDropField: false,\n      // Show dropdown coluna com o campo a ser preenchido\n      showDropDependencyField: [{\n        id: 0,\n        boolean: false\n      }],\n      // show dropdown campos dependencia\n      showDropDependencyColumn: [{\n        id: 0,\n        boolean: false\n      }],\n      // show dropdown colunas dependencia\n      showDropCodeColumn: false,\n      showDropTextColumn: false\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    showDrop = _useState4[0],\n    setShowDrop = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    field = _useState6[0],\n    setField = _useState6[1]; // Campo a ser preenchido\n\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    refset = _useState8[0],\n    setRefset = _useState8[1]; // refset selecionado\n\n  var _useState9 = useState(null),\n    _useState10 = _slicedToArray(_useState9, 2),\n    columnRes = _useState10[0],\n    setColumnRes = _useState10[1]; // coluna com a resposta\n\n  var _useState11 = useState([{\n      id: 0,\n      columnRef: null,\n      field: null\n    }]),\n    _useState12 = _slicedToArray(_useState11, 2),\n    dependencies = _useState12[0],\n    setDependencies = _useState12[1]; // dependencias\n\n  var _useState13 = useState(null),\n    _useState14 = _slicedToArray(_useState13, 2),\n    codeColumn = _useState14[0],\n    setCodeColumn = _useState14[1];\n  var _useState15 = useState(null),\n    _useState16 = _slicedToArray(_useState15, 2),\n    textColumn = _useState16[0],\n    setTextColumn = _useState16[1];\n  var handleOpenDropList = function handleOpenDropList(key) {\n    setShowDrop(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, _defineProperty({}, key, !prevState[key]));\n    });\n  };\n  var handleIFunctionSelected = function handleIFunctionSelected(obj) {\n    setIFunction(iFunctionSelected !== null && iFunctionSelected.id === obj.id ? null : obj);\n    setShowDrop(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        showDropList: false\n      });\n    });\n    setField(null);\n    setRefset(null);\n  };\n  var handleClearIFunction = function handleClearIFunction() {\n    setIFunction(null);\n    setField(null);\n    setRefset(null);\n    setShowDrop(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        showDropList: false,\n        showDropField: false,\n        showDropRefsets: false\n      });\n    });\n  };\n  useEffect(function () {\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var values;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(iFunctionSelected !== null && iFunctionSelected.IFUNCAO === \"Preenchimento automático de campos\")) {\n                _context.next = 7;\n                break;\n              }\n              if (context.composition.compositionPlanningRefsets.length === 0) {\n                axios({\n                  method: \"get\",\n                  url: \"\".concat(getEnvUrl('aidarefsets', '4010'), \"/localRefsets\"),\n                  // url: \"http://172.21.220.49:4010/localRefsets\",\n                  headers: {\n                    Authorization: \"Bearer \" + context.token\n                  }\n                }).then(function (response) {\n                  if (response.data.success === true && Array.isArray(response.data.refsets)) {\n                    context.composition.updateCompositionPlanningRefsets(response.data.refsets);\n                  }\n                });\n              }\n              if (!(context.composition.formFields.length === 0)) {\n                _context.next = 7;\n                break;\n              }\n              _context.next = 5;\n              return getFormFields(context.composition.template);\n            case 5:\n              values = _context.sent;\n              context.composition.updateFormFields(values);\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  }, [iFunctionSelected, context.token, context.composition]);\n  var handleFieldSelected = function handleFieldSelected(obj) {\n    setField(field === obj ? null : obj);\n    setShowDrop(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        showDropField: false\n      });\n    });\n  };\n  var handleRemoveField = function handleRemoveField() {\n    setField(null);\n    setShowDrop(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        showDropField: false\n      });\n    });\n    setDependencies([{\n      id: 0,\n      columnRef: null,\n      field: null\n    }]);\n    setColumnRes(null);\n    setTextColumn(null);\n    setCodeColumn(null);\n  };\n  var handleRefsetSelected = function handleRefsetSelected(obj) {\n    setRefset(refset === obj ? null : obj);\n    setShowDrop(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        showDropRefsets: false\n      });\n    });\n  };\n  var handleRemoveRefset = function handleRemoveRefset() {\n    setRefset(null);\n    setShowDrop(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        showDropRefsets: false\n      });\n    });\n    setDependencies([{\n      id: 0,\n      columnRef: null,\n      field: null\n    }]);\n    setColumnRes(null);\n    setTextColumn(null);\n    setCodeColumn(null);\n  };\n  var handleCodeColumnSelected = function handleCodeColumnSelected(obj) {\n    setCodeColumn(codeColumn === obj ? null : obj);\n    setShowDrop(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        showDropCodeColumn: false\n      });\n    });\n  };\n  var handleRemoveCodeColumn = function handleRemoveCodeColumn() {\n    setCodeColumn(null);\n    setShowDrop(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        showDropCodeColumn: false\n      });\n    });\n  };\n  var handleTextColumnSelected = function handleTextColumnSelected(obj) {\n    setTextColumn(textColumn === obj ? null : obj);\n    setShowDrop(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        showDropTextColumn: false\n      });\n    });\n  };\n  var handleRemoveTextColumn = function handleRemoveTextColumn() {\n    setTextColumn(null);\n    setShowDrop(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        showDropTextColumn: false\n      });\n    });\n  };\n  var handleColumnResSelected = function handleColumnResSelected(obj) {\n    setColumnRes(columnRes === obj ? null : obj);\n    setShowDrop(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        showDropColRes: false\n      });\n    });\n  };\n  var handleRemoveColumnRes = function handleRemoveColumnRes() {\n    setColumnRes(null);\n    setShowDrop(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        showDropColRes: false\n      });\n    });\n  };\n  var handleDependency = function handleDependency(id, type, value) {\n    var newDependencies = [];\n    dependencies.forEach(function (obj) {\n      if (obj.id === id) {\n        newDependencies.push(_objectSpread(_objectSpread({}, obj), {}, _defineProperty({}, type, value)));\n      } else {\n        newDependencies.push(obj);\n      }\n    });\n    setDependencies(newDependencies);\n    var newShowDropDependencyColumn = [];\n    showDrop.showDropDependencyColumn.forEach(function (obj) {\n      newShowDropDependencyColumn.push(_objectSpread(_objectSpread({}, obj), {}, {\n        boolean: false\n      }));\n    });\n    var newShowDropDependencyField = [];\n    showDrop.showDropDependencyField.forEach(function (obj) {\n      newShowDropDependencyField.push(_objectSpread(_objectSpread({}, obj), {}, {\n        boolean: false\n      }));\n    });\n    setShowDrop(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        showDropDependencyColumn: newShowDropDependencyColumn,\n        showDropDependencyField: newShowDropDependencyField\n      });\n    });\n  };\n  var handleDropDependency = function handleDropDependency(id, type) {\n    var array = [];\n    showDrop[type].forEach(function (obj) {\n      if (obj.id === id) {\n        array.push(_objectSpread(_objectSpread({}, obj), {}, {\n          boolean: !obj.boolean\n        }));\n      } else {\n        array.push(obj);\n      }\n    });\n    setShowDrop(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, _defineProperty({}, type, array));\n    });\n  };\n  var removeDependency = function removeDependency(id) {\n    var newDependencies = dependencies.filter(function (obj) {\n      return obj.id !== id;\n    });\n    var newShowDropDependencyField = showDrop.showDropDependencyField.filter(function (obj) {\n      return obj.id !== id;\n    });\n    var newShowDropDependencyColumn = showDrop.showDropDependencyColumn.filter(function (obj) {\n      return obj.id !== id;\n    });\n    setDependencies(newDependencies);\n    setShowDrop(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        showDropDependencyColumn: newShowDropDependencyColumn,\n        showDropDependencyField: newShowDropDependencyField\n      });\n    });\n  };\n  var addDependency = function addDependency() {\n    var ids = dependencies.map(function (obj) {\n      return obj.id;\n    });\n    var maxId = maxValueArray(ids);\n    var newDependencies = [].concat(_toConsumableArray(dependencies), [{\n      id: maxId + 1,\n      field: null,\n      columnRef: null\n    }]);\n    setDependencies(newDependencies);\n    setShowDrop(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        showDropDependencyColumn: [].concat(_toConsumableArray(prevState.showDropDependencyColumn), [{\n          id: maxId + 1,\n          boolean: false\n        }]),\n        showDropDependencyField: [].concat(_toConsumableArray(prevState.showDropDependencyField), [{\n          id: maxId + 1,\n          boolean: false\n        }])\n      });\n    });\n  };\n  var handleComposition = function handleComposition() {\n    var value = [];\n    if (iFunctionSelected.IFUNCAO === \"Preenchimento automático de campos\") {\n      if (context.composition.compositionPlanning[context.composition.openCompositionPlanningPath] && context.composition.compositionPlanning[context.composition.openCompositionPlanningPath][\"InternalFunctions\"] && context.composition.compositionPlanning[context.composition.openCompositionPlanningPath][\"InternalFunctions\"].length > 0 && context.composition.compositionPlanning[context.composition.openCompositionPlanningPath][\"InternalFunctions\"].filter(function (obj) {\n        return obj.type === \"Preenchimento automático de campos\";\n      }).length > 0) {\n        var currentValue = context.composition.compositionPlanning[context.composition.openCompositionPlanningPath][\"InternalFunctions\"].filter(function (obj) {\n          return obj.type === \"Preenchimento automático de campos\";\n        })[0];\n        var obj = _objectSpread({}, currentValue.affectedFields);\n        var _props = {};\n        dependencies.forEach(function (y) {\n          _props[y.columnRef] = y.field.path;\n        });\n        currentValue.affectedFields = _objectSpread(_objectSpread({}, obj), {}, _defineProperty({}, field.path, {\n          url: \"\".concat(getEnvUrl('aidarefsets', '4010'), \"/\"),\n          // url: \"http://172.21.220.49:4010/\",\n          serviceName: \"refsetConceptsPaginated?id=\".concat(refset.id),\n          method: \"post\",\n          body: {\n            page: 0,\n            props: [_props]\n          },\n          datatype: field.datatype,\n          upperOccurrences: field.upperOccurrences,\n          name: field.name,\n          path: field.path,\n          refsetName: refset.name,\n          refsetId: refset.id,\n          resColumn: columnRes,\n          codeColumn: codeColumn,\n          textColumn: textColumn,\n          dependencies: dependencies.map(function (y) {\n            return {\n              columnRef: y.columnRef,\n              field: y.field\n            };\n          })\n        }));\n        value = [].concat(_toConsumableArray(context.composition.compositionPlanning[context.composition.openCompositionPlanningPath][\"InternalFunctions\"].filter(function (obj) {\n          return obj.type !== \"Preenchimento automático de campos\";\n        })), [currentValue]);\n      } else {\n        var _props2 = {};\n        dependencies.forEach(function (y) {\n          _props2[y.columnRef] = y.field.path;\n        });\n        value = [].concat(_toConsumableArray(context.composition.compositionPlanning[context.composition.openCompositionPlanningPath][\"InternalFunctions\"]), [{\n          affectedFields: _defineProperty({}, field.path, {\n            url: \"\".concat(getEnvUrl('aidarefsets', '4010'), \"/\"),\n            // url: \"http://172.21.220.49:4010/\",\n            serviceName: \"refsetConceptsPaginated?id=\".concat(refset.id),\n            method: \"post\",\n            body: {\n              page: 0,\n              props: [_props2]\n            },\n            datatype: field.datatype,\n            upperOccurrences: field.upperOccurrences,\n            name: field.name,\n            path: field.path,\n            refsetName: refset.name,\n            refsetId: refset.id,\n            resColumn: columnRes,\n            codeColumn: codeColumn,\n            textColumn: textColumn,\n            dependencies: dependencies.map(function (y) {\n              return {\n                columnRef: y.columnRef,\n                field: y.field\n              };\n            })\n          }),\n          type: \"Preenchimento automático de campos\"\n        }]);\n      }\n    }\n    context.composition.handleCompositionPlanning(context.composition.openCompositionPlanningPath, \"InternalFunctions\", value);\n    setField(null);\n    setRefset(null);\n    setColumnRes(null);\n    setCodeColumn(null);\n    setTextColumn(null);\n    setDependencies([{\n      id: 0,\n      columnRef: null,\n      field: null\n    }]);\n    setShowDrop(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        showDropList: false,\n        showDropRefsets: false,\n        showDropColRes: false,\n        showDropField: false,\n        showDropDependencyField: [{\n          id: 0,\n          boolean: false\n        }],\n        showDropDependencyColumn: [{\n          id: 0,\n          boolean: false\n        }],\n        showDropCodeColumn: false,\n        showDropTextColumn: false\n      });\n    });\n  }; // FUNCTIONS\n\n  var _useState17 = useState(\"\"),\n    _useState18 = _slicedToArray(_useState17, 2),\n    searchValue = _useState18[0],\n    setSearchValue = _useState18[1];\n  var _useState19 = useState(null),\n    _useState20 = _slicedToArray(_useState19, 2),\n    functionSelected = _useState20[0],\n    setFunction = _useState20[1];\n  var _useState21 = useState(null),\n    _useState22 = _slicedToArray(_useState21, 2),\n    concepts = _useState22[0],\n    setConcepts = _useState22[1];\n  var _useState23 = useState(false),\n    _useState24 = _slicedToArray(_useState23, 2),\n    showDropConcepts = _useState24[0],\n    setShowDropConcepts = _useState24[1];\n  var _useState25 = useState(null),\n    _useState26 = _slicedToArray(_useState25, 2),\n    conceptSelected = _useState26[0],\n    setConcept = _useState26[1];\n  useEffect(function () {\n    functionSelected !== null && axios({\n      method: \"get\",\n      url: \"\".concat(getEnvUrl('aidarefsets', '4010'), \"/refsetConcepts?id=\").concat(functionSelected.id),\n      // url: `http://172.21.220.49:4010/refsetConcepts?id=${functionSelected.id}`,\n      headers: {\n        Authorization: \"Bearer \" + context.token\n      }\n    }).then(function (response) {\n      if (response.data.success === true) {\n        setConcepts(response.data.concepts);\n      } else {\n        setConcepts([]);\n      }\n    }).catch(function (error) {\n      setConcepts([]);\n    });\n  }, [functionSelected, context.token]);\n  var handleFunctionsComposition = function handleFunctionsComposition() {\n    var value = [conceptSelected.functionName];\n    context.composition.handleCompositionPlanning(context.composition.openCompositionPlanningPath, \"Functions\", value);\n    setFunction(null);\n    setConcept(null);\n    setShowDropConcepts(false);\n  };\n  var handleFunctionSelected = function handleFunctionSelected(obj) {\n    setFunction(functionSelected !== null && functionSelected.id === obj.id ? null : obj);\n    setConcept(null);\n    setConcepts(null);\n  };\n  var handleSetValue = function handleSetValue(value) {\n    setConcept(conceptSelected !== null && conceptSelected === value ? null : value);\n    setShowDropConcepts(false);\n  };\n  var handleClearValue = function handleClearValue() {\n    setConcept(null);\n    setShowDropConcepts(false);\n  };\n  var handleSetShowDropConcepts = function handleSetShowDropConcepts() {\n    setShowDropConcepts(!showDropConcepts);\n  };\n  var handleRemoveFilter = function handleRemoveFilter() {\n    setSearchValue(\"\");\n    setFunction(null);\n    setConcepts(null);\n  };\n  var handleCancelChanges = function handleCancelChanges() {\n    props.onCancel(); // ver se ao carregar no botão de cancelar, queremos que o item fique deseleccionado -> descomentar linha de baixo\n    //await this.context.composition.handleOpenCompositionPlanning(this.context.composition.openCompositionPlanningPath);\n  };\n\n  var handleConfirmChanges = function handleConfirmChanges() {\n    functionSelected !== null && conceptSelected !== null && handleFunctionsComposition();\n  };\n  var bodyDataFunctions = [{\n    value: conceptSelected,\n    valueKey: \"functionName\",\n    placeholder: \"Selecione uma função...\",\n    type: \"dropdown\",\n    key: \"concepts\",\n    isDropSelected: showDropConcepts,\n    dropList: concepts,\n    dropListID: \"idFunction\",\n    dropListTextID: \"functionName\",\n    handleOpenDrop: handleSetShowDropConcepts,\n    handleSetValue: handleSetValue,\n    handleClearValue: handleClearValue\n  }];\n  var bodyDataInternalFunctions1 = [{\n    title: \"Campo a ser preenchido\",\n    value: field,\n    valueKey: \"name\",\n    placeholder: \"Selecione um campo...\",\n    type: \"dropdown\",\n    key: \"field\",\n    isDropSelected: showDrop.showDropField,\n    dropList: context.composition.formFields,\n    dropListID: \"path\",\n    dropListTextID: \"name\",\n    handleOpenDrop: handleOpenDropList,\n    handleSetValue: handleFieldSelected,\n    handleClearValue: handleRemoveField\n  }, {\n    title: \"Refset\",\n    value: refset,\n    valueKey: \"name\",\n    placeholder: \"Selecione um refset...\",\n    type: \"dropdown\",\n    key: \"refsets\",\n    isDropSelected: showDrop.showDropRefsets,\n    dropList: context.composition.compositionPlanningRefsets,\n    dropListID: \"id\",\n    dropListTextID: \"name\",\n    handleOpenDrop: handleOpenDropList,\n    handleSetValue: handleRefsetSelected,\n    handleClearValue: handleRemoveRefset\n  }];\n  var bodyDataInternalFunctions2 = [];\n  var bodyDataInternalFunctions3 = [];\n  if (refset !== null && field !== null) {\n    bodyDataInternalFunctions2 = [{\n      type: \"dependency\",\n      title: \"Associar dependências\",\n      text: \"Nota: Para os campos com opções, o identificador único é utilizado como variável para associar à coluna do refset.\",\n      dependencies: dependencies,\n      handleDependency: handleDependency,\n      handleOpenDrop: handleDropDependency,\n      showDropDependencyField: showDrop.showDropDependencyField,\n      showDropDependencyColumn: showDrop.showDropDependencyColumn,\n      formFields: context.composition.formFields,\n      refsets: refset.concept_keys,\n      removeDependency: removeDependency,\n      addDependency: addDependency\n    }];\n    bodyDataInternalFunctions3 = field.datatype === \"DV_CODED_TEXT\" ? [{\n      title: \"Coluna do identificador único do resultado\",\n      value: codeColumn,\n      placeholder: \"Selecione uma coluna...\",\n      type: \"dropdown\",\n      key: \"codeColumn\",\n      isDropSelected: showDrop.showDropCodeColumn,\n      dropList: refset.concept_keys,\n      handleOpenDrop: handleOpenDropList,\n      handleSetValue: handleCodeColumnSelected,\n      handleClearValue: handleRemoveCodeColumn\n    }, {\n      title: \"Coluna da designação do resultado\",\n      value: textColumn,\n      placeholder: \"Selecione uma coluna...\",\n      type: \"dropdown\",\n      key: \"textColumn\",\n      isDropSelected: showDrop.showDropTextColumn,\n      dropList: refset.concept_keys,\n      handleOpenDrop: handleOpenDropList,\n      handleSetValue: handleTextColumnSelected,\n      handleClearValue: handleRemoveTextColumn\n    }] : [{\n      title: \"Coluna do resultado\",\n      value: columnRes,\n      placeholder: \"Selecione uma coluna...\",\n      type: \"dropdown\",\n      key: \"colRes\",\n      isDropSelected: showDrop.showDropColRes,\n      dropList: refset.concept_keys,\n      handleOpenDrop: handleOpenDropList,\n      handleSetValue: handleColumnResSelected,\n      handleClearValue: handleRemoveColumnRes\n    }];\n  }\n  var bodyDataInternalFunctions = bodyDataInternalFunctions1.concat(bodyDataInternalFunctions2, bodyDataInternalFunctions3);\n  var functionsList = context.composition.compositionPlanningFunctions;\n  var internalFunctionsList = context.composition.compositionPlanningInternalFunctions;\n  var functionsContent;\n  var internalFunctionsContent;\n  functionsContent = context.composition.openCompositionPlanning && /*#__PURE__*/React.createElement(CompositionPlanningPanel, {\n    jsonTitle: \"Functions\",\n    itemsList: functionsList,\n    selectedItem: functionSelected,\n    handleSelectItem: handleFunctionSelected,\n    badgePrefix: \"F\",\n    hasSearchBar: true,\n    searchBarType: \"SearchBar\",\n    searchValue: searchValue,\n    handleChangeSearch: setSearchValue,\n    handleRemoveFilter: handleRemoveFilter,\n    concepts: concepts,\n    bodyData: bodyDataFunctions\n  });\n  internalFunctionsContent = context.composition.openCompositionPlanning && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(CompositionPlanningPanel, {\n    jsonTitle: \"InternalFunctions\",\n    itemsList: internalFunctionsList,\n    hasSearchBar: false,\n    selectedItem: iFunctionSelected,\n    dropListID: \"ID\",\n    dropListTextID: \"IFUNCAO\",\n    showDropList: showDrop.showDropList,\n    handleOpenDrop: handleOpenDropList,\n    dropKey: \"list\",\n    handleClearValue: handleClearIFunction,\n    handleSelectItem: handleIFunctionSelected,\n    bodyData: bodyDataInternalFunctions\n  }), refset !== null && field !== null && (field.datatype !== \"DV_CODED_TEXT\" ? columnRes !== null : codeColumn !== null && textColumn !== null) && dependencies.filter(function (obj) {\n    return obj.columnRef !== null && obj.field !== null;\n  }).length === dependencies.length && /*#__PURE__*/React.createElement(ConfirmButton, {\n    title: \"Criar depend\\xEAncia\",\n    handleConfirm: handleComposition\n  }));\n  var tabData = [{\n    title: 'Funções',\n    content: functionsContent\n  }, {\n    title: 'Funções Internas',\n    content: internalFunctionsContent\n  }];\n  var content = /*#__PURE__*/React.createElement(Tab, {\n    tabData: tabData\n  });\n  return /*#__PURE__*/React.createElement(ProviderCombinedContext, null, /*#__PURE__*/React.createElement(SidePanel, {\n    title: \"Associar Fun\\xE7\\xE3o\",\n    content: content,\n    isSidePanelOpen: props.isSidePanelOpen,\n    collapseSidePanel: function collapseSidePanel() {\n      return props.collapseSidePanel();\n    },\n    onCancelChanges: function onCancelChanges() {\n      return handleCancelChanges();\n    },\n    onClosed: function onClosed() {\n      return handleConfirmChanges();\n    }\n  }));\n};\nexport default FunctionSettingsPanel;","map":{"version":3,"names":["React","useContext","useEffect","useState","SidePanel","CombinedContext","ProviderCombinedContext","Tab","axios","CompositionPlanningPanel","getFormFields","maxValueArray","ConfirmButton","getEnvUrl","FunctionSettingsPanel","props","context","iFunctionSelected","setIFunction","showDropList","showDropRefsets","showDropColRes","showDropField","showDropDependencyField","id","boolean","showDropDependencyColumn","showDropCodeColumn","showDropTextColumn","showDrop","setShowDrop","field","setField","refset","setRefset","columnRes","setColumnRes","columnRef","dependencies","setDependencies","codeColumn","setCodeColumn","textColumn","setTextColumn","handleOpenDropList","key","prevState","handleIFunctionSelected","obj","handleClearIFunction","IFUNCAO","composition","compositionPlanningRefsets","length","method","url","headers","Authorization","token","then","response","data","success","Array","isArray","refsets","updateCompositionPlanningRefsets","formFields","template","values","updateFormFields","handleFieldSelected","handleRemoveField","handleRefsetSelected","handleRemoveRefset","handleCodeColumnSelected","handleRemoveCodeColumn","handleTextColumnSelected","handleRemoveTextColumn","handleColumnResSelected","handleRemoveColumnRes","handleDependency","type","value","newDependencies","forEach","push","newShowDropDependencyColumn","newShowDropDependencyField","handleDropDependency","array","removeDependency","filter","addDependency","ids","map","maxId","handleComposition","compositionPlanning","openCompositionPlanningPath","currentValue","affectedFields","y","path","serviceName","body","page","datatype","upperOccurrences","name","refsetName","refsetId","resColumn","handleCompositionPlanning","searchValue","setSearchValue","functionSelected","setFunction","concepts","setConcepts","showDropConcepts","setShowDropConcepts","conceptSelected","setConcept","catch","error","handleFunctionsComposition","functionName","handleFunctionSelected","handleSetValue","handleClearValue","handleSetShowDropConcepts","handleRemoveFilter","handleCancelChanges","onCancel","handleConfirmChanges","bodyDataFunctions","valueKey","placeholder","isDropSelected","dropList","dropListID","dropListTextID","handleOpenDrop","bodyDataInternalFunctions1","title","bodyDataInternalFunctions2","bodyDataInternalFunctions3","text","concept_keys","bodyDataInternalFunctions","concat","functionsList","compositionPlanningFunctions","internalFunctionsList","compositionPlanningInternalFunctions","functionsContent","internalFunctionsContent","openCompositionPlanning","createElement","jsonTitle","itemsList","selectedItem","handleSelectItem","badgePrefix","hasSearchBar","searchBarType","handleChangeSearch","bodyData","dropKey","handleConfirm","tabData","content","isSidePanelOpen","collapseSidePanel","onCancelChanges","onClosed"],"sources":["C:/Users/ines_/fisiosys/frontend/node_modules/protected-aidaforms/dist/components/FormDesigner/Sidebar/SidePanel/CompositionPlanningPanels/FunctionSettingsPanel/FunctionSettingsPanel.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport SidePanel from \"../../SidePanel\";\r\nimport CombinedContext from \"../../../../../../contexts/CombinedContext\";\r\nimport ProviderCombinedContext from \"../../../../../../contexts/ProviderCombinedContext\";\r\nimport Tab from \"../../../../UI/Tab/Tab\";\r\nimport axios from \"axios\";\r\nimport CompositionPlanningPanel from \"../CompositionPlanningPanel\";\r\nimport { getFormFields } from \"../../../../../../assets/functions/GetFormFields/getFormFields\";\r\nimport { maxValueArray } from \"../../../../../../assets/functions/Maximum/maxValueArray\";\r\nimport ConfirmButton from \"../../../../UI/Button/ConfirmButton\";\r\nimport { getEnvUrl } from \"../../../../../../environment\";\r\n\r\nconst FunctionSettingsPanel = props => {\r\n  const context = useContext(CombinedContext); // INTERNAL FUNCTIONS\r\n\r\n  const [iFunctionSelected, setIFunction] = useState(null);\r\n  const [showDrop, setShowDrop] = useState({\r\n    showDropList: false,\r\n    // Show primeiro dropdown dos conceitos\r\n    showDropRefsets: false,\r\n    // Show dropdown dos refsets\r\n    showDropColRes: false,\r\n    // Show dropdowm coluna com a resposta\r\n    showDropField: false,\r\n    // Show dropdown coluna com o campo a ser preenchido\r\n    showDropDependencyField: [{\r\n      id: 0,\r\n      boolean: false\r\n    }],\r\n    // show dropdown campos dependencia\r\n    showDropDependencyColumn: [{\r\n      id: 0,\r\n      boolean: false\r\n    }],\r\n    // show dropdown colunas dependencia\r\n    showDropCodeColumn: false,\r\n    showDropTextColumn: false\r\n  });\r\n  const [field, setField] = useState(null); // Campo a ser preenchido\r\n\r\n  const [refset, setRefset] = useState(null); // refset selecionado\r\n\r\n  const [columnRes, setColumnRes] = useState(null); // coluna com a resposta\r\n\r\n  const [dependencies, setDependencies] = useState([{\r\n    id: 0,\r\n    columnRef: null,\r\n    field: null\r\n  }]); // dependencias\r\n\r\n  const [codeColumn, setCodeColumn] = useState(null);\r\n  const [textColumn, setTextColumn] = useState(null);\r\n\r\n  const handleOpenDropList = key => {\r\n    setShowDrop(prevState => ({ ...prevState,\r\n      [key]: !prevState[key]\r\n    }));\r\n  };\r\n\r\n  const handleIFunctionSelected = obj => {\r\n    setIFunction(iFunctionSelected !== null && iFunctionSelected.id === obj.id ? null : obj);\r\n    setShowDrop(prevState => ({ ...prevState,\r\n      showDropList: false\r\n    }));\r\n    setField(null);\r\n    setRefset(null);\r\n  };\r\n\r\n  const handleClearIFunction = () => {\r\n    setIFunction(null);\r\n    setField(null);\r\n    setRefset(null);\r\n    setShowDrop(prevState => ({ ...prevState,\r\n      showDropList: false,\r\n      showDropField: false,\r\n      showDropRefsets: false\r\n    }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (iFunctionSelected !== null && iFunctionSelected.IFUNCAO === \"Preenchimento automático de campos\") {\r\n        if (context.composition.compositionPlanningRefsets.length === 0) {\r\n          axios({\r\n            method: \"get\",\r\n            url: `${getEnvUrl('aidarefsets', '4010')}/localRefsets`,\r\n            // url: \"http://172.21.220.49:4010/localRefsets\",\r\n            headers: {\r\n              Authorization: \"Bearer \" + context.token\r\n            }\r\n          }).then(response => {\r\n            if (response.data.success === true && Array.isArray(response.data.refsets)) {\r\n              context.composition.updateCompositionPlanningRefsets(response.data.refsets);\r\n            }\r\n          });\r\n        }\r\n\r\n        if (context.composition.formFields.length === 0) {\r\n          const values = await getFormFields(context.composition.template);\r\n          context.composition.updateFormFields(values);\r\n        }\r\n      }\r\n    })();\r\n  }, [iFunctionSelected, context.token, context.composition]);\r\n\r\n  const handleFieldSelected = obj => {\r\n    setField(field === obj ? null : obj);\r\n    setShowDrop(prevState => ({ ...prevState,\r\n      showDropField: false\r\n    }));\r\n  };\r\n\r\n  const handleRemoveField = () => {\r\n    setField(null);\r\n    setShowDrop(prevState => ({ ...prevState,\r\n      showDropField: false\r\n    }));\r\n    setDependencies([{\r\n      id: 0,\r\n      columnRef: null,\r\n      field: null\r\n    }]);\r\n    setColumnRes(null);\r\n    setTextColumn(null);\r\n    setCodeColumn(null);\r\n  };\r\n\r\n  const handleRefsetSelected = obj => {\r\n    setRefset(refset === obj ? null : obj);\r\n    setShowDrop(prevState => ({ ...prevState,\r\n      showDropRefsets: false\r\n    }));\r\n  };\r\n\r\n  const handleRemoveRefset = () => {\r\n    setRefset(null);\r\n    setShowDrop(prevState => ({ ...prevState,\r\n      showDropRefsets: false\r\n    }));\r\n    setDependencies([{\r\n      id: 0,\r\n      columnRef: null,\r\n      field: null\r\n    }]);\r\n    setColumnRes(null);\r\n    setTextColumn(null);\r\n    setCodeColumn(null);\r\n  };\r\n\r\n  const handleCodeColumnSelected = obj => {\r\n    setCodeColumn(codeColumn === obj ? null : obj);\r\n    setShowDrop(prevState => ({ ...prevState,\r\n      showDropCodeColumn: false\r\n    }));\r\n  };\r\n\r\n  const handleRemoveCodeColumn = () => {\r\n    setCodeColumn(null);\r\n    setShowDrop(prevState => ({ ...prevState,\r\n      showDropCodeColumn: false\r\n    }));\r\n  };\r\n\r\n  const handleTextColumnSelected = obj => {\r\n    setTextColumn(textColumn === obj ? null : obj);\r\n    setShowDrop(prevState => ({ ...prevState,\r\n      showDropTextColumn: false\r\n    }));\r\n  };\r\n\r\n  const handleRemoveTextColumn = () => {\r\n    setTextColumn(null);\r\n    setShowDrop(prevState => ({ ...prevState,\r\n      showDropTextColumn: false\r\n    }));\r\n  };\r\n\r\n  const handleColumnResSelected = obj => {\r\n    setColumnRes(columnRes === obj ? null : obj);\r\n    setShowDrop(prevState => ({ ...prevState,\r\n      showDropColRes: false\r\n    }));\r\n  };\r\n\r\n  const handleRemoveColumnRes = () => {\r\n    setColumnRes(null);\r\n    setShowDrop(prevState => ({ ...prevState,\r\n      showDropColRes: false\r\n    }));\r\n  };\r\n\r\n  const handleDependency = (id, type, value) => {\r\n    let newDependencies = [];\r\n    dependencies.forEach(obj => {\r\n      if (obj.id === id) {\r\n        newDependencies.push({ ...obj,\r\n          [type]: value\r\n        });\r\n      } else {\r\n        newDependencies.push(obj);\r\n      }\r\n    });\r\n    setDependencies(newDependencies);\r\n    let newShowDropDependencyColumn = [];\r\n    showDrop.showDropDependencyColumn.forEach(obj => {\r\n      newShowDropDependencyColumn.push({ ...obj,\r\n        boolean: false\r\n      });\r\n    });\r\n    let newShowDropDependencyField = [];\r\n    showDrop.showDropDependencyField.forEach(obj => {\r\n      newShowDropDependencyField.push({ ...obj,\r\n        boolean: false\r\n      });\r\n    });\r\n    setShowDrop(prevState => ({ ...prevState,\r\n      showDropDependencyColumn: newShowDropDependencyColumn,\r\n      showDropDependencyField: newShowDropDependencyField\r\n    }));\r\n  };\r\n\r\n  const handleDropDependency = (id, type) => {\r\n    let array = [];\r\n    showDrop[type].forEach(obj => {\r\n      if (obj.id === id) {\r\n        array.push({ ...obj,\r\n          boolean: !obj.boolean\r\n        });\r\n      } else {\r\n        array.push(obj);\r\n      }\r\n    });\r\n    setShowDrop(prevState => ({ ...prevState,\r\n      [type]: array\r\n    }));\r\n  };\r\n\r\n  const removeDependency = id => {\r\n    let newDependencies = dependencies.filter(obj => obj.id !== id);\r\n    let newShowDropDependencyField = showDrop.showDropDependencyField.filter(obj => obj.id !== id);\r\n    let newShowDropDependencyColumn = showDrop.showDropDependencyColumn.filter(obj => obj.id !== id);\r\n    setDependencies(newDependencies);\r\n    setShowDrop(prevState => ({ ...prevState,\r\n      showDropDependencyColumn: newShowDropDependencyColumn,\r\n      showDropDependencyField: newShowDropDependencyField\r\n    }));\r\n  };\r\n\r\n  const addDependency = () => {\r\n    const ids = dependencies.map(obj => {\r\n      return obj.id;\r\n    });\r\n    let maxId = maxValueArray(ids);\r\n    const newDependencies = [...dependencies, {\r\n      id: maxId + 1,\r\n      field: null,\r\n      columnRef: null\r\n    }];\r\n    setDependencies(newDependencies);\r\n    setShowDrop(prevState => ({ ...prevState,\r\n      showDropDependencyColumn: [...prevState.showDropDependencyColumn, {\r\n        id: maxId + 1,\r\n        boolean: false\r\n      }],\r\n      showDropDependencyField: [...prevState.showDropDependencyField, {\r\n        id: maxId + 1,\r\n        boolean: false\r\n      }]\r\n    }));\r\n  };\r\n\r\n  const handleComposition = () => {\r\n    let value = [];\r\n\r\n    if (iFunctionSelected.IFUNCAO === \"Preenchimento automático de campos\") {\r\n      if (context.composition.compositionPlanning[context.composition.openCompositionPlanningPath] && context.composition.compositionPlanning[context.composition.openCompositionPlanningPath][\"InternalFunctions\"] && context.composition.compositionPlanning[context.composition.openCompositionPlanningPath][\"InternalFunctions\"].length > 0 && context.composition.compositionPlanning[context.composition.openCompositionPlanningPath][\"InternalFunctions\"].filter(obj => obj.type === \"Preenchimento automático de campos\").length > 0) {\r\n        let currentValue = context.composition.compositionPlanning[context.composition.openCompositionPlanningPath][\"InternalFunctions\"].filter(obj => obj.type === \"Preenchimento automático de campos\")[0];\r\n        let obj = { ...currentValue.affectedFields\r\n        };\r\n        let props = {};\r\n        dependencies.forEach(y => {\r\n          props[y.columnRef] = y.field.path;\r\n        });\r\n        currentValue.affectedFields = { ...obj,\r\n          [field.path]: {\r\n            url: `${getEnvUrl('aidarefsets', '4010')}/`,\r\n            // url: \"http://172.21.220.49:4010/\",\r\n            serviceName: `refsetConceptsPaginated?id=${refset.id}`,\r\n            method: \"post\",\r\n            body: {\r\n              page: 0,\r\n              props: [props]\r\n            },\r\n            datatype: field.datatype,\r\n            upperOccurrences: field.upperOccurrences,\r\n            name: field.name,\r\n            path: field.path,\r\n            refsetName: refset.name,\r\n            refsetId: refset.id,\r\n            resColumn: columnRes,\r\n            codeColumn: codeColumn,\r\n            textColumn: textColumn,\r\n            dependencies: dependencies.map(y => {\r\n              return {\r\n                columnRef: y.columnRef,\r\n                field: y.field\r\n              };\r\n            })\r\n          }\r\n        };\r\n        value = [...context.composition.compositionPlanning[context.composition.openCompositionPlanningPath][\"InternalFunctions\"].filter(obj => obj.type !== \"Preenchimento automático de campos\"), currentValue];\r\n      } else {\r\n        let props = {};\r\n        dependencies.forEach(y => {\r\n          props[y.columnRef] = y.field.path;\r\n        });\r\n        value = [...context.composition.compositionPlanning[context.composition.openCompositionPlanningPath][\"InternalFunctions\"], {\r\n          affectedFields: {\r\n            [field.path]: {\r\n              url: `${getEnvUrl('aidarefsets', '4010')}/`,\r\n              // url: \"http://172.21.220.49:4010/\",\r\n              serviceName: `refsetConceptsPaginated?id=${refset.id}`,\r\n              method: \"post\",\r\n              body: {\r\n                page: 0,\r\n                props: [props]\r\n              },\r\n              datatype: field.datatype,\r\n              upperOccurrences: field.upperOccurrences,\r\n              name: field.name,\r\n              path: field.path,\r\n              refsetName: refset.name,\r\n              refsetId: refset.id,\r\n              resColumn: columnRes,\r\n              codeColumn: codeColumn,\r\n              textColumn: textColumn,\r\n              dependencies: dependencies.map(y => {\r\n                return {\r\n                  columnRef: y.columnRef,\r\n                  field: y.field\r\n                };\r\n              })\r\n            }\r\n          },\r\n          type: \"Preenchimento automático de campos\"\r\n        }];\r\n      }\r\n    }\r\n\r\n    context.composition.handleCompositionPlanning(context.composition.openCompositionPlanningPath, \"InternalFunctions\", value);\r\n    setField(null);\r\n    setRefset(null);\r\n    setColumnRes(null);\r\n    setCodeColumn(null);\r\n    setTextColumn(null);\r\n    setDependencies([{\r\n      id: 0,\r\n      columnRef: null,\r\n      field: null\r\n    }]);\r\n    setShowDrop(prevState => ({ ...prevState,\r\n      showDropList: false,\r\n      showDropRefsets: false,\r\n      showDropColRes: false,\r\n      showDropField: false,\r\n      showDropDependencyField: [{\r\n        id: 0,\r\n        boolean: false\r\n      }],\r\n      showDropDependencyColumn: [{\r\n        id: 0,\r\n        boolean: false\r\n      }],\r\n      showDropCodeColumn: false,\r\n      showDropTextColumn: false\r\n    }));\r\n  }; // FUNCTIONS\r\n\r\n\r\n  const [searchValue, setSearchValue] = useState(\"\");\r\n  const [functionSelected, setFunction] = useState(null);\r\n  const [concepts, setConcepts] = useState(null);\r\n  const [showDropConcepts, setShowDropConcepts] = useState(false);\r\n  const [conceptSelected, setConcept] = useState(null);\r\n  useEffect(() => {\r\n    functionSelected !== null && axios({\r\n      method: \"get\",\r\n      url: `${getEnvUrl('aidarefsets', '4010')}/refsetConcepts?id=${functionSelected.id}`,\r\n      // url: `http://172.21.220.49:4010/refsetConcepts?id=${functionSelected.id}`,\r\n      headers: {\r\n        Authorization: \"Bearer \" + context.token\r\n      }\r\n    }).then(response => {\r\n      if (response.data.success === true) {\r\n        setConcepts(response.data.concepts);\r\n      } else {\r\n        setConcepts([]);\r\n      }\r\n    }).catch(error => {\r\n      setConcepts([]);\r\n    });\r\n  }, [functionSelected, context.token]);\r\n\r\n  const handleFunctionsComposition = () => {\r\n    const value = [conceptSelected.functionName];\r\n    context.composition.handleCompositionPlanning(context.composition.openCompositionPlanningPath, \"Functions\", value);\r\n    setFunction(null);\r\n    setConcept(null);\r\n    setShowDropConcepts(false);\r\n  };\r\n\r\n  const handleFunctionSelected = obj => {\r\n    setFunction(functionSelected !== null && functionSelected.id === obj.id ? null : obj);\r\n    setConcept(null);\r\n    setConcepts(null);\r\n  };\r\n\r\n  const handleSetValue = value => {\r\n    setConcept(conceptSelected !== null && conceptSelected === value ? null : value);\r\n    setShowDropConcepts(false);\r\n  };\r\n\r\n  const handleClearValue = () => {\r\n    setConcept(null);\r\n    setShowDropConcepts(false);\r\n  };\r\n\r\n  const handleSetShowDropConcepts = () => {\r\n    setShowDropConcepts(!showDropConcepts);\r\n  };\r\n\r\n  const handleRemoveFilter = () => {\r\n    setSearchValue(\"\");\r\n    setFunction(null);\r\n    setConcepts(null);\r\n  };\r\n\r\n  const handleCancelChanges = () => {\r\n    props.onCancel(); // ver se ao carregar no botão de cancelar, queremos que o item fique deseleccionado -> descomentar linha de baixo\r\n    //await this.context.composition.handleOpenCompositionPlanning(this.context.composition.openCompositionPlanningPath);\r\n  };\r\n\r\n  const handleConfirmChanges = () => {\r\n    functionSelected !== null && conceptSelected !== null && handleFunctionsComposition();\r\n  };\r\n\r\n  let bodyDataFunctions = [{\r\n    value: conceptSelected,\r\n    valueKey: \"functionName\",\r\n    placeholder: \"Selecione uma função...\",\r\n    type: \"dropdown\",\r\n    key: \"concepts\",\r\n    isDropSelected: showDropConcepts,\r\n    dropList: concepts,\r\n    dropListID: \"idFunction\",\r\n    dropListTextID: \"functionName\",\r\n    handleOpenDrop: handleSetShowDropConcepts,\r\n    handleSetValue: handleSetValue,\r\n    handleClearValue: handleClearValue\r\n  }];\r\n  let bodyDataInternalFunctions1 = [{\r\n    title: \"Campo a ser preenchido\",\r\n    value: field,\r\n    valueKey: \"name\",\r\n    placeholder: \"Selecione um campo...\",\r\n    type: \"dropdown\",\r\n    key: \"field\",\r\n    isDropSelected: showDrop.showDropField,\r\n    dropList: context.composition.formFields,\r\n    dropListID: \"path\",\r\n    dropListTextID: \"name\",\r\n    handleOpenDrop: handleOpenDropList,\r\n    handleSetValue: handleFieldSelected,\r\n    handleClearValue: handleRemoveField\r\n  }, {\r\n    title: \"Refset\",\r\n    value: refset,\r\n    valueKey: \"name\",\r\n    placeholder: \"Selecione um refset...\",\r\n    type: \"dropdown\",\r\n    key: \"refsets\",\r\n    isDropSelected: showDrop.showDropRefsets,\r\n    dropList: context.composition.compositionPlanningRefsets,\r\n    dropListID: \"id\",\r\n    dropListTextID: \"name\",\r\n    handleOpenDrop: handleOpenDropList,\r\n    handleSetValue: handleRefsetSelected,\r\n    handleClearValue: handleRemoveRefset\r\n  }];\r\n  let bodyDataInternalFunctions2 = [];\r\n  let bodyDataInternalFunctions3 = [];\r\n\r\n  if (refset !== null && field !== null) {\r\n    bodyDataInternalFunctions2 = [{\r\n      type: \"dependency\",\r\n      title: \"Associar dependências\",\r\n      text: \"Nota: Para os campos com opções, o identificador único é utilizado como variável para associar à coluna do refset.\",\r\n      dependencies: dependencies,\r\n      handleDependency: handleDependency,\r\n      handleOpenDrop: handleDropDependency,\r\n      showDropDependencyField: showDrop.showDropDependencyField,\r\n      showDropDependencyColumn: showDrop.showDropDependencyColumn,\r\n      formFields: context.composition.formFields,\r\n      refsets: refset.concept_keys,\r\n      removeDependency: removeDependency,\r\n      addDependency: addDependency\r\n    }];\r\n    bodyDataInternalFunctions3 = field.datatype === \"DV_CODED_TEXT\" ? [{\r\n      title: \"Coluna do identificador único do resultado\",\r\n      value: codeColumn,\r\n      placeholder: \"Selecione uma coluna...\",\r\n      type: \"dropdown\",\r\n      key: \"codeColumn\",\r\n      isDropSelected: showDrop.showDropCodeColumn,\r\n      dropList: refset.concept_keys,\r\n      handleOpenDrop: handleOpenDropList,\r\n      handleSetValue: handleCodeColumnSelected,\r\n      handleClearValue: handleRemoveCodeColumn\r\n    }, {\r\n      title: \"Coluna da designação do resultado\",\r\n      value: textColumn,\r\n      placeholder: \"Selecione uma coluna...\",\r\n      type: \"dropdown\",\r\n      key: \"textColumn\",\r\n      isDropSelected: showDrop.showDropTextColumn,\r\n      dropList: refset.concept_keys,\r\n      handleOpenDrop: handleOpenDropList,\r\n      handleSetValue: handleTextColumnSelected,\r\n      handleClearValue: handleRemoveTextColumn\r\n    }] : [{\r\n      title: \"Coluna do resultado\",\r\n      value: columnRes,\r\n      placeholder: \"Selecione uma coluna...\",\r\n      type: \"dropdown\",\r\n      key: \"colRes\",\r\n      isDropSelected: showDrop.showDropColRes,\r\n      dropList: refset.concept_keys,\r\n      handleOpenDrop: handleOpenDropList,\r\n      handleSetValue: handleColumnResSelected,\r\n      handleClearValue: handleRemoveColumnRes\r\n    }];\r\n  }\r\n\r\n  let bodyDataInternalFunctions = bodyDataInternalFunctions1.concat(bodyDataInternalFunctions2, bodyDataInternalFunctions3);\r\n  let functionsList = context.composition.compositionPlanningFunctions;\r\n  let internalFunctionsList = context.composition.compositionPlanningInternalFunctions;\r\n  let functionsContent;\r\n  let internalFunctionsContent;\r\n  functionsContent = context.composition.openCompositionPlanning && /*#__PURE__*/React.createElement(CompositionPlanningPanel, {\r\n    jsonTitle: \"Functions\",\r\n    itemsList: functionsList,\r\n    selectedItem: functionSelected,\r\n    handleSelectItem: handleFunctionSelected,\r\n    badgePrefix: \"F\",\r\n    hasSearchBar: true,\r\n    searchBarType: \"SearchBar\",\r\n    searchValue: searchValue,\r\n    handleChangeSearch: setSearchValue,\r\n    handleRemoveFilter: handleRemoveFilter,\r\n    concepts: concepts,\r\n    bodyData: bodyDataFunctions\r\n  });\r\n  internalFunctionsContent = context.composition.openCompositionPlanning && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(CompositionPlanningPanel, {\r\n    jsonTitle: \"InternalFunctions\",\r\n    itemsList: internalFunctionsList,\r\n    hasSearchBar: false,\r\n    selectedItem: iFunctionSelected,\r\n    dropListID: \"ID\",\r\n    dropListTextID: \"IFUNCAO\",\r\n    showDropList: showDrop.showDropList,\r\n    handleOpenDrop: handleOpenDropList,\r\n    dropKey: \"list\",\r\n    handleClearValue: handleClearIFunction,\r\n    handleSelectItem: handleIFunctionSelected,\r\n    bodyData: bodyDataInternalFunctions\r\n  }), refset !== null && field !== null && (field.datatype !== \"DV_CODED_TEXT\" ? columnRes !== null : codeColumn !== null && textColumn !== null) && dependencies.filter(obj => obj.columnRef !== null && obj.field !== null).length === dependencies.length && /*#__PURE__*/React.createElement(ConfirmButton, {\r\n    title: \"Criar depend\\xEAncia\",\r\n    handleConfirm: handleComposition\r\n  }));\r\n  const tabData = [{\r\n    title: 'Funções',\r\n    content: functionsContent\r\n  }, {\r\n    title: 'Funções Internas',\r\n    content: internalFunctionsContent\r\n  }];\r\n  const content = /*#__PURE__*/React.createElement(Tab, {\r\n    tabData: tabData\r\n  });\r\n  return /*#__PURE__*/React.createElement(ProviderCombinedContext, null, /*#__PURE__*/React.createElement(SidePanel, {\r\n    title: \"Associar Fun\\xE7\\xE3o\",\r\n    content: content,\r\n    isSidePanelOpen: props.isSidePanelOpen,\r\n    collapseSidePanel: () => props.collapseSidePanel(),\r\n    onCancelChanges: () => handleCancelChanges(),\r\n    onClosed: () => handleConfirmChanges()\r\n  }));\r\n};\r\n\r\nexport default FunctionSettingsPanel;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}